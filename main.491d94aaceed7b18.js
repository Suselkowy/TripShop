"use strict";(self.webpackChunktripsShop=self.webpackChunktripsShop||[]).push([[179],{2011:(ot,De,k)=>{k.d(De,{Dh:()=>de,GT:()=>le,cc:()=>xe,hO:()=>Fe,on:()=>B,pX:()=>re,xv:()=>he});var u=k(4650),J=k(127),N=k(5813);ot=k.hmd(ot);const se=["ngOnDestroy"],re=(fe,Ke,nt,Ae={})=>new Proxy(fe,{get:(ye,Ce)=>nt.runOutsideAngular(()=>{var Ue;if(fe[Ce])return!(null===(Ue=Ae?.spy)||void 0===Ue)&&Ue.get&&Ae.spy.get(Ce,fe[Ce]),fe[Ce];if(se.indexOf(Ce)>-1)return()=>{};const Be=Ke.toPromise().then(U=>{const pe=U&&U[Ce];return"function"==typeof pe?pe.bind(U):pe&&pe.then?pe.then(G=>nt.run(()=>G)):nt.run(()=>pe)});return new Proxy(()=>{},{get:(U,pe)=>Be[pe],apply:(U,pe,G)=>Be.then(Q=>{var ne;const te=Q&&Q(...G);return!(null===(ne=Ae?.spy)||void 0===ne)&&ne.apply&&Ae.spy.apply(Ce,G,te),te})})})}),le=(fe,Ke)=>{Ke.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Ae=>{Object.defineProperty(fe.prototype,Ae,Object.getOwnPropertyDescriptor(nt.prototype||nt,Ae))})})};class ue{constructor(Ke){return Ke}}const de=new u.OlP("angularfire2.app.options"),he=new u.OlP("angularfire2.app.name");function B(fe,Ke,nt){const ye="object"==typeof nt&&nt||{};ye.name=ye.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ue=J.Z.apps.filter(Be=>Be&&Be.name===ye.name)[0]||Ke.runOutsideAngular(()=>J.Z.initializeApp(fe,ye));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&j("error",`${Ue.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Ue)}const j=(fe,...Ke)=>{(0,u.X6Q)()&&typeof console<"u"&&console[fe](...Ke)},W={provide:ue,useFactory:B,deps:[de,u.R0b,[new u.FiY,he]]};let Fe=(()=>{class fe{constructor(nt){J.Z.registerVersion("angularfire",N.q4.full,"core"),J.Z.registerVersion("angularfire",N.q4.full,"app-compat"),J.Z.registerVersion("angular",u.q4F.full,nt.toString())}static initializeApp(nt,Ae){return{ngModule:fe,providers:[{provide:de,useValue:nt},{provide:he,useValue:Ae}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(u.LFG(u.Lbi))},fe.\u0275mod=u.oAB({type:fe}),fe.\u0275inj=u.cJS({providers:[W]}),fe})();function xe(fe,Ke,nt,Ae,ye){const[,Ce,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===fe)||[];if(Ce)return function we(fe,Ke){try{return fe.toString()===Ke.toString()}catch{return fe===Ke}}(ye,Ue)||(ge("error",`${Ke} was already initialized on the ${nt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ye,was:Ue})),Ce;{const Be=Ae();return globalThis.\u0275AngularfireInstanceCache.push([fe,Be,ye]),Be}}const Xe=!!ot.hot,ge=(fe,...Ke)=>{(0,u.X6Q)()&&typeof console<"u"&&console[fe](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,De,k)=>{k.d(De,{q4:()=>Kr,iC:()=>Qi,HU:()=>Oo,vb:()=>Ys,JM:()=>Mo});var u=k(4650),J=k(5867),N=k(5861),se=k(9681),re=k(2090),le=k(4859),ue=k(1877),de=k(8766);const he="@firebase/installations",B="0.5.16",W=`w:${B}`,Fe="FIS_v2",Ke=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ye(I){return{token:I.token,requestStatus:2,expiresIn:Q(I.expiresIn),creationTime:Date.now()}}function Ce(I,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(I,D){const F=(yield D.json()).error;return Ke.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function U(I,{refreshToken:D}){const x=Be(I);return x.append("Authorization",function ne(I){return`${Fe} ${I}`}(D)),x}function pe(I){return G.apply(this,arguments)}function G(){return(G=(0,N.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function Q(I){return Number(I.replace("s","000"))}function te(I,D){return ke.apply(this,arguments)}function ke(){return(ke=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:x}){const F=Ae(I),K=Be(I),ie=D.getImmediate({optional:!0});if(ie){const _t=yield ie.getHeartbeatsHeader();_t&&K.append("x-firebase-client",_t)}const je={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:Fe,appId:I.appId,sdkVersion:W})},dt=yield pe(()=>fetch(F,je));if(dt.ok){const _t=yield dt.json();return{fid:_t.fid||x,registrationStatus:2,refreshToken:_t.refreshToken,authToken:ye(_t.authToken)}}throw yield Ce("Create Installation",dt)})).apply(this,arguments)}function Re(I){return new Promise(D=>{setTimeout(D,I)})}const Kt=/^[cdef][\w-]{21}$/;function ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function sn(I){return function at(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Kt.test(x)?x:""}catch{return""}}function _n(I){return`${I.appName}!${I.appId}`}const zt=new Map;function Yt(I,D){const x=_n(I);un(x,D),function Bi(I,D){const x=function xr(){return!yi&&"BroadcastChannel"in self&&(yi=new BroadcastChannel("[Firebase] FID Change"),yi.onmessage=I=>{un(I.data.key,I.data.fid)}),yi}();x&&x.postMessage({key:I,fid:D}),function jr(){0===zt.size&&yi&&(yi.close(),yi=null)}()}(x,D)}function un(I,D){const x=zt.get(I);if(x)for(const F of x)F(D)}let yi=null;const ii="firebase-installations-store";let si=null;function ia(){return si||(si=(0,de.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(ii)}})),si}function We(I,D){return _r.apply(this,arguments)}function _r(){return(_r=(0,N.Z)(function*(I,D){const x=_n(I),K=(yield ia()).transaction(ii,"readwrite"),ie=K.objectStore(ii),Ie=yield ie.get(x);return yield ie.put(D,x),yield K.done,(!Ie||Ie.fid!==D.fid)&&Yt(I,D.fid),D})).apply(this,arguments)}function cs(I){return zn.apply(this,arguments)}function zn(){return(zn=(0,N.Z)(function*(I){const D=_n(I),F=(yield ia()).transaction(ii,"readwrite");yield F.objectStore(ii).delete(D),yield F.done})).apply(this,arguments)}function oi(I,D){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,N.Z)(function*(I,D){const x=_n(I),K=(yield ia()).transaction(ii,"readwrite"),ie=K.objectStore(ii),Ie=yield ie.get(x),je=D(Ie);return void 0===je?yield ie.delete(x):yield ie.put(je,x),yield K.done,je&&(!Ie||Ie.fid!==je.fid)&&Yt(I,je.fid),je})).apply(this,arguments)}function On(I){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,N.Z)(function*(I){let D;const x=yield oi(I.appConfig,F=>{const K=hn(F),ie=ht(I,K);return D=ie.registrationPromise,ie.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function hn(I){return Dt(I||{fid:ze(),registrationStatus:0})}function ht(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ke.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(I,D){return nn.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:cr(I)}:{installationEntry:D}}function nn(){return(nn=(0,N.Z)(function*(I,D){try{const x=yield te(I,D);return We(I.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield cs(I.appConfig):yield We(I.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function cr(I){return Un.apply(this,arguments)}function Un(){return(Un=(0,N.Z)(function*(I){let D=yield Hr(I.appConfig);for(;1===D.registrationStatus;)yield Re(100),D=yield Hr(I.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield On(I);return F||x}return D})).apply(this,arguments)}function Hr(I){return oi(I,D=>{if(!D)throw Ke.create("installation-not-found");return Dt(D)})}function Dt(I){return function ls(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Jt(I,D){return Si.apply(this,arguments)}function Si(){return(Si=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},x){const F=Xt(I,x),K=U(I,x),ie=D.getImmediate({optional:!0});if(ie){const _t=yield ie.getHeartbeatsHeader();_t&&K.append("x-firebase-client",_t)}const je={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},dt=yield pe(()=>fetch(F,je));if(dt.ok)return ye(yield dt.json());throw yield Ce("Generate Auth Token",dt)})).apply(this,arguments)}function Xt(I,{fid:D}){return`${Ae(I)}/${D}/authTokens:generate`}function Wn(I){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,N.Z)(function*(I,D=!1){let x;const F=yield oi(I.appConfig,ie=>{if(!kt(ie))throw Ke.create("not-registered");const Ie=ie.authToken;if(!D&&H(Ie))return ie;if(1===Ie.requestStatus)return x=Je(I,D),ie;{if(!navigator.onLine)throw Ke.create("app-offline");const je=z(ie);return x=yt(I,je),je}});return x?yield x:F.authToken})).apply(this,arguments)}function Je(I,D){return be.apply(this,arguments)}function be(){return(be=(0,N.Z)(function*(I,D){let x=yield Ye(I.appConfig);for(;1===x.authToken.requestStatus;)yield Re(100),x=yield Ye(I.appConfig);const F=x.authToken;return 0===F.requestStatus?Wn(I,D):F})).apply(this,arguments)}function Ye(I){return oi(I,D=>{if(!kt(D))throw Ke.create("not-registered");return function ve(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function yt(I,D){return mt.apply(this,arguments)}function mt(){return(mt=(0,N.Z)(function*(I,D){try{const x=yield Jt(I,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield We(I.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield We(I.appConfig,F)}else yield cs(I.appConfig);throw x}})).apply(this,arguments)}function kt(I){return void 0!==I&&2===I.registrationStatus}function H(I){return 2===I.requestStatus&&!function L(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function z(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function $e(){return($e=(0,N.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:F}=yield On(D);return F?F.catch(console.error):Wn(D).catch(console.error),x.fid})).apply(this,arguments)}function Wt(){return(Wt=(0,N.Z)(function*(I,D=!1){const x=I;return yield dn(x),(yield Wn(x,D)).token})).apply(this,arguments)}function dn(I){return qt.apply(this,arguments)}function qt(){return(qt=(0,N.Z)(function*(I){const{registrationPromise:D}=yield On(I);D&&(yield D)})).apply(this,arguments)}function ds(I){return Ke.create("missing-app-config-values",{valueName:I})}const go="installations",wn=I=>{const D=I.getProvider("app").getImmediate(),x=function yn(I){if(!I||!I.options)throw ds("App Configuration");if(!I.name)throw ds("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw ds(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Fs=I=>{const D=I.getProvider("app").getImmediate(),x=(0,se._getProvider)(D,go).getImmediate();return{getId:()=>function Y(I){return $e.apply(this,arguments)}(x),getToken:K=>function ut(I){return Wt.apply(this,arguments)}(x,K)}};(function Xa(){(0,se._registerComponent)(new le.wA(go,wn,"PUBLIC")),(0,se._registerComponent)(new le.wA("installations-internal",Fs,"PRIVATE"))})(),(0,se.registerVersion)(he,B),(0,se.registerVersion)(he,B,"esm2017");const xi="@firebase/remote-config",jn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dh{constructor(D,x,F,K){this.client=D,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var x=this;return(0,N.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return K;D.eTag=K&&K.eTag;const ie=yield x.client.fetch(D),Ie=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Ie.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Ie),ie})()}}function wc(I=navigator){return I.languages&&I.languages[0]||I.language}class Cc{constructor(D,x,F,K,ie,Ie){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=ie,this.appId=Ie}fetch(D){var x=this;return(0,N.Z)(function*(){var F,K,ie;const[Ie,je]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:Ie,app_instance_id_token:je,app_id:x.appId,language_code:wc()},vn={method:"POST",headers:At,body:JSON.stringify(lt)},ar=fetch(_t,vn),No=new Promise((Ro,ko)=>{D.signal.addEventListener(()=>{const Fh=new Error("The operation was aborted.");Fh.name="AbortError",ko(Fh)})});let Is;try{yield Promise.race([ar,No]),Is=yield ar}catch(Ro){let ko="fetch-client-network";throw"AbortError"===(null===(F=Ro)||void 0===F?void 0:F.name)&&(ko="fetch-timeout"),jn.create(ko,{originalErrorMessage:null===(K=Ro)||void 0===K?void 0:K.message})}let Js=Is.status;const Ma=Is.headers.get("ETag")||void 0;let Xs,eo;if(200===Is.status){let Ro;try{Ro=yield Is.json()}catch(ko){throw jn.create("fetch-client-parse",{originalErrorMessage:null===(ie=ko)||void 0===ie?void 0:ie.message})}Xs=Ro.entries,eo=Ro.state}if("INSTANCE_STATE_UNSPECIFIED"===eo?Js=500:"NO_CHANGE"===eo?Js=304:("NO_TEMPLATE"===eo||"EMPTY_CONFIG"===eo)&&(Xs={}),304!==Js&&200!==Js)throw jn.create("fetch-status",{httpStatus:Js});return{status:Js,eTag:Ma,config:Xs}})()}}class Sp{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,N.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,N.Z)(function*(){yield function Yn(I,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),ie=setTimeout(x,K);I.addEventListener(()=>{clearTimeout(ie),F(jn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const ie=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function $l(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ie))throw ie;const Ie={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Ie),K.attemptFetch(D,Ie)}})()}}class Zl{constructor(D,x,F,K,ie){this.app=D,this._client=x,this._storageCache=F,this._storage=K,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ec(I,D){var x;const F=I.target.error||void 0;return jn.create(D,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const gs="app_namespace_store";class ql{constructor(D,x,F,K=function Op(){return new Promise((I,D)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=K=>{D(Ec(K,"storage-open"))},F.onsuccess=K=>{I(K.target.result)},F.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(gs,{keyPath:"compositeKey"})}}catch(F){D(jn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ie)=>{var Ie;const dt=F.transaction([gs],"readonly").objectStore(gs),_t=x.createCompositeKey(D);try{const At=dt.get(_t);At.onerror=lt=>{ie(Ec(lt,"storage-get"))},At.onsuccess=lt=>{const vn=lt.target.result;K(vn?vn.value:void 0)}}catch(At){ie(jn.create("storage-get",{originalErrorMessage:null===(Ie=At)||void 0===Ie?void 0:Ie.message}))}})})()}set(D,x){var F=this;return(0,N.Z)(function*(){const K=yield F.openDbPromise;return new Promise((ie,Ie)=>{var je;const _t=K.transaction([gs],"readwrite").objectStore(gs),At=F.createCompositeKey(D);try{const lt=_t.put({compositeKey:At,value:x});lt.onerror=vn=>{Ie(Ec(vn,"storage-set"))},lt.onsuccess=()=>{ie()}}catch(lt){Ie(jn.create("storage-set",{originalErrorMessage:null===(je=lt)||void 0===je?void 0:je.message}))}})})()}delete(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ie)=>{var Ie;const dt=F.transaction([gs],"readwrite").objectStore(gs),_t=x.createCompositeKey(D);try{const At=dt.delete(_t);At.onerror=lt=>{ie(Ec(lt,"storage-delete"))},At.onsuccess=()=>{K()}}catch(At){ie(jn.create("storage-delete",{originalErrorMessage:null===(Ie=At)||void 0===Ie?void 0:Ie.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Gl{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),ie=yield x;ie&&(D.lastFetchStatus=ie);const Ie=yield F;Ie&&(D.lastSuccessfulFetchTimestampMillis=Ie);const je=yield K;je&&(D.activeConfig=je)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function tu(){return Th.apply(this,arguments)}function Th(){return(Th=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function ms(){(0,se._registerComponent)(new le.wA("remote-config",function I(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jn.create("registration-window");if(!(0,re.hl)())throw jn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Ie,appId:je}=F.options;if(!ie)throw jn.create("registration-project-id");if(!Ie)throw jn.create("registration-api-key");if(!je)throw jn.create("registration-app-id");const dt=new ql(je,F.name,x=x||"firebase"),_t=new Gl(dt),At=new ue.Yd(xi);At.logLevel=ue.in.ERROR;const lt=new Cc(K,se.SDK_VERSION,x,ie,Ie,je),vn=new Sp(lt,dt),ar=new Dh(vn,dt,_t,At),No=new Zl(F,ar,_t,dt,At);return function fn(I){const D=(0,re.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(No),No},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(xi,"0.3.15"),(0,se.registerVersion)(xi,"0.3.15","esm2017")}();const Mi="/firebase-messaging-sw.js",Hi="/firebase-cloud-messaging-push-scope",$i="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ca="google.c.a.c_id",nu="google.c.a.c_l",bc="google.c.a.ts",Ah="google.c.a.e";var Zi=(()=>{return(I=Zi||(Zi={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Zi;var I})();function ai(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zr(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let ie=0;ie<F.length;++ie)K[ie]=F.charCodeAt(ie);return K}const mo="fcm_token_details_db",hr="fcm_token_object_Store";function Sh(I){return xh.apply(this,arguments)}function xh(){return xh=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(mo))return null;let D=null;return(yield(0,de.X3)(mo,5,{upgrade:(F=(0,N.Z)(function*(K,ie,Ie,je){var dt;if(ie<2||!K.objectStoreNames.contains(hr))return;const _t=je.objectStore(hr),At=yield _t.index("fcmSenderId").get(I);if(yield _t.clear(),At)if(2===ie){const lt=At;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;D={token:lt.fcmToken,createTime:null!==(dt=lt.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:ai(lt.vapidKey)}}}else if(3===ie){const lt=At;D={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:ai(lt.auth),p256dh:ai(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:ai(lt.vapidKey)}}}else if(4===ie){const lt=At;D={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:ai(lt.auth),p256dh:ai(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:ai(lt.vapidKey)}}}}),function(ie,Ie,je,dt){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(mo),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Tn(D)?D:null;var F}),xh.apply(this,arguments)}function Tn(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ui="firebase-messaging-store";let vr=null;function iu(){return vr||(vr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(ui)}})),vr}function Vs(I){return qi.apply(this,arguments)}function qi(){return(qi=(0,N.Z)(function*(I){const D=Ei(I),F=yield(yield iu()).transaction(ui).objectStore(ui).get(D);if(F)return F;{const K=yield Sh(I.appConfig.senderId);if(K)return yield Gt(I,K),K}})).apply(this,arguments)}function Gt(I,D){return su.apply(this,arguments)}function su(){return(su=(0,N.Z)(function*(I,D){const x=Ei(I),K=(yield iu()).transaction(ui,"readwrite");return yield K.objectStore(ui).put(D,x),yield K.done,D})).apply(this,arguments)}function Us(I){return ou.apply(this,arguments)}function ou(){return(ou=(0,N.Z)(function*(I){const D=Ei(I),F=(yield iu()).transaction(ui,"readwrite");yield F.objectStore(ui).delete(D),yield F.done})).apply(this,arguments)}function Ei({appConfig:I}){return I.appId}const bn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bt(I,D){return uu.apply(this,arguments)}function uu(){return(uu=(0,N.Z)(function*(I,D){var x;const F=yield Dc(I),K=Ee(D),ie={method:"POST",headers:F,body:JSON.stringify(K)};let Ie;try{Ie=yield(yield fetch(Gi(I.appConfig),ie)).json()}catch(je){throw bn.create("token-subscribe-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(Ie.error)throw bn.create("token-subscribe-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw bn.create("token-subscribe-no-token");return Ie.token})).apply(this,arguments)}function Oh(I,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,N.Z)(function*(I,D){var x;const F=yield Dc(I),K=Ee(D.subscriptionOptions),ie={method:"PATCH",headers:F,body:JSON.stringify(K)};let Ie;try{Ie=yield(yield fetch(`${Gi(I.appConfig)}/${D.token}`,ie)).json()}catch(je){throw bn.create("token-update-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(Ie.error)throw bn.create("token-update-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw bn.create("token-update-no-token");return Ie.token})).apply(this,arguments)}function lu(I,D){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,N.Z)(function*(I,D){var x;const K={method:"DELETE",headers:yield Dc(I)};try{const Ie=yield(yield fetch(`${Gi(I.appConfig)}/${D}`,K)).json();if(Ie.error)throw bn.create("token-unsubscribe-failed",{errorInfo:Ie.error.message})}catch(ie){throw bn.create("token-unsubscribe-failed",{errorInfo:null===(x=ie)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Gi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Dc(I){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ee({p256dh:I,auth:D,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:D,p256dh:I}};return F!==$i&&(K.web.applicationPubKey=F),K}const Ut=6048e5;function du(I){return hu.apply(this,arguments)}function hu(){return(hu=(0,N.Z)(function*(I){const D=yield Tc(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:ai(D.getKey("auth")),p256dh:ai(D.getKey("p256dh"))},F=yield Vs(I.firebaseDependencies);if(F){if(Yl(F.subscriptionOptions,x))return Date.now()>=F.createTime+Ut?_o(I,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield lu(I.firebaseDependencies,F.token)}catch(K){console.warn(K)}return ha(I.firebaseDependencies,x)}return ha(I.firebaseDependencies,x)})).apply(this,arguments)}function An(I){return fu.apply(this,arguments)}function fu(){return(fu=(0,N.Z)(function*(I){const D=yield Vs(I.firebaseDependencies);D&&(yield lu(I.firebaseDependencies,D.token),yield Us(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function _o(I,D){return ci.apply(this,arguments)}function ci(){return(ci=(0,N.Z)(function*(I,D){try{const x=yield Oh(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Gt(I.firebaseDependencies,F),x}catch(x){throw yield An(I),x}})).apply(this,arguments)}function ha(I,D){return fa.apply(this,arguments)}function fa(){return(fa=(0,N.Z)(function*(I,D){const F={token:yield bt(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Gt(I,F),F.token})).apply(this,arguments)}function Tc(I,D){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,N.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zr(D)})})).apply(this,arguments)}function Yl(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function pa(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Sn(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const F=D.notification.body;F&&(I.notification.body=F);const K=D.notification.image;K&&(I.notification.image=K);const ie=D.notification.icon;ie&&(I.notification.icon=ie)}(D,I),function Oi(I,D){!D.data||(I.data=D.data)}(D,I),function Sc(I,D){var x,F,K,ie,Ie;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const je=null!==(K=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(ie=D.notification)||void 0===ie?void 0:ie.click_action;je&&(I.fcmOptions.link=je);const dt=null===(Ie=D.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;dt&&(I.fcmOptions.analyticsLabel=dt)}(D,I),D}function Bs(I){return"object"==typeof I&&!!I&&ca in I}function zi(I,D){const x=[];for(let F=0;F<I.length;F++)x.push(I.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function ga(I){return bn.create("missing-app-config-values",{valueName:I})}zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Np{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Pp(I){if(!I||!I.options)throw ga("App Configuration Object");if(!I.name)throw ga("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const F of D)if(!x[F])throw ga(F);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function xc(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,N.Z)(function*(I){var D;try{I.swRegistration=yield navigator.serviceWorker.register(Mi,{scope:Hi}),I.swRegistration.update().catch(()=>{})}catch(x){throw bn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function ma(I,D){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,N.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield xc(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw bn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function _a(I,D){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,N.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=$i)})).apply(this,arguments)}function mu(){return(mu=(0,N.Z)(function*(I,D){if(!navigator)throw bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bn.create("permission-blocked");return yield _a(I,D?.vapidKey),yield ma(I,D?.serviceWorkerRegistration),du(I)})).apply(this,arguments)}function Pc(I,D,x){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,N.Z)(function*(I,D,x){const F=Rc(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ca],message_name:x[nu],message_time:x[bc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Rc(I){switch(I){case Zi.NOTIFICATION_CLICKED:return"notification_open";case Zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function js(){return(js=(0,N.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===Zi.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(pa(x)):I.onMessageHandler.next(pa(x)));const F=x.data;Bs(F)&&"1"===F[Ah]&&(yield Pc(I,x.messageType,F))})).apply(this,arguments)}const Hs="@firebase/messaging",Qn=I=>{const D=new Np(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ql(I,D){return js.apply(this,arguments)}(D,x)),D},qr=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function gu(I,D){return mu.apply(this,arguments)}(D,F)}};function Jl(){return kc.apply(this,arguments)}function kc(){return(kc=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pn(){(0,se._registerComponent)(new le.wA("messaging",Qn,"PUBLIC")),(0,se._registerComponent)(new le.wA("messaging-internal",qr,"PRIVATE")),(0,se.registerVersion)(Hs,"0.11.0"),(0,se.registerVersion)(Hs,"0.11.0","esm2017")}();const vo="analytics",td="firebase_id",Zs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wu="https://www.googletagmanager.com/gtag/js",xn=new ue.Yd("@firebase/analytics");function Cu(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function Eu(I,D){const x=document.createElement("script");x.src=`${wu}?l=${I}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Nh(I,D,x,F,K,ie){return wo.apply(this,arguments)}function wo(){return(wo=(0,N.Z)(function*(I,D,x,F,K,ie){const Ie=F[K];try{if(Ie)yield D[Ie];else{const dt=(yield Cu(x)).find(_t=>_t.measurementId===K);dt&&(yield D[dt.appId])}}catch(je){xn.error(je)}I("config",K,ie)})).apply(this,arguments)}function Co(I,D,x,F,K){return qs.apply(this,arguments)}function qs(){return(qs=(0,N.Z)(function*(I,D,x,F,K){try{let ie=[];if(K&&K.send_to){let Ie=K.send_to;Array.isArray(Ie)||(Ie=[Ie]);const je=yield Cu(x);for(const dt of Ie){const _t=je.find(lt=>lt.measurementId===dt),At=_t&&D[_t.appId];if(!At){ie=[];break}ie.push(At)}}0===ie.length&&(ie=Object.values(D)),yield Promise.all(ie),I("event",F,K||{})}catch(ie){xn.error(ie)}})).apply(this,arguments)}function rd(I){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(wu)&&x.src.includes(I))return x;return null}const sr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ca=new class Pi{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function sd(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ea(I){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,N.Z)(function*(I){var D;const{appId:x,apiKey:F}=I,K={method:"GET",headers:sd(F)},ie=Zs.replace("{app-id}",x),Ie=yield fetch(ie,K);if(200!==Ie.status&&304!==Ie.status){let je="";try{const dt=yield Ie.json();null!==(D=dt.error)&&void 0!==D&&D.message&&(je=dt.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:je})}return Ie.json()})).apply(this,arguments)}function Pn(I){return bi.apply(this,arguments)}function bi(){return(bi=(0,N.Z)(function*(I,D=Ca,x){const{appId:F,apiKey:K,measurementId:ie}=I.options;if(!F)throw sr.create("no-app-id");if(!K){if(ie)return{measurementId:ie,appId:F};throw sr.create("no-api-key")}const Ie=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Tu;return setTimeout((0,N.Z)(function*(){je.abort()}),void 0!==x?x:6e4),Iu({appId:F,apiKey:K,measurementId:ie},Ie,je,D)})).apply(this,arguments)}function Iu(I,D,x){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,N.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},F,K=Ca){var ie,Ie;const{appId:je,measurementId:dt}=I;try{yield ba(F,D)}catch(_t){if(dt)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${null===(ie=_t)||void 0===ie?void 0:ie.message}]`),{appId:je,measurementId:dt};throw _t}try{const _t=yield Ea(I);return K.deleteThrottleMetadata(je),_t}catch(_t){const At=_t;if(!Du(At)){if(K.deleteThrottleMetadata(je),dt)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:je,measurementId:dt};throw _t}const lt=503===Number(null===(Ie=At?.customData)||void 0===Ie?void 0:Ie.httpStatus)?(0,re.$s)(x,K.intervalMillis,30):(0,re.$s)(x,K.intervalMillis),vn={throttleEndTimeMillis:Date.now()+lt,backoffCount:x+1};return K.setThrottleMetadata(je,vn),xn.debug(`Calling attemptFetch again in ${lt} millis`),Iu(I,vn,F,K)}})).apply(this,arguments)}function ba(I,D){return new Promise((x,F)=>{const K=Math.max(D-Date.now(),0),ie=setTimeout(x,K);I.addEventListener(()=>{clearTimeout(ie),F(sr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Du(I){if(!(I instanceof re.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Tu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let vs,Da;function ws(){return(ws=(0,N.Z)(function*(I,D,x,F,K){if(K&&K.global)I("event",x,F);else{const ie=yield D;I("event",x,Object.assign(Object.assign({},F),{send_to:ie}))}})).apply(this,arguments)}function Ws(I){Da=I}function Bc(I){vs=I}function Ki(){return Su.apply(this,arguments)}function Su(){return(Su=(0,N.Z)(function*(){var I;if(!(0,re.hl)())return xn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return xn.warn(sr.create("indexeddb-unavailable",{errorInfo:null===(I=D)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(I,D,x,F,K,ie,Ie){var je;const dt=Pn(I);dt.then(ar=>{x[ar.measurementId]=ar.appId,I.options.measurementId&&ar.measurementId!==I.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ar=>xn.error(ar)),D.push(dt);const _t=Ki().then(ar=>{if(ar)return F.getId()}),[At,lt]=yield Promise.all([dt,_t]);rd(ie)||Eu(ie,At.measurementId),Da&&(K("consent","default",Da),Ws(void 0)),K("js",new Date);const vn=null!==(je=Ie?.config)&&void 0!==je?je:{};return vn.origin="firebase",vn.update=!0,null!=lt&&(vn[td]=lt),K("config",At.measurementId,vn),vs&&(K("set",vs),Bc(void 0)),At.measurementId})).apply(this,arguments)}class xu{constructor(D){this.app=D}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},Cs=[];const Do={};let Ao,Ks,To="dataLayer",Ta=!1;function p_(I,D,x){!function Rp(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=sr.create("invalid-analytics-context",{errorInfo:D});xn.warn(x.message)}}();const F=I.options.appId;if(!F)throw sr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw sr.create("no-api-key");xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[F])throw sr.create("already-exists",{id:F});if(!Ta){!function nd(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(To);const{wrappedGtag:ie,gtagCore:Ie}=function ya(I,D,x,F,K){let ie=function(...Ie){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ie=window[K]),window[K]=function bu(I,D,x,F){function ie(){return(ie=(0,N.Z)(function*(Ie,je,dt){try{"event"===Ie?yield Co(I,D,x,je,dt):"config"===Ie?yield Nh(I,D,x,F,je,dt):"consent"===Ie?I("consent","update",dt):I("set",je)}catch(_t){xn.error(_t)}})).apply(this,arguments)}return function K(Ie,je,dt){return ie.apply(this,arguments)}}(ie,I,D,x),{gtagCore:ie,wrappedGtag:window[K]}}(Gr,Cs,Do,To,"gtag");Ks=ie,Ao=Ie,Ta=!0}return Gr[F]=function bo(I,D,x,F,K,ie,Ie){return Io.apply(this,arguments)}(I,Cs,Do,D,Ao,To,x),new xu(I)}function m_(){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const rt="@firebase/analytics";!function cn(){(0,se._registerComponent)(new le.wA(vo,(D,{options:x})=>p_(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new le.wA("analytics-internal",function I(D){try{const x=D.getProvider(vo).getImmediate();return{logEvent:(F,K,ie)=>function Es(I,D,x,F){I=(0,re.m9)(I),function od(I,D,x,F,K){return ws.apply(this,arguments)}(Ks,Gr[I.app.options.appId],D,x,F).catch(K=>xn.error(K))}(x,F,K,ie)}}catch(x){throw sr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(rt,"0.8.4"),(0,se.registerVersion)(rt,"0.8.4","esm2017")}();var Wr=k(4408),Nn=k(7565);const wr=new class Cn extends Nn.v{}(class Yi extends Wr.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):(D.flush(this),0)}});var Ou=k(4986),Aa=k(8505),Pr=k(9468),Hc=k(5363);const Kr=new u.GfV("7.5.0"),Sa="__angularfire_symbol__analyticsIsSupportedValue",bs="__angularfire_symbol__analyticsIsSupported",Pu="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",xo="__angularfire_symbol__messagingIsSupportedValue",Ni="__angularfire_symbol__messagingIsSupported";function Mo(I,D,x){if(D){if(1===D.length)return D[0];const ie=D.filter(Ie=>Ie.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[bs]||(globalThis[bs]=m_().then(I=>globalThis[Sa]=I).catch(()=>globalThis[Sa]=!1)),globalThis[Ni]||(globalThis[Ni]=Jl().then(I=>globalThis[xo]=I).catch(()=>globalThis[xo]=!1)),globalThis[So]||(globalThis[So]=tu().then(I=>globalThis[Pu]=I).catch(()=>globalThis[Pu]=!1));const Ys=(I,D)=>{const x=D?[D]:(0,J.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(I).instances.forEach(Ie=>{F.includes(Ie)||F.push(Ie)})}),F};function xa(){}class Nr{constructor(D,x=wr){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const K=this.zone;return this.delegate.schedule(function(Ie){K.runGuarded(()=>{D.apply(this,[Ie])})},x,F)}}class In{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xa,{},xa,xa)),x.pipe((0,Aa.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Oo=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Nr(Zone.current)),this.insideAngular=x.run(()=>new Nr(Zone.current,Ou.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ii(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Qi(I){return Ii(),function Zc(I){return function(x){return(x=x.lift(new In(I.ngZone))).pipe((0,Pr.R)(I.outsideAngular),(0,Hc.Q)(I.insideAngular))}}(Ii())(I)}},2090:(ot,De,k)=>{k.d(De,{$s:()=>Ye,BH:()=>Vt,G6:()=>Ce,L:()=>de,LL:()=>zt,Pz:()=>Kt,Sg:()=>ze,UG:()=>we,US:()=>le,ZB:()=>j,ZR:()=>_n,aH:()=>at,b$:()=>fe,eu:()=>Be,hl:()=>Ue,jU:()=>Xe,m9:()=>kt,ne:()=>Vn,pd:()=>Ai,r3:()=>vi,ru:()=>ge,tV:()=>he,uI:()=>xe,vZ:()=>We,w1:()=>nt,xO:()=>zn,xb:()=>si,z$:()=>Fe,zI:()=>U,zd:()=>oi});const se=function(H){const L=[];let z=0;for(let ve=0;ve<H.length;ve++){let Y=H.charCodeAt(ve);Y<128?L[z++]=Y:Y<2048?(L[z++]=Y>>6|192,L[z++]=63&Y|128):55296==(64512&Y)&&ve+1<H.length&&56320==(64512&H.charCodeAt(ve+1))?(Y=65536+((1023&Y)<<10)+(1023&H.charCodeAt(++ve)),L[z++]=Y>>18|240,L[z++]=Y>>12&63|128,L[z++]=Y>>6&63|128,L[z++]=63&Y|128):(L[z++]=Y>>12|224,L[z++]=Y>>6&63|128,L[z++]=63&Y|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,L){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Y=0;Y<H.length;Y+=3){const $e=H[Y],ut=Y+1<H.length,Wt=ut?H[Y+1]:0,dn=Y+2<H.length,qt=dn?H[Y+2]:0;let Lt=(15&Wt)<<2|qt>>6,rr=63&qt;dn||(rr=64,ut||(Lt=64)),ve.push(z[$e>>2],z[(3&$e)<<4|Wt>>4],z[Lt],z[rr])}return ve.join("")},encodeString(H,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(H):this.encodeByteArray(se(H),L)},decodeString(H,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(H):function(H){const L=[];let z=0,ve=0;for(;z<H.length;){const Y=H[z++];if(Y<128)L[ve++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const $e=H[z++];L[ve++]=String.fromCharCode((31&Y)<<6|63&$e)}else if(Y>239&&Y<365){const dn=((7&Y)<<18|(63&H[z++])<<12|(63&H[z++])<<6|63&H[z++])-65536;L[ve++]=String.fromCharCode(55296+(dn>>10)),L[ve++]=String.fromCharCode(56320+(1023&dn))}else{const $e=H[z++],ut=H[z++];L[ve++]=String.fromCharCode((15&Y)<<12|(63&$e)<<6|63&ut)}}return L.join("")}(this.decodeStringToByteArray(H,L))},decodeStringToByteArray(H,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Y=0;Y<H.length;){const $e=z[H.charAt(Y++)],Wt=Y<H.length?z[H.charAt(Y)]:0;++Y;const qt=Y<H.length?z[H.charAt(Y)]:64;++Y;const He=Y<H.length?z[H.charAt(Y)]:64;if(++Y,null==$e||null==Wt||null==qt||null==He)throw Error();ve.push($e<<2|Wt>>4),64!==qt&&(ve.push(Wt<<4&240|qt>>2),64!==He&&ve.push(qt<<6&192|He))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},de=function(H){return function(H){const L=se(H);return le.encodeByteArray(L,!0)}(H).replace(/\./g,"")},he=function(H){try{return le.decodeString(H,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function j(H,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!W(z)||(H[z]=j(H[z],L[z]));return H}function W(H){return"__proto__"!==H}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ge(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ce(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){return"object"==typeof indexedDB}function Be(){return new Promise((H,L)=>{try{let z=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ve);Y.onsuccess=()=>{Y.result.close(),z||self.indexedDB.deleteDatabase(ve),H(!0)},Y.onupgradeneeded=()=>{z=!1},Y.onerror=()=>{var $e;L((null===($e=Y.error)||void 0===$e?void 0:$e.message)||"")}}catch(z){L(z)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=H&&he(H[1]);return L&&JSON.parse(L)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},at=()=>{var H;return null===(H=te())||void 0===H?void 0:H.config},Kt=H=>{var L;return null===(L=te())||void 0===L?void 0:L[`_${H}`]};class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,ve)=>{z?this.reject(z):this.resolve(ve),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,ve))}}}function ze(H,L){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=L||"demo-project",Y=H.iat||0,$e=H.sub||H.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Y,exp:Y+3600,auth_time:Y,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},H);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ut)),""].join(".")}class _n extends Error{constructor(L,z,ve){super(z),this.code=L,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,_n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(L,z,ve){this.service=L,this.serviceName=z,this.errors=ve}create(L,...z){const ve=z[0]||{},Y=`${this.service}/${L}`,$e=this.errors[L],ut=$e?function Yt(H,L){return H.replace(Sr,(z,ve)=>{const Y=L[ve];return null!=Y?String(Y):`<${ve}?>`})}($e,ve):"Error";return new _n(Y,`${this.serviceName}: ${ut} (${Y}).`,ve)}}const Sr=/\{\$([^}]+)}/g;function vi(H,L){return Object.prototype.hasOwnProperty.call(H,L)}function si(H){for(const L in H)if(Object.prototype.hasOwnProperty.call(H,L))return!1;return!0}function We(H,L){if(H===L)return!0;const z=Object.keys(H),ve=Object.keys(L);for(const Y of z){if(!ve.includes(Y))return!1;const $e=H[Y],ut=L[Y];if(_r($e)&&_r(ut)){if(!We($e,ut))return!1}else if($e!==ut)return!1}for(const Y of ve)if(!z.includes(Y))return!1;return!0}function _r(H){return null!==H&&"object"==typeof H}function zn(H){const L=[];for(const[z,ve]of Object.entries(H))Array.isArray(ve)?ve.forEach(Y=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(ve));return L.length?"&"+L.join("&"):""}function oi(H){const L={};return H.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Y,$e]=ve.split("=");L[decodeURIComponent(Y)]=decodeURIComponent($e)}}),L}function Ai(H){const L=H.indexOf("?");if(!L)return"";const z=H.indexOf("#",L);return H.substring(L,z>0?z:void 0)}function Vn(H,L){const z=new hn(H,L);return z.subscribe.bind(z)}class hn{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(ve=>{this.error(ve)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,ve){let Y;if(void 0===L&&void 0===z&&void 0===ve)throw new Error("Missing Observer.");Y=function it(H,L){if("object"!=typeof H||null===H)return!1;for(const z of L)if(z in H&&"function"==typeof H[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:ve},void 0===Y.next&&(Y.next=nn),void 0===Y.error&&(Y.error=nn),void 0===Y.complete&&(Y.complete=nn);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),$e}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}function Ye(H,L=1e3,z=2){const ve=L*Math.pow(z,H),Y=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Y)}function kt(H){return H&&H._delegate?H._delegate:H}},8064:(ot,De,k)=>{var u=k(4650);let J=null;function N(){return J}const ue=new u.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function he(){return(0,u.LFG)(j)}()},providedIn:"platform"}),n})();const B=new u.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){W()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){W()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Fe(){return new j((0,u.LFG)(ue))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Ke)},providedIn:"root"}),n})();const fe=new u.OlP("appBaseHref");let Ke=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,c){const d=this.prepareExternalUrl(s+Xe(c));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,c){const d=this.prepareExternalUrl(s+Xe(c));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(de),u.LFG(fe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,c){let d=this.prepareExternalUrl(s+Xe(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,c){let d=this.prepareExternalUrl(s+Xe(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(de),u.LFG(fe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ue(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=xe,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(u.LFG(ge))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ye(){return new Ae((0,u.LFG)(ge))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}const Be={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var U=(()=>((U=U||{})[U.Decimal=0]="Decimal",U[U.Percent=1]="Percent",U[U.Currency=2]="Currency",U[U.Scientific=3]="Scientific",U))(),G=(()=>((G=G||{})[G.Format=0]="Format",G[G.Standalone=1]="Standalone",G))(),Q=(()=>((Q=Q||{})[Q.Narrow=0]="Narrow",Q[Q.Abbreviated=1]="Abbreviated",Q[Q.Wide=2]="Wide",Q[Q.Short=3]="Short",Q))(),ne=(()=>((ne=ne||{})[ne.Short=0]="Short",ne[ne.Medium=1]="Medium",ne[ne.Long=2]="Long",ne[ne.Full=3]="Full",ne))(),te=(()=>((te=te||{})[te.Decimal=0]="Decimal",te[te.Group=1]="Group",te[te.List=2]="List",te[te.PercentSign=3]="PercentSign",te[te.PlusSign=4]="PlusSign",te[te.MinusSign=5]="MinusSign",te[te.Exponential=6]="Exponential",te[te.SuperscriptingExponent=7]="SuperscriptingExponent",te[te.PerMille=8]="PerMille",te[te.Infinity=9]="Infinity",te[te.NaN=10]="NaN",te[te.TimeSeparator=11]="TimeSeparator",te[te.CurrencyDecimal=12]="CurrencyDecimal",te[te.CurrencyGroup=13]="CurrencyGroup",te))();function zt(n,e){return We((0,u.cg1)(n)[u.wAp.DateFormat],e)}function Yt(n,e){return We((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function Sr(n,e){return We((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function Ot(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===te.CurrencyDecimal)return t[u.wAp.NumberSymbols][te.Decimal];if(e===te.CurrencyGroup)return t[u.wAp.NumberSymbols][te.Group]}return r}function vi(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function We(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function _r(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Ai=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,On={},Vn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var hn=(()=>((hn=hn||{})[hn.Short=0]="Short",hn[hn.ShortGMT=1]="ShortGMT",hn[hn.Long=2]="Long",hn[hn.Extended=3]="Extended",hn))(),ht=(()=>((ht=ht||{})[ht.FullYear=0]="FullYear",ht[ht.Month=1]="Month",ht[ht.Date=2]="Date",ht[ht.Hours=3]="Hours",ht[ht.Minutes=4]="Minutes",ht[ht.Seconds=5]="Seconds",ht[ht.FractionalSeconds=6]="FractionalSeconds",ht[ht.Day=7]="Day",ht))(),it=(()=>((it=it||{})[it.DayPeriods=0]="DayPeriods",it[it.Days=1]="Days",it[it.Months=2]="Months",it[it.Eras=3]="Eras",it))();function nn(n,e,t,r){let s=function $e(n){if(Wt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,c=1,d=1]=n.split("-").map(m=>+m);return cr(s,c-1,d)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ai))return function ut(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,c=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return c.call(e,d,m,w,b),e}(r)}const e=new Date(n);if(!Wt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Un(t,e)||e;let m,d=[];for(;e;){if(m=Vn.exec(e),!m){d.push(e);break}{d=d.concat(m.slice(1));const S=d.pop();if(!S)break;e=S}}let w=s.getTimezoneOffset();r&&(w=z(r,w),s=function Y(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function ve(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(z(e,s)-s))}(s,r,!0));let b="";return d.forEach(S=>{const P=function L(n){if(H[n])return H[n];let e;switch(n){case"G":case"GG":case"GGG":e=Xt(it.Eras,Q.Abbreviated);break;case"GGGG":e=Xt(it.Eras,Q.Wide);break;case"GGGGG":e=Xt(it.Eras,Q.Narrow);break;case"y":e=Jt(ht.FullYear,1,0,!1,!0);break;case"yy":e=Jt(ht.FullYear,2,0,!0,!0);break;case"yyy":e=Jt(ht.FullYear,3,0,!1,!0);break;case"yyyy":e=Jt(ht.FullYear,4,0,!1,!0);break;case"Y":e=kt(1);break;case"YY":e=kt(2,!0);break;case"YYY":e=kt(3);break;case"YYYY":e=kt(4);break;case"M":case"L":e=Jt(ht.Month,1,1);break;case"MM":case"LL":e=Jt(ht.Month,2,1);break;case"MMM":e=Xt(it.Months,Q.Abbreviated);break;case"MMMM":e=Xt(it.Months,Q.Wide);break;case"MMMMM":e=Xt(it.Months,Q.Narrow);break;case"LLL":e=Xt(it.Months,Q.Abbreviated,G.Standalone);break;case"LLLL":e=Xt(it.Months,Q.Wide,G.Standalone);break;case"LLLLL":e=Xt(it.Months,Q.Narrow,G.Standalone);break;case"w":e=mt(1);break;case"ww":e=mt(2);break;case"W":e=mt(1,!0);break;case"d":e=Jt(ht.Date,1);break;case"dd":e=Jt(ht.Date,2);break;case"c":case"cc":e=Jt(ht.Day,1);break;case"ccc":e=Xt(it.Days,Q.Abbreviated,G.Standalone);break;case"cccc":e=Xt(it.Days,Q.Wide,G.Standalone);break;case"ccccc":e=Xt(it.Days,Q.Narrow,G.Standalone);break;case"cccccc":e=Xt(it.Days,Q.Short,G.Standalone);break;case"E":case"EE":case"EEE":e=Xt(it.Days,Q.Abbreviated);break;case"EEEE":e=Xt(it.Days,Q.Wide);break;case"EEEEE":e=Xt(it.Days,Q.Narrow);break;case"EEEEEE":e=Xt(it.Days,Q.Short);break;case"a":case"aa":case"aaa":e=Xt(it.DayPeriods,Q.Abbreviated);break;case"aaaa":e=Xt(it.DayPeriods,Q.Wide);break;case"aaaaa":e=Xt(it.DayPeriods,Q.Narrow);break;case"b":case"bb":case"bbb":e=Xt(it.DayPeriods,Q.Abbreviated,G.Standalone,!0);break;case"bbbb":e=Xt(it.DayPeriods,Q.Wide,G.Standalone,!0);break;case"bbbbb":e=Xt(it.DayPeriods,Q.Narrow,G.Standalone,!0);break;case"B":case"BB":case"BBB":e=Xt(it.DayPeriods,Q.Abbreviated,G.Format,!0);break;case"BBBB":e=Xt(it.DayPeriods,Q.Wide,G.Format,!0);break;case"BBBBB":e=Xt(it.DayPeriods,Q.Narrow,G.Format,!0);break;case"h":e=Jt(ht.Hours,1,-12);break;case"hh":e=Jt(ht.Hours,2,-12);break;case"H":e=Jt(ht.Hours,1);break;case"HH":e=Jt(ht.Hours,2);break;case"m":e=Jt(ht.Minutes,1);break;case"mm":e=Jt(ht.Minutes,2);break;case"s":e=Jt(ht.Seconds,1);break;case"ss":e=Jt(ht.Seconds,2);break;case"S":e=Jt(ht.FractionalSeconds,1);break;case"SS":e=Jt(ht.FractionalSeconds,2);break;case"SSS":e=Jt(ht.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Mr(hn.Short);break;case"ZZZZZ":e=Mr(hn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Mr(hn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Mr(hn.Long);break;default:return null}return H[n]=e,e}(S);b+=P?P(s,t,w):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function cr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Un(n,e){const t=function Re(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(On[t]=On[t]||{},On[t][e])return On[t][e];let r="";switch(e){case"shortDate":r=zt(n,ne.Short);break;case"mediumDate":r=zt(n,ne.Medium);break;case"longDate":r=zt(n,ne.Long);break;case"fullDate":r=zt(n,ne.Full);break;case"shortTime":r=Yt(n,ne.Short);break;case"mediumTime":r=Yt(n,ne.Medium);break;case"longTime":r=Yt(n,ne.Long);break;case"fullTime":r=Yt(n,ne.Full);break;case"short":const s=Un(n,"shortTime"),c=Un(n,"shortDate");r=Hr(Sr(n,ne.Short),[s,c]);break;case"medium":const d=Un(n,"mediumTime"),m=Un(n,"mediumDate");r=Hr(Sr(n,ne.Medium),[d,m]);break;case"long":const w=Un(n,"longTime"),b=Un(n,"longDate");r=Hr(Sr(n,ne.Long),[w,b]);break;case"full":const S=Un(n,"fullTime"),P=Un(n,"fullDate");r=Hr(Sr(n,ne.Full),[S,P])}return r&&(On[t][e]=r),r}function Hr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Dt(n,e,t="-",r,s){let c="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,c=t));let d=String(n);for(;d.length<e;)d="0"+d;return r&&(d=d.slice(d.length-e)),c+d}function Jt(n,e,t=0,r=!1,s=!1){return function(c,d){let m=function Si(n,e){switch(n){case ht.FullYear:return e.getFullYear();case ht.Month:return e.getMonth();case ht.Date:return e.getDate();case ht.Hours:return e.getHours();case ht.Minutes:return e.getMinutes();case ht.Seconds:return e.getSeconds();case ht.FractionalSeconds:return e.getMilliseconds();case ht.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,c);if((t>0||m>-t)&&(m+=t),n===ht.Hours)0===m&&-12===t&&(m=12);else if(n===ht.FractionalSeconds)return function ls(n,e){return Dt(n,3).substring(0,e)}(m,e);const w=Ot(d,te.MinusSign);return Dt(m,e,w,r,s)}}function Xt(n,e,t=G.Format,r=!1){return function(s,c){return function Wn(n,e,t,r,s,c){switch(t){case it.Months:return function Vt(n,e,t){const r=(0,u.cg1)(n),c=We([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return We(c,t)}(e,s,r)[n.getMonth()];case it.Days:return function Kt(n,e,t){const r=(0,u.cg1)(n),c=We([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return We(c,t)}(e,s,r)[n.getDay()];case it.DayPeriods:const d=n.getHours(),m=n.getMinutes();if(c){const b=function ii(n){const e=(0,u.cg1)(n);return vi(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?_r(r):[_r(r[0]),_r(r[1])])}(e),S=function si(n,e,t){const r=(0,u.cg1)(n);vi(r);const c=We([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return We(c,t)||[]}(e,s,r),P=b.findIndex(V=>{if(Array.isArray(V)){const[q,ee]=V,Oe=d>=q.hours&&m>=q.minutes,Pe=d<ee.hours||d===ee.hours&&m<ee.minutes;if(q.hours<ee.hours){if(Oe&&Pe)return!0}else if(Oe||Pe)return!0}else if(V.hours===d&&V.minutes===m)return!0;return!1});if(-1!==P)return S[P]}return function at(n,e,t){const r=(0,u.cg1)(n),c=We([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return We(c,t)}(e,s,r)[d<12?0:1];case it.Eras:return function ze(n,e){return We((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,c,n,e,t,r)}}function Mr(n){return function(e,t,r){const s=-1*r,c=Ot(t,te.MinusSign),d=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case hn.Short:return(s>=0?"+":"")+Dt(d,2,c)+Dt(Math.abs(s%60),2,c);case hn.ShortGMT:return"GMT"+(s>=0?"+":"")+Dt(d,1,c);case hn.Long:return"GMT"+(s>=0?"+":"")+Dt(d,2,c)+":"+Dt(Math.abs(s%60),2,c);case hn.Extended:return 0===r?"Z":(s>=0?"+":"")+Dt(d,2,c)+":"+Dt(Math.abs(s%60),2,c);default:throw new Error(`Unknown zone width "${n}"`)}}}function yt(n){return cr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function mt(n,e=!1){return function(t,r){let s;if(e){const c=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,d=t.getDate();s=1+Math.floor((d+c)/7)}else{const c=yt(t),d=function Ye(n){const e=cr(n,0,1).getDay();return cr(n,0,1+(e<=4?4:11)-e)}(c.getFullYear()),m=c.getTime()-d.getTime();s=1+Math.round(m/6048e5)}return Dt(s,n,Ot(r,te.MinusSign))}}function kt(n,e=!1){return function(t,r){return Dt(yt(t).getFullYear(),n,Ot(r,te.MinusSign),e)}}const H={};function z(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Wt(n){return n instanceof Date&&!isNaN(n.valueOf())}const dn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ds(n,e,t,r,s){const d=function wn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],c=r[1],d=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],m=d[0],w=d[1]||"";t.posPre=m.substring(0,m.indexOf("#"));for(let S=0;S<w.length;S++){const P=w.charAt(S);"0"===P?t.minFrac=t.maxFrac=S+1:"#"===P?t.maxFrac=S+1:t.posSuf+=P}const b=m.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,c){const S=s.length-t.posPre.length-t.posSuf.length,P=c.indexOf("#");t.negPre=c.substring(0,P).replace(/'/g,""),t.negSuf=c.slice(P+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function un(n,e){return(0,u.cg1)(n)[u.wAp.NumberFormats][e]}(e,U.Currency),Ot(e,te.MinusSign));return d.minFrac=function oi(n){let e;const t=Be[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),d.maxFrac=d.minFrac,function yn(n,e,t,r,s,c,d=!1){let m="",w=!1;if(isFinite(n)){let b=function Xa(n){let r,s,c,d,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(c=e.search(/e/i))>0?(s<0&&(s=c),s+=+e.slice(c+1),e=e.substring(0,c)):s<0&&(s=e.length),c=0;"0"===e.charAt(c);c++);if(c===(m=e.length))r=[0],s=1;else{for(m--;"0"===e.charAt(m);)m--;for(s-=c,r=[],d=0;c<=m;c++,d++)r[d]=Number(e.charAt(c))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);d&&(b=function Fs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let S=e.minInt,P=e.minFrac,V=e.maxFrac;if(c){const Tt=c.match(dn);if(null===Tt)throw new Error(`${c} is not a valid digit info`);const Nt=Tt[1],Rt=Tt[3],Ft=Tt[5];null!=Nt&&(S=Bn(Nt)),null!=Rt&&(P=Bn(Rt)),null!=Ft?V=Bn(Ft):null!=Rt&&P>V&&(V=P)}!function xi(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const c=Math.min(Math.max(e,s),t);let d=c+n.integerLen,m=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let P=d;P<r.length;P++)r[P]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,d=c+1),r[0]=0;for(let P=1;P<d;P++)r[P]=0}if(m>=5)if(d-1<0){for(let P=0;P>d;P--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;s<Math.max(0,c);s++)r.push(0);let w=0!==c;const b=e+n.integerLen,S=r.reduceRight(function(P,V,q,ee){return ee[q]=(V+=P)<10?V:V-10,w&&(0===ee[q]&&q>=b?ee.pop():w=!1),V>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(b,P,V);let q=b.digits,ee=b.integerLen;const Oe=b.exponent;let Pe=[];for(w=q.every(Tt=>!Tt);ee<S;ee++)q.unshift(0);for(;ee<0;ee++)q.unshift(0);ee>0?Pe=q.splice(ee,q.length):(Pe=q,q=[0]);const st=[];for(q.length>=e.lgSize&&st.unshift(q.splice(-e.lgSize,q.length).join(""));q.length>e.gSize;)st.unshift(q.splice(-e.gSize,q.length).join(""));q.length&&st.unshift(q.join("")),m=st.join(Ot(t,r)),Pe.length&&(m+=Ot(t,s)+Pe.join("")),Oe&&(m+=Ot(t,te.Exponential)+"+"+Oe)}else m=Ot(t,te.Infinity);return m=n<0&&!w?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,d,e,te.CurrencyGroup,te.CurrencyDecimal,s).replace("\xa4",t).replace("\xa4","").trim()}function Bn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function sa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(c)}return null}let Ht=(()=>{class n{constructor(t,r,s,c){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class oa{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dr=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,c,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new oa(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===c?void 0:c);else if(null!==c){const m=r.get(c);r.move(m,d),ps(m,s)}});for(let s=0,c=r.length;s<c;s++){const m=r.get(s).context;m.index=s,m.count=c,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{ps(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ps(n,e){n.context.$implicit=e.item}let fn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new yc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class yc{constructor(){this.$implicit=null,this.ngIf=null}}function ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Yn(n,e){return new u.vHH(2100,!1)}let ua=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Yn();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})();const Op=new u.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ql=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",s,c){if(null==t||""===t||t!=t)return null;try{return nn(t,r,c||this.locale,s??this.defaultTimezone??void 0)}catch(d){throw Yn()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(Op,24))},n.\u0275pipe=u.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Ci=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,s="symbol",c,d){if(!function ca(n){return!(null==n||""===n||n!=n)}(t))return null;d=d||this._locale,"boolean"==typeof s&&(s=s?"symbol":"code");let m=r||this._defaultCurrencyCode;"code"!==s&&(m="symbol"===s||"symbol-narrow"===s?function cs(n,e,t="en"){const r=function jr(n){return(0,u.cg1)(n)[u.wAp.Currencies]}(t)[n]||Be[n]||[],s=r[1];return"narrow"===e&&"string"==typeof s?s:r[0]||n}(m,"symbol"===s?"wide":"narrow",d):s);try{return ds(function nu(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),d,m,r,c)}catch(w){throw Yn()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(u.EJc,16))},n.\u0275pipe=u.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let la=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function hr(n){return"server"===n}let ru=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Mh((0,u.LFG)(ue),window)}),n})();class Mh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const c=s.shadowRoot;if(c){const d=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],s-c[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ui(this.window.history)||ui(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ui(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Vs{}class js extends class Ql extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _u(){return Hs=Hs||document.querySelector("base"),Hs?Hs.getAttribute("href"):null}();return null==t?null:function qr(n){Qn=Qn||document.createElement("a"),Qn.setAttribute("href",n);const e=Qn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sa(document.cookie,e)}}let Qn,Hs=null;const pn=new u.OlP("TRANSITION_ID"),kc=[{provide:u.ip1,useFactory:function Jl(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=N(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<s.length;c++)r.remove(s[c])})}},deps:[pn,ue,u.zs3],multi:!0}];let Fc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const yu=new u.OlP("EventManagerPlugins");let Xl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let c=0;c<s.length;c++){const d=s[c];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yu),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class vu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=N().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let $s=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends $s{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(c=>{const d=this._doc.createElement("style");d.textContent=c,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ed),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ed))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function ed(n){N().remove(n)}const vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},td=/%COMP%/g;function Eu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Eu(n,s,t):(s=s.replace(td,n),t.push(s))}return t}function nd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wo=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Co(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new rd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case u.ifc.ShadowDom:return new id(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Eu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Xl),u.LFG(yo),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Co{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ya(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ya(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const c=vo[s];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=vo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,s&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,nd(r)):this.eventManager.addEventListener(e,t,nd(r))}}function ya(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class rd extends Co{constructor(e,t,r,s){super(e),this.component=r;const c=Eu(s+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function xn(n){return"_ngcontent-%COMP%".replace(td,n)}(s+"-"+r.id),this.hostAttr=function Cu(n){return"_nghost-%COMP%".replace(td,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class id extends Co{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Eu(s.id,s.styles,[]);for(let d=0;d<c.length;d++){const m=document.createElement("style");m.textContent=c[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sr=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const va=["alt","control","meta","shift"],wa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ca=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const c=n.parseEventName(r),d=n.eventCallback(c.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,c.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const c=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),va.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),d+=b+".")}),d+=c,0!=r.length||0===c.length)return null;const w={};return w.domEventName=s,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let s=wa[t.key]||t.key,c="";return r.indexOf("code.")>-1&&(s=t.code,c="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),va.forEach(d=>{d!==s&&(0,Pi[d])(t)&&(c+=d+".")}),c+=s,c===r)}static eventCallback(t,r,s){return c=>{n.matchEventFullKeyCode(c,t)&&s.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Tu=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Iu(){js.makeCurrent()},multi:!0},{provide:ue,useFactory:function ba(){return(0,u.RDi)(document),document},deps:[]}]),vs=new u.OlP(""),od=[{provide:u.rWj,useClass:class Ph{addToWindow(e){u.dqk.getAngularTestability=(r,s=!0)=>{const c=e.findTestabilityInTree(r,s);if(null==c)throw new Error("Could not find testability for element.");return c},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const s=u.dqk.getAllAngularTestabilities();let c=s.length,d=!1;const m=function(w){d=d||w,c--,0==c&&r(d)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],ws=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Gs(){return new u.qLn},deps:[]},{provide:yu,useClass:sr,multi:!0,deps:[ue,u.R0b,u.Lbi]},{provide:yu,useClass:Ca,multi:!0,deps:[ue]},{provide:wo,useClass:wo,deps:[Xl,yo,u.AFp]},{provide:u.FYo,useExisting:wo},{provide:$s,useExisting:yo},{provide:yo,useClass:yo,deps:[ue]},{provide:Xl,useClass:Xl,deps:[yu,u.R0b]},{provide:Vs,useClass:Fc,deps:[]},[]];let Vc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:pn,useExisting:u.AFp},kc]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vs,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...ws,...od],imports:[la,u.hGG]}),n})(),Wi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Eo(){return new Wi((0,u.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Es=k(7669),en=k(8996);function rt(...n){const e=(0,Es.yG)(n);return(0,en.D)(n,e)}var zr=k(9751),cn=k(5577),Wr=k(576);function Yi(n,e){return(0,Wr.m)(e)?(0,cn.z)(n,e,1):(0,cn.z)(n,1)}var Nn=k(4482),Cn=k(5403);function wr(n,e){return(0,Nn.e)((t,r)=>{let s=0;t.subscribe((0,Cn.x)(r,c=>n.call(e,c,s++)&&r.next(c)))})}var pt=k(4004);class Ou{}class Aa{}class Pr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),c=s.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(s,c),this.headers.has(c)?this.headers.get(c).push(d):this.headers.set(c,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Pr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Pr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const c=e.value;if(c){let d=this.headers.get(t);if(!d)return;d=d.filter(m=>-1===c.indexOf(m)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Kr{encodeKey(e){return So(e)}encodeValue(e){return So(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const bs=/%(\d[a-f0-9])/gi,Pu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function So(n){return encodeURIComponent(n).replace(bs,(e,t)=>Pu[t]??e)}function xo(n){return`${n}`}class Ni{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Kr,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Sa(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const c=s.indexOf("="),[d,m]=-1==c?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,c)),e.decodeValue(s.slice(c+1))],w=t.get(d)||[];w.push(m),t.set(d,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(xo):[xo(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ni({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xo(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(xo(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Fp{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function kh(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Mo(n){return typeof Blob<"u"&&n instanceof Blob}function Ys(n){return typeof FormData<"u"&&n instanceof FormData}class Nr{constructor(e,t,r,s){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ud(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,c=s):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new Pr),this.context||(this.context=new Fp),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+d}}else this.params=new Ni,this.urlWithParams=t}serializeBody(){return null===this.body?null:kh(this.body)||Mo(this.body)||Ys(this.body)||function xa(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ni?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ys(this.body)?null:Mo(this.body)?this.body.type||null:kh(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ni?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,b=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((P,V)=>P.set(V,e.setHeaders[V]),w)),e.setParams&&(b=Object.keys(e.setParams).reduce((P,V)=>P.set(V,e.setParams[V]),b)),new Nr(t,r,c,{params:b,headers:w,context:S,reportProgress:m,responseType:s,withCredentials:d})}}var In=(()=>((In=In||{})[In.Sent=0]="Sent",In[In.UploadProgress=1]="UploadProgress",In[In.ResponseHeader=2]="ResponseHeader",In[In.DownloadProgress=3]="DownloadProgress",In[In.Response=4]="Response",In[In.User=5]="User",In))();class Oo{constructor(e,t=200,r="OK"){this.headers=e.headers||new Pr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ii extends Oo{constructor(e={}){super(e),this.type=In.ResponseHeader}clone(e={}){return new Ii({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Po extends Oo{constructor(e={}){super(e),this.type=In.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Po({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ri extends Oo{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function $c(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Qs=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let c;if(t instanceof Nr)c=t;else{let w,b;w=s.headers instanceof Pr?s.headers:new Pr(s.headers),s.params&&(b=s.params instanceof Ni?s.params:new Ni({fromObject:s.params})),c=new Nr(t,r,void 0!==s.body?s.body:null,{headers:w,context:s.context,params:b,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const d=rt(c).pipe(Yi(w=>this.handler.handle(w)));if(t instanceof Nr||"events"===s.observe)return d;const m=d.pipe(wr(w=>w instanceof Po));switch(s.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return m.pipe((0,pt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,pt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,pt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,pt.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ni).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,$c(s,r))}post(t,r,s={}){return this.request("POST",t,$c(s,r))}put(t,r,s={}){return this.request("PUT",t,$c(s,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ou))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Qi{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Zc=new u.OlP("HTTP_INTERCEPTORS");let Rn=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const dt=/^\)\]\}',?\n/;let At=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zr.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((q,ee)=>s.setRequestHeader(q,ee.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&s.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();s.responseType="json"!==q?q:"text"}const c=t.serializeBody();let d=null;const m=()=>{if(null!==d)return d;const q=s.statusText||"OK",ee=new Pr(s.getAllResponseHeaders()),Oe=function _t(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return d=new Ii({headers:ee,status:s.status,statusText:q,url:Oe}),d},w=()=>{let{headers:q,status:ee,statusText:Oe,url:Pe}=m(),st=null;204!==ee&&(st=typeof s.response>"u"?s.responseText:s.response),0===ee&&(ee=st?200:0);let Tt=ee>=200&&ee<300;if("json"===t.responseType&&"string"==typeof st){const Nt=st;st=st.replace(dt,"");try{st=""!==st?JSON.parse(st):null}catch(Rt){st=Nt,Tt&&(Tt=!1,st={error:Rt,text:st})}}Tt?(r.next(new Po({body:st,headers:q,status:ee,statusText:Oe,url:Pe||void 0})),r.complete()):r.error(new Ri({error:st,headers:q,status:ee,statusText:Oe,url:Pe||void 0}))},b=q=>{const{url:ee}=m(),Oe=new Ri({error:q,status:s.status||0,statusText:s.statusText||"Unknown Error",url:ee||void 0});r.error(Oe)};let S=!1;const P=q=>{S||(r.next(m()),S=!0);let ee={type:In.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(ee.total=q.total),"text"===t.responseType&&!!s.responseText&&(ee.partialText=s.responseText),r.next(ee)},V=q=>{let ee={type:In.UploadProgress,loaded:q.loaded};q.lengthComputable&&(ee.total=q.total),r.next(ee)};return s.addEventListener("load",w),s.addEventListener("error",b),s.addEventListener("timeout",b),s.addEventListener("abort",b),t.reportProgress&&(s.addEventListener("progress",P),null!==c&&s.upload&&s.upload.addEventListener("progress",V)),s.send(c),r.next({type:In.Sent}),()=>{s.removeEventListener("error",b),s.removeEventListener("abort",b),s.removeEventListener("load",w),s.removeEventListener("timeout",b),t.reportProgress&&(s.removeEventListener("progress",P),null!==c&&s.upload&&s.upload.removeEventListener("progress",V)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Vs))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const lt=new u.OlP("XSRF_COOKIE_NAME"),vn=new u.OlP("XSRF_HEADER_NAME");class ar{}let No=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sa(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(u.Lbi),u.LFG(lt))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Is=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ar),u.LFG(vn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Js=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Zc,[]);this.chain=r.reduceRight((s,c)=>new Qi(s,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Aa),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),eo=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Is,useClass:Rn}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:lt,useValue:t.cookieName}:[],t.headerName?{provide:vn,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Is,{provide:Zc,useExisting:Is,multi:!0},{provide:ar,useClass:No},{provide:lt,useValue:"XSRF-TOKEN"},{provide:vn,useValue:"X-XSRF-TOKEN"}]}),n})(),Ro=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Qs,{provide:Ou,useClass:Js},At,{provide:Aa,useExisting:At}],imports:[eo.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const{isArray:Vp}=Array,{getPrototypeOf:v_,prototype:w_,keys:Up}=Object;function qc(n){if(1===n.length){const e=n[0];if(Vp(e))return{args:e,keys:null};if(function Gc(n){return n&&"object"==typeof n&&v_(n)===w_}(e)){const t=Up(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var cd=k(8421);const{isArray:Bp}=Array;function Lh(n){return(0,pt.U)(e=>function sw(n,e){return Bp(e)?n(...e):n(e)}(n,e))}function C_(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let jp=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),to=(()=>{class n extends jp{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Ji=new u.OlP("NgValueAccessor"),ow={provide:Ji,useExisting:(0,u.Gpc)(()=>Ru),multi:!0};let Ru=(()=>{class n extends to{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(c){return r.onChange(c.target.checked)})("blur",function(){return r.onTouched()})},features:[u._Bn([ow]),u.qOj]}),n})();const aw={provide:Ji,useExisting:(0,u.Gpc)(()=>Fo),multi:!0},cw=new u.OlP("CompositionEventMode");let Fo=(()=>{class n extends jp{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function uw(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(cw,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[u._Bn([aw]),u.qOj]}),n})();function Lo(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Vh(n){return null!=n&&"number"==typeof n.length}const fr=new u.OlP("NgValidators"),Xi=new u.OlP("NgAsyncValidators"),Hp=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kn{static min(e){return function es(n){return e=>{if(Lo(e.value)||Lo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Uh(n){return e=>{if(Lo(e.value)||Lo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function $p(n){return Lo(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function ld(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Bh(n){return Lo(n.value)||Hp.test(n.value)?null:{email:!0}}(e)}static minLength(e){return zc(e)}static maxLength(e){return jh(e)}static pattern(e){return function Zp(n){if(!n)return dd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Lo(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return Ds(e)}static composeAsync(e){return ku(e)}}function zc(n){return e=>Lo(e.value)||!Vh(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function jh(n){return e=>Vh(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function dd(n){return null}function Hh(n){return null!=n}function qp(n){return(0,u.QGY)(n)?(0,en.D)(n):n}function Gp(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Cr(n,e){return e.map(t=>t(n))}function zp(n){return n.map(e=>function $h(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ds(n){if(!n)return null;const e=n.filter(Hh);return 0==e.length?null:function(t){return Gp(Cr(t,e))}}function pr(n){return null!=n?Ds(zp(n)):null}function ku(n){if(!n)return null;const e=n.filter(Hh);return 0==e.length?null:function(t){return function E_(...n){const e=(0,Es.jO)(n),{args:t,keys:r}=qc(n),s=new zr.y(c=>{const{length:d}=t;if(!d)return void c.complete();const m=new Array(d);let w=d,b=d;for(let S=0;S<d;S++){let P=!1;(0,cd.Xf)(t[S]).subscribe((0,Cn.x)(c,V=>{P||(P=!0,b--),m[S]=V},()=>w--,void 0,()=>{(!w||!P)&&(b||c.next(r?C_(r,m):m),c.complete())}))}});return e?s.pipe(Lh(e)):s}(Cr(t,e).map(qp)).pipe((0,pt.U)(Gp))}}function Fu(n){return null!=n?ku(zp(n)):null}function Wp(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function hd(n){return n._rawValidators}function Zh(n){return n._rawAsyncValidators}function qh(n){return n?Array.isArray(n)?n:[n]:[]}function Oa(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kp(n,e){const t=qh(e);return qh(n).forEach(s=>{Oa(t,s)||t.push(s)}),t}function Gh(n,e){return qh(e).filter(t=>!Oa(n,t))}class fd{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pr(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yr extends fd{get formDirective(){return null}get path(){return null}}class Ts extends fd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pd{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Vo=(()=>{class n extends pd{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ts,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]}),n})(),Di=(()=>{class n extends pd{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Yr,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]}),n})();const Na="VALID",Qc="INVALID",Bo="PENDING",Jc="DISABLED";function md(n){return(el(n)?n.validators:n)||null}function Xc(n){return Array.isArray(n)?pr(n):n||null}function Lu(n,e){return(el(e)?e.asyncValidators:n)||null}function no(n){return Array.isArray(n)?Fu(n):n||null}function el(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function tl(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")}function Xp(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new u.vHH(1002,"")})}class Qr{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Xc(this._rawValidators),this._composedAsyncValidatorFn=no(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Na}get invalid(){return this.status===Qc}get pending(){return this.status==Bo}get disabled(){return this.status===Jc}get enabled(){return this.status!==Jc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Xc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=no(e)}addValidators(e){this.setValidators(Kp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Gh(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Gh(e,this._rawAsyncValidators))}hasValidator(e){return Oa(this._rawValidators,e)}hasAsyncValidator(e){return Oa(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jc,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Na,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Na||this.status===Bo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jc:Na}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bo,this._hasOwnPendingAsyncValidator=!0;const t=qp(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Jc:this.errors?Qc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bo)?Bo:this._anyControlsHaveStatus(Qc)?Qc:Na}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){el(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class ki extends Qr{constructor(e,t,r){super(md(t),Lu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Xp(this,0,e),Object.keys(e).forEach(r=>{tl(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,c)=>{r=t(r,s,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class nl extends ki{}function Vu(n,e){return[...e.path,n]}function Ra(n,e){rl(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Qh(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Jr(n,e)})}(n,e),function _d(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Bu(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Jr(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Yh(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ka(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Uu(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function li(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rl(n,e){const t=hd(n);null!==e.validator?n.setValidators(Wp(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Zh(n);null!==e.asyncValidator?n.setAsyncValidators(Wp(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();li(e._rawValidators,s),li(e._rawAsyncValidators,s)}function Uu(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=hd(n);if(Array.isArray(s)&&s.length>0){const c=s.filter(d=>d!==e.validator);c.length!==s.length&&(t=!0,n.setValidators(c))}}if(null!==e.asyncValidator){const s=Zh(n);if(Array.isArray(s)&&s.length>0){const c=s.filter(d=>d!==e.asyncValidator);c.length!==s.length&&(t=!0,n.setAsyncValidators(c))}}}const r=()=>{};return li(e._rawValidators,r),li(e._rawAsyncValidators,r),t}function Jr(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function v(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function A(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const O=class extends Qr{constructor(e=null,t,r){super(md(t),Lu(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),el(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=A(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){v(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){v(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){A(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Le=(()=>{class n extends Yr{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Vu(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})(),La=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const sg={provide:Ji,useExisting:(0,u.Gpc)(()=>tf),multi:!0};let tf=(()=>{class n extends to{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([sg]),u.qOj]}),n})();const nf={provide:Ji,useExisting:(0,u.Gpc)(()=>il),multi:!0};let rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),P_=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:rf}),n})(),il=(()=>{class n extends to{constructor(t,r,s,c){super(t,r),this._registry=s,this._injector=c,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Ts),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(P_),u.Y36(u.zs3))},n.\u0275dir=u.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[u._Bn([nf]),u.qOj]}),n})();const sl=new u.OlP("NgModelWithFormControlWarning"),gw={provide:Yr,useExisting:(0,u.Gpc)(()=>Hu)};let Hu=(()=>{class n extends Yr{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Uu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ra(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ka(t.control||null,t,!1),function O_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function eg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(ka(r||null,t),(n=>n instanceof O)(s)&&(Ra(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function yd(n,e){rl(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function M_(n,e){return Uu(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rl(this.form,this),this._oldForm&&Uu(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fr,10),u.Y36(Xi,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([gw]),u.qOj,u.TTD]}),n})();const ix={provide:Yr,useExisting:(0,u.Gpc)(()=>mw)};let mw=(()=>{class n extends Le{constructor(t,r,s){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(s)}_checkParentType(){_I(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Yr,13),u.Y36(fr,10),u.Y36(Xi,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[u._Bn([ix]),u.qOj]}),n})();const R_={provide:Yr,useExisting:(0,u.Gpc)(()=>vd)};let vd=(()=>{class n extends Yr{constructor(t,r,s){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Vu(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){_I(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Yr,13),u.Y36(fr,10),u.Y36(Xi,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[u._Bn([R_]),u.qOj]}),n})();function _I(n){return!(n instanceof mw||n instanceof Hu||n instanceof vd)}const sx={provide:Ts,useExisting:(0,u.Gpc)(()=>Va)};let Va=(()=>{class n extends Ts{constructor(t,r,s,c,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function tg(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(c=>{c.constructor===Fo?t=c:function Xh(n){return Object.getPrototypeOf(n.constructor)===to}(c)?r=c:s=c}),s||r||t||null}(0,c)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function io(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Vu(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(Yr,13),u.Y36(fr,10),u.Y36(Xi,10),u.Y36(Ji,10),u.Y36(sl,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([sx]),u.qOj,u.TTD]}),n})();function ww(n){return"number"==typeof n?n:parseInt(n,10)}let $u=(()=>{class n{constructor(){this._validator=dd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):dd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const Iw={provide:fr,useExisting:(0,u.Gpc)(()=>cg),multi:!0};let cg=(()=>{class n extends $u{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>ww(t),this.createValidator=t=>zc(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[u._Bn([Iw]),u.qOj]}),n})();const II={provide:fr,useExisting:(0,u.Gpc)(()=>lg),multi:!0};let lg=(()=>{class n extends $u{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>ww(t),this.createValidator=t=>jh(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[u._Bn([II]),u.qOj]}),n})(),Aw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[rf]}),n})(),Zu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sl,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Aw]}),n})();class U_ extends Qr{constructor(e,t,r){super(md(t),Lu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Xp(this,0,e),e.forEach((r,s)=>{tl(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function xw(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let qu=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let c={};return xw(r)?c=r:null!==r&&(c.validators=r.validator,c.asyncValidators=r.asyncValidator),new ki(s,c)}record(t,r=null){const s=this._reduceControls(t);return new nl(s,r)}control(t,r,s){let c={};return this.useNonNullable?(xw(r)?c=r:(c.validators=r,c.asyncValidators=s),new O(t,{...c,nonNullable:!0})):new O(t,r,s)}array(t,r,s){const c=t.map(d=>this._createControl(d));return new U_(c,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof O||t instanceof Qr?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:Zu}),n})();var oo=k(7579);class Ti extends oo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const af=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ho=k(4671),SI=k(9672);function Mw(...n){const e=(0,Es.yG)(n),t=(0,Es.jO)(n),{args:r,keys:s}=qc(n);if(0===r.length)return(0,en.D)([],e);const c=new zr.y(function xI(n,e,t=Ho.y){return r=>{Ow(e,()=>{const{length:s}=n,c=new Array(s);let d=s,m=s;for(let w=0;w<s;w++)Ow(e,()=>{const b=(0,en.D)(n[w],e);let S=!1;b.subscribe((0,Cn.x)(r,P=>{c[w]=P,S||(S=!0,m--),m||r.next(t(c.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>C_(s,d):Ho.y));return t?c.pipe(Lh(t)):c}function Ow(n,e,t){n?(0,SI.f)(t,n,e):e()}var ol=k(8189);function hg(...n){return function MI(){return(0,ol.J)(1)}()((0,en.D)(n,(0,Es.yG)(n)))}function Pw(n){return new zr.y(e=>{(0,cd.Xf)(n()).subscribe(e)})}var Nw=k(9635);function fg(n,e){const t=(0,Wr.m)(n)?n:()=>n,r=s=>s.error(t());return new zr.y(e?s=>e.schedule(r,0,s):r)}var al=k(515),Ed=k(727);function H_(){return(0,Nn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Cn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,c=t;t=null,s&&(!c||s===c)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ul extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ed.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Cn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ed.w0.EMPTY)}return e}refCount(){return H_()(this)}}function Xn(n,e){return(0,Nn.e)((t,r)=>{let s=null,c=0,d=!1;const m=()=>d&&!s&&r.complete();t.subscribe((0,Cn.x)(r,w=>{s?.unsubscribe();let b=0;const S=c++;(0,cd.Xf)(n(w,S)).subscribe(s=(0,Cn.x)(r,P=>r.next(e?e(w,P,S,b++):P),()=>{s=null,m()}))},()=>{d=!0,m()}))})}function uf(n){return n<=0?()=>al.E:(0,Nn.e)((e,t)=>{let r=0;e.subscribe((0,Cn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function $_(...n){const e=(0,Es.yG)(n);return(0,Nn.e)((t,r)=>{(e?hg(n,t,e):hg(n,t)).subscribe(r)})}function cf(n){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Rw(n=OI){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function OI(){return new af}function Ua(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((s,c)=>n(s,c,r)):Ho.y,uf(1),t?cf(e):Rw(()=>new af))}var Xr=k(8505);function Ba(n){return(0,Nn.e)((e,t)=>{let c,r=null,s=!1;r=e.subscribe((0,Cn.x)(t,void 0,void 0,d=>{c=(0,cd.Xf)(n(d,Ba(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,c.subscribe(t))})}function Z_(n,e,t,r,s){return(c,d)=>{let m=t,w=e,b=0;c.subscribe((0,Cn.x)(d,S=>{const P=b++;w=m?n(w,S,P):(m=!0,S),r&&d.next(w)},s&&(()=>{m&&d.next(w),d.complete()})))}}function cl(n,e){return(0,Nn.e)(Z_(n,e,arguments.length>=2,!0))}function q_(n){return n<=0?()=>al.E:(0,Nn.e)((e,t)=>{let r=[];e.subscribe((0,Cn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function pg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((s,c)=>n(s,c,r)):Ho.y,q_(1),t?cf(e):Rw(()=>new af))}function G_(n){return(0,Nn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const jt="primary",df=Symbol("RouteTitle");class NI{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bd(n){return new NI(n)}function RI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let c=0;c<r.length;c++){const d=r[c],m=n[c];if(d.startsWith(":"))s[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Rr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let c=0;c<t.length;c++)if(s=t[c],!kw(n[s],e[s]))return!1;return!0}function kw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,c)=>r[c]===s)}return n===e}function Fw(n){return Array.prototype.concat.apply([],n)}function kI(n){return n.length>0?n[n.length-1]:null}function kr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ll(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,en.D)(Promise.resolve(n)):rt(n)}const Lw={exact:function Uw(n,e,t){if(!hl(n.segments,e.segments)||!mg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Uw(n.children[r],e.children[r],t))return!1;return!0},subset:Bw},Vw={exact:function FI(n,e){return Rr(n,e)},subset:function ao(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kw(n[t],e[t]))},ignored:()=>!0};function z_(n,e,t){return Lw[t.paths](n.root,e.root,t.matrixParams)&&Vw[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Bw(n,e,t){return W_(n,e,e.segments,t)}function W_(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!hl(s,t)||e.hasChildren()||!mg(s,t,r))}if(n.segments.length===t.length){if(!hl(n.segments,t)||!mg(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Bw(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(hl(n.segments,s)&&mg(n.segments,s,r)&&n.children[jt])&&W_(n.children[jt],e,c,r)}}function mg(n,e,t){return e.every((r,s)=>Vw[t](n[s].parameters,r.parameters))}class dl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bd(this.queryParams)),this._queryParamMap}toString(){return $w.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,kr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ff(this)}}class hf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bd(this.parameters)),this._parameterMap}toString(){return zw(this)}}function hl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Hw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new St},providedIn:"root"}),n})();class St{parse(e){const t=new dx(e);return new dl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Dd(e.root,!0)}`,r=function Ww(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${_g(t)}=${_g(s)}`).join("&"):`${_g(t)}=${_g(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function qw(n){return encodeURI(n)}(e.fragment)}`:""}`}}const $w=new St;function ff(n){return n.segments.map(e=>zw(e)).join("/")}function Dd(n,e){if(!n.hasChildren())return ff(n);if(e){const t=n.children[jt]?Dd(n.children[jt],!1):"",r=[];return kr(n.children,(s,c)=>{c!==jt&&r.push(`${c}:${Dd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function LI(n,e){let t=[];return kr(n.children,(r,s)=>{s===jt&&(t=t.concat(e(r,s)))}),kr(n.children,(r,s)=>{s!==jt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===jt?[Dd(n.children[jt],!1)]:[`${s}:${Dd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${ff(n)}/${t[0]}`:`${ff(n)}/(${t.join("//")})`}}function Zw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _g(n){return Zw(n).replace(/%3B/gi,";")}function K_(n){return Zw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pf(n){return decodeURIComponent(n)}function Gw(n){return pf(n.replace(/\+/g,"%20"))}function zw(n){return`${K_(n.path)}${function lx(n){return Object.keys(n).map(e=>`;${K_(e)}=${K_(n[e])}`).join("")}(n.parameters)}`}const Kw=/^[^\/()?;=#]+/;function $o(n){const e=n.match(Kw);return e?e[0]:""}const VI=/^[^=?&#]+/,Q_=/^[^&#]+/;class dx{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new $t(e,t)),r}parseSegment(){const e=$o(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new hf(pf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=$o(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=$o(this.remaining);s&&(r=s,this.capture(r))}e[pf(t)]=pf(r)}parseQueryParam(e){const t=function Y_(n){const e=n.match(VI);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function UI(n){const e=n.match(Q_);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=Gw(t),c=Gw(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(c)}else e[s]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$o(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new u.vHH(4010,!1);let c;r.indexOf(":")>-1?(c=r.slice(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=jt);const d=this.parseChildren();t[c]=1===Object.keys(d).length?d[jt]:new $t([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function Yw(n){return n.segments.length>0?new $t([],{[jt]:n}):n}function J_(n){const e={};for(const r of Object.keys(n.children)){const c=J_(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function BI(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Gu(n){return n instanceof dl}function Jw(n,e,t,r,s){if(0===t.length)return fl(e.root,e.root,e.root,r,s);const c=function tC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new eC(!0,0,n);let e=0,t=!1;const r=n.reduce((s,c,d)=>{if("object"==typeof c&&null!=c){if(c.outlets){const m={};return kr(c.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(c.segmentPath)return[...s,c.segmentPath]}return"string"!=typeof c?[...s,c]:0===d?(c.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,c]},[]);return new eC(t,e,r)}(t);return c.toRoot()?fl(e.root,e.root,new $t([],{}),r,s):function d(w){const b=function nC(n,e,t,r){if(n.isAbsolute)return new Ad(e.root,!0,0);if(-1===r)return new Ad(t,t===e.root,0);return function rC(n,e,t){let r=n,s=e,c=t;for(;c>s;){if(c-=s,r=r.parent,!r)throw new u.vHH(4005,!1);s=r.segments.length}return new Ad(r,!1,s-c)}(t,r+(zu(n.commands[0])?0:1),n.numberOfDoubleDots)}(c,e,n.snapshot?._urlSegment,w),S=b.processChildren?pl(b.segmentGroup,b.index,c.commands):yg(b.segmentGroup,b.index,c.commands);return fl(e.root,b.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function zu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gf(n){return"object"==typeof n&&null!=n&&n.outlets}function fl(n,e,t,r,s){let d,c={};r&&kr(r,(w,b)=>{c[b]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),d=n===e?t:Xw(n,e,t);const m=Yw(J_(d));return new dl(m,c,s)}function Xw(n,e,t){const r={};return kr(n.children,(s,c)=>{r[c]=s===e?t:Xw(s,e,t)}),new $t(n.segments,r)}class eC{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zu(r[0]))throw new u.vHH(4003,!1);const s=r.find(gf);if(s&&s!==kI(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ad{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yg(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return pl(n,e,t);const r=function fx(n,e,t){let r=0,s=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return c;const d=n.segments[s],m=t[r];if(gf(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!gl(w,b,d))return c;r+=2}else{if(!gl(w,{},d))return c;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new $t(n.segments.slice(0,r.pathIndex),{});return c.children[jt]=new $t(n.segments.slice(r.pathIndex),n.children),pl(c,0,s)}return r.match&&0===s.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?mf(n,e,t):r.match?pl(n,0,s):mf(n,e,t)}function pl(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function iC(n){return gf(n[0])?n[0].outlets:{[jt]:n}}(t),s={};return kr(r,(c,d)=>{"string"==typeof c&&(c=[c]),null!==c&&(s[d]=yg(n.children[d],e,c))}),kr(n.children,(c,d)=>{void 0===r[d]&&(s[d]=c)}),new $t(n.segments,s)}}function mf(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const c=t[s];if(gf(c)){const w=$I(c.outlets);return new $t(r,w)}if(0===s&&zu(t[0])){r.push(new hf(n.segments[e].path,ZI(t[0]))),s++;continue}const d=gf(c)?c.outlets[jt]:`${c}`,m=s<t.length-1?t[s+1]:null;d&&m&&zu(m)?(r.push(new hf(d,ZI(m))),s+=2):(r.push(new hf(d,{})),s++)}return new $t(r,{})}function $I(n){const e={};return kr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=mf(new $t([],{}),0,t))}),e}function ZI(n){const e={};return kr(n,(t,r)=>e[r]=`${t}`),e}function gl(n,e,t){return n==t.path&&Rr(e,t.parameters)}class Zo{constructor(e,t){this.id=e,this.url=t}}class vg extends Zo{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qo extends Zo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fi extends Zo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class X_ extends Zo{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qI extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ey extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ja extends Zo{constructor(e,t,r,s,c){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=c,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ty extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sC extends Zo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ny{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class px{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oC{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gx{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=aC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=aC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=iy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return iy(e,this._root).map(t=>t.value)}}function aC(n,e){if(n===e.value)return e;for(const t of e.children){const r=aC(n,t);if(r)return r}return null}function iy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=iy(n,t);if(r.length)return r.unshift(e),r}return[]}class Ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class uC extends bg{constructor(e,t){super(e),this.snapshot=t,yf(this,e)}toString(){return this.snapshot.toString()}}function sy(n,e){const t=function mx(n,e){const d=new _f([],{},{},"",{},jt,e,null,n.root,-1,{});return new lC("",new Ha(d,[]))}(n,e),r=new Ti([new hf("",{})]),s=new Ti({}),c=new Ti({}),d=new Ti({}),m=new Ti(""),w=new Go(r,s,d,m,c,jt,e,t.root);return w.snapshot=t.root,new uC(new Ha(w,[]),t)}class Go{constructor(e,t,r,s,c,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,pt.U)(b=>b[df]))??rt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>bd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>bd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function GI(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],c=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(c.component)break;r--}}return function cC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _f{constructor(e,t,r,s,c,d,m,w,b,S,P,V){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c,this.outlet=d,this.component=m,this.title=this.data?.[df],this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=S,this._correctedLastPathIndex=V??S,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lC extends bg{constructor(e,t){super(t),this.url=e,yf(this,t)}toString(){return zI(this._root)}}function yf(n,e){e.value._routerState=n,e.children.forEach(t=>yf(n,t))}function zI(n){const e=n.children.length>0?` { ${n.children.map(zI).join(", ")} } `:"";return`${n.value}${e}`}function dC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Rr(e.params,t.params)||n.params.next(t.params),function Id(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Rr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function hC(n,e){const t=Rr(n.params,e.params)&&function jw(n,e){return hl(n,e)&&n.every((t,r)=>Rr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hC(n.parent,e.parent))}function Ig(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function yx(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Ig(n,r,s);return Ig(n,r)})}(n,e,t);return new Ha(r,s)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const d=c.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Ig(n,m)),d}}const r=function vx(n){return new Go(new Ti(n.url),new Ti(n.params),new Ti(n.queryParams),new Ti(n.fragment),new Ti(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(c=>Ig(n,c));return new Ha(r,s)}}const fC="ngNavigationCancelingError";function WI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Gu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=KI(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function KI(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[fC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function $a(n){return Dg(n)&&Gu(n.url)}function Dg(n){return n&&n[fC]}class YI{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new xd,this.attachRef=null}}let xd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new YI,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Md=!1;let Tg=(()=>{class n{constructor(t,r,s,c,d){this.parentContexts=t,this.location=r,this.changeDetector=c,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=s||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,Md);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,Md);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,Md);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,Md);this._activatedRoute=t;const s=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new oy(t,m,s.injector);if(r&&function QI(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(d);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(d,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xd),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class oy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Go?this.route:e===xd?this.childContexts:this.parent.get(e,t)}}let zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[Tg],encapsulation:2}),n})();function ay(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wu(n){const e=n.children&&n.children.map(Wu),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=zo),t}function Li(n){return n.outlet||jt}function vf(n,e){const t=n.filter(r=>Li(r)===e);return t.push(...n.filter(r=>Li(r)!==e)),t}function Pd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ly{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Sd(t);e.children.forEach(c=>{const d=c.value.outlet;this.deactivateRoutes(c,s[d],r),delete s[d]}),kr(s,(c,d)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(s===c)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=Sd(e);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],s);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=Sd(e);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Sd(t);e.children.forEach(c=>{this.activateRoutes(c,s[c.value.outlet],r),this.forwardEvent(new Cg(c.value.snapshot))}),e.children.length&&this.forwardEvent(new gx(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(dC(s),s===c)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),dC(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Pd(s.snapshot),w=m?.get(u._Vd)??null;d.attachRef=null,d.route=s,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Sg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wf{constructor(e,t){this.component=e,this.route=t}}function dy(n,e,t){const r=n._root;return Ef(r,e?e._root:null,t,[r.value])}function Cf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function Ef(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=Sd(e);return n.children.forEach(d=>{(function gC(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&c.routeConfig===d.routeConfig){const w=function eD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!hl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hl(n.url,e.url)||!Rr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hC(n,e)||!Rr(n.queryParams,e.queryParams);default:return!hC(n,e)}}(d,c,c.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new Sg(r)):(c.data=d.data,c._resolvedData=d._resolvedData),Ef(n,e,c.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new wf(m.outlet.component,d))}else d&&Nd(e,m,s),s.canActivateChecks.push(new Sg(r)),Ef(n,null,c.component?m?m.children:null:t,r,s)})(d,c[d.value.outlet],t,r.concat([d.value]),s),delete c[d.value.outlet]}),kr(c,(d,m)=>Nd(d,t.getContext(m),s)),s}function Nd(n,e,t){const r=Sd(n),s=n.value;kr(r,(c,d)=>{Nd(c,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new wf(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Rd(n){return"function"==typeof n}function hy(n){return n instanceof af||"EmptyError"===n?.name}const xg=Symbol("INITIAL_VALUE");function kd(){return Xn(n=>Mw(n.map(e=>e.pipe(uf(1),$_(xg)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===xg)return xg;if(!1===t||t instanceof dl)return t}return!0}),wr(e=>e!==xg),uf(1)))}function Mg(n){return(0,Nw.z)((0,Xr.b)(e=>{if(Gu(e))throw WI(0,e)}),(0,pt.U)(e=>!0===e))}const fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cD(n,e,t,r,s){const c=Og(n,e,t);return c.matched?function uD(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?rt(s.map(d=>{const m=Cf(d,n);return ll(function rD(n){return n&&Rd(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(kd(),Mg()):rt(!0)}(r=ay(e,r),e,t).pipe((0,pt.U)(d=>!0===d?c:{...fy})):rt(c)}function Og(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...fy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||RI)(t,n,e);if(!s)return{...fy};const c={};kr(s.posParams,(m,w)=>{c[w]=m.path});const d=s.consumed.length>0?{...c,...s.consumed[s.consumed.length-1].parameters}:c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function Pg(n,e,t,r,s="corrected"){if(t.length>0&&function py(n,e,t){return t.some(r=>Ng(n,e,r)&&Li(r)!==jt)}(n,t,r)){const d=new $t(e,function dD(n,e,t,r){const s={};s[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&Li(c)!==jt){const d=new $t([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[Li(c)]=d}return s}(n,e,r,new $t(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function hD(n,e,t){return t.some(r=>Ng(n,e,r))}(n,t,r)){const d=new $t(n.segments,function lD(n,e,t,r,s,c){const d={};for(const m of r)if(Ng(n,t,m)&&!s[Li(m)]){const w=new $t([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===c?n.segments.length:e.length,d[Li(m)]=w}return{...s,...d}}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const c=new $t(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function Ng(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function bf(n,e,t,r){return!!(Li(n)===r||r!==jt&&Ng(e,t,n))&&("**"===n.path||Og(e,n,t).matched)}function Rg(n,e,t){return 0===e.length&&!n.children[t]}const ml=!1;class gy{constructor(e){this.segmentGroup=e||null}}class kg{constructor(e){this.urlTree=e}}function Fg(n){return fg(new gy(n))}function my(n){return fg(new kg(n))}class _y{constructor(e,t,r,s,c){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=c,this.allowRedirects=!0}apply(){const e=Pg(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,jt).pipe((0,pt.U)(c=>this.createUrlTree(J_(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ba(c=>{if(c instanceof kg)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof gy?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,jt).pipe((0,pt.U)(s=>this.createUrlTree(J_(s),e.queryParams,e.fragment))).pipe(Ba(s=>{throw s instanceof gy?this.noMatchError(s):s}))}noMatchError(e){return new u.vHH(4002,ml)}createUrlTree(e,t,r){const s=Yw(e);return new dl(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(c=>new $t([],c))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const c of Object.keys(r.children))"primary"===c?s.unshift(c):s.push(c);return(0,en.D)(s).pipe(Yi(c=>{const d=r.children[c],m=vf(t,c);return this.expandSegmentGroup(e,m,d,c).pipe((0,pt.U)(w=>({segment:w,outlet:c})))}),cl((c,d)=>(c[d.outlet]=d.segment,c),{}),pg())}expandSegment(e,t,r,s,c,d){return(0,en.D)(r).pipe(Yi(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,c,d).pipe(Ba(b=>{if(b instanceof gy)return rt(null);throw b}))),Ua(m=>!!m),Ba((m,w)=>{if(hy(m))return Rg(t,s,c)?rt(new $t([],{})):Fg(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,c,d,m){return bf(s,t,c,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,c,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,c,d):Fg(t):Fg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,c,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,c,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?my(c):this.lineralizeSegments(r,c).pipe((0,cn.z)(d=>{const m=new $t(d,{});return this.expandSegment(e,m,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,c,d){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:S}=Og(t,s,c);if(!m)return Fg(t);const P=this.applyRedirectCommands(w,s.redirectTo,S);return s.redirectTo.startsWith("/")?my(P):this.lineralizeSegments(s,P).pipe((0,cn.z)(V=>this.expandSegment(e,t,r,V.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,c){return"**"===r.path?(e=ay(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new $t(s,{})))):rt(new $t(s,{}))):cD(t,r,s,e).pipe(Xn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,s).pipe((0,cn.z)(S=>{const P=S.injector??e,V=S.routes,{segmentGroup:q,slicedSegments:ee}=Pg(t,m,w,V),Oe=new $t(q.segments,q.children);if(0===ee.length&&Oe.hasChildren())return this.expandChildren(P,V,Oe).pipe((0,pt.U)(Nt=>new $t(m,Nt)));if(0===V.length&&0===ee.length)return rt(new $t(m,{}));const Pe=Li(r)===c;return this.expandSegment(P,Oe,V,ee,Pe?jt:c,!0).pipe((0,pt.U)(Tt=>new $t(m.concat(Tt.segments),Tt.children)))})):Fg(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Wo(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?rt(!0):rt(s.map(d=>{const m=Cf(d,n);return ll(function ts(n){return n&&Rd(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(kd(),Mg())}(e,t,r).pipe((0,cn.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Xr.b)(c=>{t._loadedRoutes=c.routes,t._loadedInjector=c.injector})):function IC(n){return fg(KI(ml,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return rt(r);if(s.numberOfChildren>1||!s.children[jt])return fg(new u.vHH(4e3,ml));s=s.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const c=this.createSegmentGroup(e,t.root,r,s);return new dl(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return kr(e,(s,c)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[c]=t[m]}else r[c]=s}),r}createSegmentGroup(e,t,r,s){const c=this.createSegments(e,t.segments,r,s);let d={};return kr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,s)}),new $t(c,d)}createSegments(e,t,r,s){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,s):this.findOrReturn(c,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new u.vHH(4001,ml);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Lg{}class yy{constructor(e,t,r,s,c,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=c,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=Pg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,jt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new _f([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Ha(r,t),c=new lC(this.url,s);return this.inheritParamsAndData(c._root),c}))}inheritParamsAndData(e){const t=e.value,r=GI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,en.D)(Object.keys(r.children)).pipe(Yi(s=>{const c=r.children[s],d=vf(t,s);return this.processSegmentGroup(e,d,c,s)}),cl((s,c)=>s&&c?(s.push(...c),s):null),function lf(n,e=!1){return(0,Nn.e)((t,r)=>{let s=0;t.subscribe((0,Cn.x)(r,c=>{const d=n(c,s++);(d||e)&&r.next(c),!d&&r.complete()}))})}(s=>null!==s),cf(null),pg(),(0,pt.U)(s=>{if(null===s)return null;const c=Fd(s);return function TC(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(c),c}))}processSegment(e,t,r,s,c){return(0,en.D)(t).pipe(Yi(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,s,c)),Ua(d=>!!d),Ba(d=>{if(hy(d))return Rg(r,s,c)?rt([]):rt(null);throw d}))}processSegmentAgainstRoute(e,t,r,s,c){if(t.redirectTo||!bf(t,r,s,c))return rt(null);let d;if("**"===t.path){const m=s.length>0?kI(s).parameters:{},w=AC(r)+s.length;d=rt({snapshot:new _f(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SC(t),Li(t),t.component??t._loadedComponent??null,t,_D(r),w,xC(t),w),consumedSegments:[],remainingSegments:[]})}else d=cD(r,t,s,e).pipe((0,pt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:S})=>{if(!m)return null;const P=AC(r)+w.length;return{snapshot:new _f(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SC(t),Li(t),t.component??t._loadedComponent??null,t,_D(r),P,xC(t),P),consumedSegments:w,remainingSegments:b}}));return d.pipe(Xn(m=>{if(null===m)return rt(null);const{snapshot:w,consumedSegments:b,remainingSegments:S}=m;e=t._injector??e;const P=t._loadedInjector??e,V=function pD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:q,slicedSegments:ee}=Pg(r,b,S,V.filter(Pe=>void 0===Pe.redirectTo),this.relativeLinkResolution);if(0===ee.length&&q.hasChildren())return this.processChildren(P,V,q).pipe((0,pt.U)(Pe=>null===Pe?null:[new Ha(w,Pe)]));if(0===V.length&&0===ee.length)return rt([new Ha(w,[])]);const Oe=Li(t)===c;return this.processSegment(P,V,q,ee,Oe?jt:c).pipe((0,pt.U)(Pe=>null===Pe?null:[new Ha(w,Pe)]))}))}}function gD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Fd(n){const e=[],t=new Set;for(const r of n){if(!gD(r)){e.push(r);continue}const s=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Fd(r.children);e.push(new Ha(r.value,s))}return e.filter(r=>!t.has(r))}function _D(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function AC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function SC(n){return n.data||{}}function xC(n){return n.resolve||{}}function OC(n){return"string"==typeof n.title||null===n.title}function Cy(n){return Xn(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,pt.U)(()=>e)):rt(e)})}let PC=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(c=>c.outlet===jt);return r}getResolvedTitleForRoute(t){return t.data[df]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(NC)},providedIn:"root"}),n})(),NC=(()=>{class n extends PC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Vg{}class Dx extends class yl{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ug=new u.OlP("",{providedIn:"root",factory:()=>({})}),Tf=new u.OlP("ROUTES");let Ey=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ll(t.loadComponent()).pipe((0,Xr.b)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=c}),G_(()=>{this.componentLoaders.delete(t)})),s=new ul(r,()=>new oo.x).pipe(H_());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const c=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,S=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Fw(w.get(Tf,[],u.XFs.Self|u.XFs.Optional)));return{routes:b.map(Wu),injector:w}}),G_(()=>{this.childrenLoaders.delete(r)})),d=new ul(c,()=>new oo.x).pipe(H_());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return ll(t()).pipe((0,cn.z)(r=>r instanceof u.YKP||Array.isArray(r)?rt(r):(0,en.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(u.Sil))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ko{}class Af{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function vl(n){throw n}function Bg(n,e,t){return e.parse("/")}const As={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},by={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function wl(){const n=(0,u.f3M)(Hw),e=(0,u.f3M)(xd),t=(0,u.f3M)(Ae),r=(0,u.f3M)(u.zs3),s=(0,u.f3M)(u.Sil),c=(0,u.f3M)(Tf,{optional:!0})??[],d=(0,u.f3M)(Ug,{optional:!0})??{},m=(0,u.f3M)(NC),w=(0,u.f3M)(PC,{optional:!0}),b=(0,u.f3M)(Ko,{optional:!0}),S=(0,u.f3M)(Vg,{optional:!0}),P=new on(null,n,e,t,r,s,Fw(c));return b&&(P.urlHandlingStrategy=b),S&&(P.routeReuseStrategy=S),P.titleStrategy=w??m,function Ld(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,P),P}let on=(()=>{class n{constructor(t,r,s,c,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=c,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new oo.x,this.errorHandler=vl,this.malformedUriErrorHandler=Bg,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>rt(void 0),this.urlHandlingStrategy=new Af,this.routeReuseStrategy=new Dx,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Ey),this.configLoader.onLoadEndListener=V=>this.triggerEvent(new px(V)),this.configLoader.onLoadStartListener=V=>this.triggerEvent(new ny(V)),this.ngModule=d.get(u.h0i),this.console=d.get(u.c2e);const P=d.get(u.R0b);this.isNgZoneEnabled=P instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function cx(){return new dl(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sy(this.currentUrlTree,this.rootComponentType),this.transitions=new Ti({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(wr(s=>0!==s.id),(0,pt.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xn(s=>{let c=!1,d=!1;return rt(s).pipe((0,Xr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Xn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Cl(m.source)&&(this.browserUrlTree=m.extractedUrl),rt(m).pipe(Xn(P=>{const V=this.transitions.getValue();return r.next(new vg(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),V!==this.transitions.getValue()?al.E:Promise.resolve(P)}),function Za(n,e,t,r){return Xn(s=>function DC(n,e,t,r,s){return new _y(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,pt.U)(c=>({...s,urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xr.b)(P=>{this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects},s.urlAfterRedirects=P.urlAfterRedirects}),function vD(n,e,t,r,s,c){return(0,cn.z)(d=>function fD(n,e,t,r,s,c,d="emptyOnly",m="legacy"){return new yy(n,e,t,r,s,d,m,c).recognize().pipe(Xn(w=>null===w?function If(n){return new zr.y(e=>e.error(n))}(new Lg):rt(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,s,c).pipe((0,pt.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xr.b)(P=>{if(s.targetSnapshot=P.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl(q,P)}this.browserUrlTree=P.urlAfterRedirects}const V=new qI(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next(V)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:q,source:ee,restoredState:Oe,extras:Pe}=m,st=new vg(V,this.serializeUrl(q),ee,Oe);r.next(st);const Tt=sy(q,this.rootComponentType).snapshot;return rt(s={...m,targetSnapshot:Tt,urlAfterRedirects:q,extras:{...Pe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),al.E}),(0,Xr.b)(m=>{const w=new ey(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,pt.U)(m=>s={...m,guards:dy(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function vC(n,e){return(0,cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:c,canDeactivateChecks:d}}=t;return 0===d.length&&0===c.length?rt({...t,guardsResult:!0}):function iD(n,e,t,r){return(0,en.D)(n).pipe((0,cn.z)(s=>function aD(n,e,t,r,s){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?rt(c.map(m=>{const w=Pd(e)??s,b=Cf(m,w);return ll(function bx(n){return n&&Rd(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Ua())})).pipe(kd()):rt(!0)}(s.component,s.route,t,e,r)),Ua(s=>!0!==s,!0))}(d,r,s,n).pipe((0,cn.z)(m=>m&&function tD(n){return"boolean"==typeof n}(m)?function wC(n,e,t,r){return(0,en.D)(e).pipe(Yi(s=>hg(function oD(n,e){return null!==n&&e&&e(new oC(n)),rt(!0)}(s.route.parent,r),function sD(n,e){return null!==n&&e&&e(new wg(n)),rt(!0)}(s.route,r),function EC(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(d=>function XI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Pw(()=>rt(d.guards.map(w=>{const b=Pd(d.node)??t,S=Cf(w,b);return ll(function nD(n){return n&&Rd(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(Ua())})).pipe(kd())));return rt(c).pipe(kd())}(n,s.path,t),function CC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const s=r.map(c=>Pw(()=>{const d=Pd(e)??t,m=Cf(c,d);return ll(function mC(n){return n&&Rd(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(Ua())}));return rt(s).pipe(kd())}(n,s.route,t))),Ua(s=>!0!==s,!0))}(r,c,n,e):rt(m)),(0,pt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Xr.b)(m=>{if(s.guardsResult=m.guardsResult,Gu(m.guardsResult))throw WI(0,m.guardsResult);const w=new ja(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),wr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Cy(m=>{if(m.guards.canActivateChecks.length)return rt(m).pipe((0,Xr.b)(w=>{const b=new ty(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Xn(w=>{let b=!1;return rt(w).pipe(function MC(n,e){return(0,cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return rt(t);let c=0;return(0,en.D)(s).pipe(Yi(d=>function vy(n,e,t,r){const s=n.routeConfig,c=n._resolve;return void 0!==s?.title&&!OC(s)&&(c[df]=s.title),function wD(n,e,t,r){const s=function wy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return rt({});const c={};return(0,en.D)(s).pipe((0,cn.z)(d=>function CD(n,e,t,r){const s=Pd(e)??r,c=Cf(n,s);return ll(c.resolve?c.resolve(e,t):s.runInContext(()=>c(e,t)))}(n[d],e,t,r).pipe(Ua(),(0,Xr.b)(m=>{c[d]=m}))),q_(1),function PI(n){return(0,pt.U)(()=>n)}(c),Ba(d=>hy(d)?al.E:fg(d)))}(c,n,e,r).pipe((0,pt.U)(d=>(n._resolvedData=d,n.data=GI(n,t).resolve,s&&OC(s)&&(n.data[df]=s.title),null)))}(d.route,r,n,e)),(0,Xr.b)(()=>c++),q_(1),(0,cn.z)(d=>c===s.length?rt(t):al.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,Xr.b)(w=>{const b=new sC(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),Cy(m=>{const w=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Xr.b)(P=>{b.component=P}),(0,pt.U)(()=>{})));for(const P of b.children)S.push(...w(P));return S};return Mw(w(m.targetSnapshot.root)).pipe(cf(),uf(1))}),Cy(()=>this.afterPreactivation()),(0,pt.U)(m=>{const w=function _x(n,e,t){const r=Ig(n,e._root,t?t._root:void 0);return new uC(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:w}}),(0,Xr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new ly(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Xr.b)({next(){c=!0},complete(){c=!0}}),G_(()=>{c||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ba(m=>{if(d=!0,Dg(m)){$a(m)||(this.navigated=!0,this.restoreHistory(s,!0));const w=new Fi(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(w),$a(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),S={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cl(s.source)};this.scheduleNavigation(b,"imperative",null,S,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new X_(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(w);try{s.resolve(this.errorHandler(m))}catch(b){s.reject(b)}}return al.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},c=t.state?.navigationId?t.state:null;if(c){const m={...c};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Wu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:c,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,b=s||this.routerState.root,S=w?this.currentUrlTree.fragment:d;let P=null;switch(m){case"merge":P={...this.currentUrlTree.queryParams,...c};break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=c||null}return null!==P&&(P=this.removeEmptyProps(P)),Jw(b,this.currentUrlTree,t,P,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Gu(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Vd(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new u.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...As}:!1===r?{...by}:r,Gu(t))return z_(this.currentUrlTree,t,s);const c=this.parseUrl(t);return z_(this.currentUrlTree,c,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const c=t[s];return null!=c&&(r[s]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new qo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,c,d){if(this.disposed)return Promise.resolve(!1);let m,w,b;d?(m=d.resolve,w=d.reject,b=d.promise):b=new Promise((V,q)=>{m=V,w=q});const S=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),P=s&&s.\u0275routerPageId?s.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):P=0,this.setTransition({id:S,targetPageId:P,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),c={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",c):this.location.go(s,"",c)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const c=new Fi(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(c),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:function(){return wl()},providedIn:"root"}),n})();function Cl(n){return"imperative"!==n}let di=(()=>{class n{constructor(t,r,s,c,d){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=c,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new oo.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(on),u.Y36(Go),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})(),Ku=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new oo.x,this.subscription=t.events.subscribe(c=>{c instanceof qo&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,c,d){return!!(0!==t||r||s||c||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(on),u.Y36(Go),u.Y36(ge))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})(),Vi=(()=>{class n{constructor(t,r,s,c,d,m){this.router=t,this.element=r,this.renderer=s,this.cdr=c,this.link=d,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(w=>{w instanceof qo&&this.update()})}ngAfterContentInit(){rt(this.links.changes,this.linksWithHrefs.changes,rt(null)).pipe((0,ol.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,en.D)(t).pipe((0,ol.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Ud(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(on),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(di,8),u.Y36(Ku,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&(u.Suo(s,di,5),u.Suo(s,Ku,5)),2&t){let c;u.iGM(c=u.CRH())&&(r.links=c),u.iGM(c=u.CRH())&&(r.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[u.TTD]}),n})();class Iy{}let kC=(()=>{class n{constructor(t,r,s,c,d){this.router=t,this.injector=s,this.preloadingStrategy=c,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(wr(t=>t instanceof qo),Yi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const c of r){c.providers&&!c._injector&&(c._injector=(0,u.MMx)(c.providers,t,`Route: ${c.path}`));const d=c._injector??t,m=c._loadedInjector??d;c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent?s.push(this.preloadConfig(d,c)):(c.children||c._loadedRoutes)&&s.push(this.processRoutes(m,c.children??c._loadedRoutes))}return(0,en.D)(s).pipe((0,ol.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const c=s.pipe((0,cn.z)(d=>null===d?rt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,en.D)([c,d]).pipe((0,ol.J)())}return c})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(on),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(Iy),u.LFG(Ey))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jg=new u.OlP("");let Dy=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Eg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Eg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Bd(n,e){return{\u0275kind:n,\u0275providers:e}}function Ay(n){return[{provide:Tf,multi:!0,useValue:n}]}function FC(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(on),s=n.get(LC);1===n.get(xf)&&r.initialNavigation(),n.get(Mf,null,u.XFs.Optional)?.setUpPreloading(),n.get(jg,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const LC=new u.OlP("",{factory:()=>new oo.x}),xf=new u.OlP("",{providedIn:"root",factory:()=>1});const Mf=new u.OlP("");function xy(n){return Bd(0,[{provide:Mf,useExisting:kC},{provide:Iy,useExisting:n}])}const My=new u.OlP("ROUTER_FORROOT_GUARD"),UC=[Ae,{provide:Hw,useClass:St},{provide:on,useFactory:wl},xd,{provide:Go,useFactory:function Ty(n){return n.routerState.root},deps:[on]},Ey];function Oy(){return new u.PXZ("Router",on)}let Py=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[UC,[],Ay(t),{provide:My,useFactory:AD,deps:[[on,new u.FiY,new u.tp0]]},{provide:Ug,useValue:r||{}},r?.useHash?{provide:ge,useClass:nt}:{provide:ge,useClass:Ke},{provide:jg,useFactory:()=>{const n=(0,u.f3M)(on),e=(0,u.f3M)(ru),t=(0,u.f3M)(Ug);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Dy(n,e,t)}},r?.preloadingStrategy?xy(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:Oy},r?.initialNavigation?HC(r):[],[{provide:Ry,useFactory:FC},{provide:u.tb,multi:!0,useExisting:Ry}]]}}static forChild(t){return{ngModule:n,providers:[Ay(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(My,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[zo]}),n})();function AD(n){return"guarded"}function HC(n){return["disabled"===n.initialNavigation?Bd(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(on);return()=>{e.setUpLocationChangeListener()}}},{provide:xf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Bd(2,[{provide:xf,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(c=>{const d=e.get(on),m=e.get(LC);(function s(c){e.get(on).events.pipe(wr(m=>m instanceof qo||m instanceof Fi||m instanceof X_),(0,pt.U)(m=>m instanceof qo||m instanceof Fi&&(0===m.code||1===m.code)&&null),wr(m=>null!==m),uf(1)).subscribe(()=>{c()})})(()=>{c(!0),r=!0}),d.afterPreactivation=()=>(c(!0),r||m.closed?rt(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const Ry=new u.OlP("");var me=k(5861),xD=k(6451),$g=k(5363),ky=k(6063);class Zg extends oo.x{constructor(e=1/0,t=1/0,r=ky.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:c,_windowTime:d}=this;t||(r.push(e),!s&&r.push(c.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,c=s.slice();for(let d=0;d<c.length&&!e.closed;d+=r?1:2)e.next(c[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,c=(s?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!s){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var ZC=k(3099);function Fy(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,ZC.B)({connector:()=>new Zg(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Ly(n,e){return(0,Wr.m)(e)?Xn(()=>n,e):Xn(()=>n)}var qg=k(9468),Fr=k(5813),Ss=k(2011);k(5867);var Yu=k(9681),zg=k(4859),rn=k(2090),El=k(1877);const Wg=new Map,Kg={activated:!1,tokenObservers:[]},Yo={initialized:!1,enabled:!1};function ei(n){return Wg.get(n)||Object.assign({},Kg)}function ns(){return Yo}class LD{constructor(e,t,r,s,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=s,s>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new rn.BH,yield function VD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const br=new rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function By(n){if(!ei(n).activated)throw br.create("use-before-activation",{appName:n.name})}function Qg(n,e){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,me.Z)(function*({url:n,body:e},t){var r,s;const c={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const q=yield d.getHeartbeatsHeader();q&&(c["X-Firebase-Client"]=q)}const m={method:"POST",body:JSON.stringify(e),headers:c};let w,b;try{w=yield fetch(n,m)}catch(q){throw br.create("fetch-network-error",{originalErrorMessage:null===(r=q)||void 0===r?void 0:r.message})}if(200!==w.status)throw br.create("fetch-status-error",{httpStatus:w.status});try{b=yield w.json()}catch(q){throw br.create("fetch-parse-error",{originalErrorMessage:null===(s=q)||void 0===s?void 0:s.message})}const S=b.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const P=1e3*Number(S[1]),V=Date.now();return{token:b.token,expireTimeMillis:V+P,issuedAtTimeMillis:V}})).apply(this,arguments)}function YC(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const $d="firebase-app-check-store";let Rf=null;function Zy(){return Rf||(Rf=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var c;e(br.create("storage-open",{originalErrorMessage:null===(c=s.target.error)||void 0===c?void 0:c.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore($d,{keyPath:"compositeKey"})}}catch(r){e(br.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Rf)}function qy(){return(qy=(0,me.Z)(function*(n,e){const r=(yield Zy()).transaction($d,"readwrite"),c=r.objectStore($d).put({compositeKey:n,value:e});return new Promise((d,m)=>{c.onsuccess=w=>{d()},r.onerror=w=>{var b;m(br.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const kf=new El.Yd("@firebase/app-check");function Wy(n,e){return(0,rn.hl)()?function JC(n,e){return function tE(n,e){return qy.apply(this,arguments)}(function rE(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function iE(){return ns().enabled}function sE(){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,me.Z)(function*(){const n=ns();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $D={error:"UNKNOWN_ERROR"};function ZD(n){return rn.US.encodeString(JSON.stringify(n),!1)}function Xg(n){return em.apply(this,arguments)}function em(){return(em=(0,me.Z)(function*(n,e=!1){const t=n.app;By(t);const r=ei(t);let c,s=r.token;if(s&&!bl(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(bl(w)?s=w:yield Wy(t,void 0))}if(!e&&s&&bl(s))return{token:s.token};let m,d=!1;if(iE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Qg(YC(t,yield sE()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield Wy(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),s=yield ei(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?kf.warn(w.message):kf.error(w),c=w}return s?c?m=bl(s)?{token:s.token,internalError:c}:Xy(c):(m={token:s.token},r.token=s,yield Wy(t,s)):m=Xy(c),d&&Jy(t,m),m})).apply(this,arguments)}function nm(n,e){const t=ei(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Qy(n){const{app:e}=n,t=ei(e);let r=t.tokenRefresher;r||(r=function oE(n){const{app:e}=n;return new LD((0,me.Z)(function*(){let r;if(r=ei(e).token?yield Xg(n,!0):yield Xg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Jy(n,e){const t=ei(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function bl(n){return n.expireTimeMillis-Date.now()>0}function Xy(n){return{token:ZD($D),error:n}}class aE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ei(this.app);for(const t of e)nm(this.app,t.next);return Promise.resolve()}}const sv="app-check-internal";!function pE(){(0,Yu._registerComponent)(new zg.wA("app-check",n=>function uE(n,e){return new aE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sv).initialize()})),(0,Yu._registerComponent)(new zg.wA(sv,n=>function cE(n){return{getToken:e=>Xg(n,e),addTokenListener:e=>function tm(n,e,t,r){const{app:s}=n,c=ei(s);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:r,type:e}],c.token&&bl(c.token)){const m=c.token;Promise.resolve().then(()=>{t({token:m.token}),Qy(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Qy(n))}(n,"INTERNAL",e),removeTokenListener:e=>nm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Yu.registerVersion)("@firebase/app-check","0.5.17")}();class av{constructor(){return(0,Fr.vb)("app-check")}}typeof window<"u"&&window;var yE=k(127);const wE=new u.OlP("angularfire2.auth.use-emulator"),lv=new u.OlP("angularfire2.auth.settings"),CE=new u.OlP("angularfire2.auth.tenant-id"),EE=new u.OlP("angularfire2.auth.langugage-code"),tT=new u.OlP("angularfire2.auth.use-device-language"),nT=new u.OlP("angularfire.auth.persistence"),rT=(n,e,t,r,s,c,d,m)=>(0,Ss.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,c&&w.useDeviceLanguage(),d)for(const[b,S]of Object.entries(d))w.settings[b]=S;return m&&w.setPersistence(m),w},[t,r,s,c,d,m]);let bE=(()=>{class n{constructor(t,r,s,c,d,m,w,b,S,P,V,q){const ee=new oo.x,Oe=rt(void 0).pipe((0,$g.Q)(d.outsideAngular),Xn(()=>c.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,1277)))),(0,pt.U)(()=>(0,Ss.on)(t,c,r)),(0,pt.U)(Pe=>rT(Pe,c,m,b,S,P,w,V)),Fy({bufferSize:1,refCount:!1}));if(hr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{Oe.pipe(Ua()).subscribe();const st=Oe.pipe(Xn(Rt=>Rt.getRedirectResult().then(Ft=>Ft,()=>null)),Fr.iC,Fy({bufferSize:1,refCount:!1})),Tt=Oe.pipe(Xn(Rt=>new zr.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>Rt.onAuthStateChanged(Zt=>Ft.next(Zt),Zt=>Ft.error(Zt),()=>Ft.complete()))})))),Nt=Oe.pipe(Xn(Rt=>new zr.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>Rt.onIdTokenChanged(Zt=>Ft.next(Zt),Zt=>Ft.error(Zt),()=>Ft.complete()))}))));this.authState=st.pipe(Ly(Tt),(0,qg.R)(d.outsideAngular),(0,$g.Q)(d.insideAngular)),this.user=st.pipe(Ly(Nt),(0,qg.R)(d.outsideAngular),(0,$g.Q)(d.insideAngular)),this.idToken=this.user.pipe(Xn(Rt=>Rt?(0,en.D)(Rt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Xn(Rt=>Rt?(0,en.D)(Rt.getIdTokenResult()):rt(null))),this.credential=(0,xD.T)(st,ee,this.authState.pipe(wr(Rt=>!Rt))).pipe((0,pt.U)(Rt=>Rt?.user?Rt:null),(0,qg.R)(d.outsideAngular),(0,$g.Q)(d.insideAngular))}return(0,Ss.pX)(this,Oe,c,{spy:{apply:(Pe,st,Tt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&Tt.then(Nt=>ee.next(Nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ss.Dh),u.LFG(Ss.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Fr.HU),u.LFG(wE,8),u.LFG(lv,8),u.LFG(CE,8),u.LFG(EE,8),u.LFG(tT,8),u.LFG(nT,8),u.LFG(av,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var sm=k(4986);function dv(){return(0,Nn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Cn.x)(e,s=>{const c=t;t=s,r&&e.next([c,s]),r=!0}))})}function IE(n,e){return n===e}k(1277);var ct,oT=k(3942),aT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qa={},hv=hv||{},xt=aT||self;function am(){}function um(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ga(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cm="closure_uid_"+(1e9*Math.random()>>>0),cT=0;function DE(n,e,t){return n.call.apply(n.bind,arguments)}function lT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function ti(n,e,t){return(ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?DE:lT).apply(null,arguments)}function lm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ir(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,c){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[s].apply(r,d)}}function Qu(){this.s=this.s,this.o=this.o}Qu.prototype.s=!1,Qu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function uT(n){Object.prototype.hasOwnProperty.call(n,cm)&&n[cm]||(n[cm]=++cT)}(this)},Qu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function pv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(um(r)){const s=n.length||0,c=r.length||0;n.length=s+c;for(let d=0;d<c;d++)n[s+d]=r[d]}else n.push(r)}}function hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hi.prototype.h=function(){this.defaultPrevented=!0};var gv=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",am,e),xt.removeEventListener("test",am,e)}catch{}return n}();function dm(n){return/^[\s\xa0]*$/.test(n)}var mv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _v(n,e){return n<e?-1:n>e?1:0}function hm(){var n=xt.navigator;return n&&(n=n.userAgent)?n:""}function Qo(n){return-1!=hm().indexOf(n)}function yv(n){return yv[" "](n),n}yv[" "]=am;var Uf,n,hT=Qo("Opera"),qd=Qo("Trident")||Qo("MSIE"),SE=Qo("Edge"),fm=SE||qd,vv=Qo("Gecko")&&!(-1!=hm().toLowerCase().indexOf("webkit")&&!Qo("Edge"))&&!(Qo("Trident")||Qo("MSIE"))&&!Qo("Edge"),fT=-1!=hm().toLowerCase().indexOf("webkit")&&!Qo("Edge");function xE(){var n=xt.document;return n?n.documentMode:void 0}e:{var wv="",Cv=(n=hm(),vv?/rv:([^\);]+)(\)|;)/.exec(n):SE?/Edge\/([\d\.]+)/.exec(n):qd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):fT?/WebKit\/(\S+)/.exec(n):hT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Cv&&(wv=Cv?Cv[1]:""),qd){var Ev=xE();if(null!=Ev&&Ev>parseFloat(wv)){Uf=String(Ev);break e}}Uf=wv}var bv={};var pT=xt.document&&qd&&(xE()||parseInt(Uf,10))||void 0;function Bf(n,e){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(vv){e:{try{yv(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Dv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bf.X.h.call(this)}}Ir(Bf,hi);var Dv={2:"touch",3:"pen",4:"mouse"};Bf.prototype.h=function(){Bf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var jf="closure_listenable_"+(1e6*Math.random()|0),ME=0;function Gd(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++ME,this.ba=this.ea=!1}function Hf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Tv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gT(n){const e={};for(const t in n)e[t]=n[t];return e}const Av="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mm(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let c=0;c<Av.length;c++)t=Av[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _m(n){this.src=n,this.g={},this.h=0}function $f(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],s=fv(r,e);(c=0<=s)&&Array.prototype.splice.call(r,s,1),c&&(Hf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Sv(n,e,t,r){for(var s=0;s<n.length;++s){var c=n[s];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==r)return s}return-1}_m.prototype.add=function(n,e,t,r,s){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var d=Sv(n,e,r,s);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new Gd(e,this.src,c,!!r,s)).ea=t,n.push(e)),e};var ym="closure_lm_"+(1e6*Math.random()|0),Zf={};function xv(n,e,t,r,s){if(r&&r.once)return Ov(n,e,t,r,s);if(Array.isArray(e)){for(var c=0;c<e.length;c++)xv(n,e[c],t,r,s);return null}return t=wm(t),n&&n[jf]?n.N(e,t,Ga(r)?!!r.capture:!!r,s):Mv(n,e,t,!1,r,s)}function Mv(n,e,t,r,s,c){if(!e)throw Error("Invalid event type");var d=Ga(s)?!!s.capture:!!s,m=vm(n);if(m||(n[ym]=m=new _m(n)),(t=m.add(e,t,r,d,c)).proxy)return t;if(r=function OE(){const e=mT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)gv||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(NE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ov(n,e,t,r,s){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Ov(n,e[c],t,r,s);return null}return t=wm(t),n&&n[jf]?n.O(e,t,Ga(r)?!!r.capture:!!r,s):Mv(n,e,t,!0,r,s)}function PE(n,e,t,r,s){if(Array.isArray(e))for(var c=0;c<e.length;c++)PE(n,e[c],t,r,s);else r=Ga(r)?!!r.capture:!!r,t=wm(t),n&&n[jf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Sv(c=n.g[e],t,r,s))&&(Hf(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=vm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Sv(e,t,r,s)),(t=-1<n?e[n]:null)&&Pv(t))}function Pv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[jf])$f(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(NE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=vm(e))?($f(t,n),0==t.h&&(t.src=null,e[ym]=null)):Hf(n)}}}function NE(n){return n in Zf?Zf[n]:Zf[n]="on"+n}function mT(n,e){if(n.ba)n=!0;else{e=new Bf(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Pv(n),n=t.call(r,e)}return n}function vm(n){return(n=n[ym])instanceof _m?n:null}var RE="__closure_events_fn_"+(1e9*Math.random()>>>0);function wm(n){return"function"==typeof n?n:(n[RE]||(n[RE]=function(e){return n.handleEvent(e)}),n[RE])}function Vr(){Qu.call(this),this.i=new _m(this),this.P=this,this.I=null}function ni(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new hi(e,n);else if(e instanceof hi)e.target=e.target||n;else{var s=e;mm(e=new hi(r,n),s)}if(s=!0,t)for(var c=t.length-1;0<=c;c--){var d=e.g=t[c];s=Nv(d,r,!0,e)&&s}if(s=Nv(d=e.g=n,r,!0,e)&&s,s=Nv(d,r,!1,e)&&s,t)for(c=0;c<t.length;c++)s=Nv(d=e.g=t[c],r,!1,e)&&s}function Nv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,c=0;c<e.length;++c){var d=e[c];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&$f(n.i,d),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Ir(Vr,Qu),Vr.prototype[jf]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){PE(this,n,e,t,r)},Vr.prototype.M=function(){if(Vr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hf(t[r]);delete n.g[e],n.h--}}this.I=null},Vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var kE=xt.JSON.stringify;function _T(){var n=UE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kv,FE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new LE,n=>n.reset());class LE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function VE(n){xt.setTimeout(()=>{throw n},0)}function Rv(n,e){kv||function vT(){var n=xt.Promise.resolve(void 0);kv=function(){n.then(wT)}}(),Fv||(kv(),Fv=!0),UE.add(n,e)}var Fv=!1,UE=new class yT{constructor(){this.h=this.g=null}add(e,t){const r=FE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function wT(){for(var n;n=_T();){try{n.h.call(n.g)}catch(t){VE(t)}var e=FE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Fv=!1}function Cm(n,e){Vr.call(this),this.h=n||1,this.g=e||xt,this.j=ti(this.lb,this),this.l=Date.now()}function Tl(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Em(n,e,t){if("function"==typeof n)t&&(n=ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function Lv(n){n.g=Em(()=>{n.g=null,n.i&&(n.i=!1,Lv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ir(Cm,Vr),(ct=Cm.prototype).ca=!1,ct.R=null,ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ni(this,"tick"),this.ca&&(Tl(this),this.start()))}},ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){Cm.X.M.call(this),Tl(this),delete this.g};class BE extends Qu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lv(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zd(n){Qu.call(this),this.h=n,this.g={}}Ir(zd,Qu);var Vv=[];function Uv(n,e,t,r){Array.isArray(t)||(t&&(Vv[0]=t.toString()),t=Vv);for(var s=0;s<t.length;s++){var c=xv(e,t[s],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function jE(n){Tv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Pv(e)},n),n.g={}}function Bv(){this.g=!0}function Wd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ET(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var c=s[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var d=1;d<s.length;d++)s[d]=""}}}return kE(t)}catch{return e}}(n,t)+(r?" "+r:"")})}zd.prototype.M=function(){zd.X.M.call(this),jE(this)},zd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bv.prototype.Aa=function(){this.g=!1},Bv.prototype.info=function(){};var co={},ZE=null;function Kd(){return ZE=ZE||new Vr}function lo(n){hi.call(this,co.Pa,n)}function qf(n){const e=Kd();ni(e,new lo(e))}function bm(n,e){hi.call(this,co.STAT_EVENT,n),this.stat=e}function Dr(n){const e=Kd();ni(e,new bm(e,n))}function qE(n,e){hi.call(this,co.Qa,n),this.size=e}function Gf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}co.Pa="serverreachability",Ir(lo,hi),co.STAT_EVENT="statevent",Ir(bm,hi),co.Qa="timingevent",Ir(qE,hi);var Im={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},zf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Yd(){}function zE(){}Yd.prototype.h=null;var Tm,Qd={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Dm(){hi.call(this,"d")}function Wf(){hi.call(this,"c")}function Am(){}function Kf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new zd(this),this.O=jv,this.T=new Cm(n=fm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new bT}function bT(){this.i=null,this.g="",this.h=!1}Ir(Dm,hi),Ir(Wf,hi),Ir(Am,Yd),Am.prototype.g=function(){return new XMLHttpRequest},Am.prototype.i=function(){return{}},Tm=new Am;var jv=45e3,Yf={},Qf={};function Jf(n,e,t){n.K=1,n.v=qv(za(e)),n.s=t,n.P=!0,Sm(n,null)}function Sm(n,e){n.F=Date.now(),Xf(n),n.A=za(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),zv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new bT,n.g=ip(n.l,t?e:null,!n.s),0<n.N&&(n.L=new BE(ti(n.La,n,n.g),n.N)),Uv(n.S,n.g,"readystatechange",n.ib),e=n.H?gT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),qf(),function HE(n,e,t,r,s,c){n.info(function(){if(n.g)if(c)for(var d="",m=c.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var S=b[0];b=b[1];var P=S.split("_");d=2<=P.length&&"type"==P[1]?d+(S+"=")+b+"&":d+(S+"=redacted&")}}else d=null;else d=c;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function WE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function KE(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=IT(n,t),s==Qf){4==e&&(n.o=4,Dr(14),r=!1),Wd(n.j,n.m,null,"[Incomplete Response]");break}if(s==Yf){n.o=4,Dr(15),Wd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wd(n.j,n.m,s,null),xm(n,s)}WE(n)&&s!=Qf&&s!=Yf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Dr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),rp(e),e.K=!0,Dr(11))):(Wd(n.j,n.m,t,"[Invalid Chunked Response]"),Al(n),Xd(n))}function IT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Qf:(t=Number(e.substring(t,r)),isNaN(t)?Yf:(r+=1)+t>e.length?Qf:(e=e.substr(r,t),n.C=r+t,e))}function Xf(n){n.V=Date.now()+n.O,Hv(n,n.O)}function Hv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gf(ti(n.gb,n),e)}function Jd(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Xd(n){0==n.l.G||n.I||a0(n.l,n)}function Al(n){Jd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Tl(n.T),jE(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ec(t.h,n)))if(!n.J&&ec(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Vm(t),t0(t)}lb(t),Dr(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Gf(ti(t.cb,t),6e3));if(1>=Kv(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ih(t,11)}else if((n.J||t.g==n)&&Vm(t),!dm(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const P=b[4];null!=P&&(t.Ca=P,t.j.info("SVER="+t.Ca));const V=b[5];null!=V&&"number"==typeof V&&0<V&&(t.J=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ee=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var c=r.h;c.g||-1==ee.indexOf("spdy")&&-1==ee.indexOf("quic")&&-1==ee.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Yv(c,c.h),c.h=null))}if(r.D){const Oe=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.za=Oe,Fn(r.F,r.D,Oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=hb(r,r.H?r.ka:null,r.V),d.J){Qv(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(Jd(m),Xf(m)),r.g=d}else s0(r);0<t.i.length&&xl(t)}else"stop"!=b[0]&&"close"!=b[0]||ih(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?ih(t,7):cb(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}qf()}catch{}}function $v(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(um(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function DT(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(um(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function YE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(um(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,c=0;c<s;c++)e.call(void 0,r[c],t&&t[c],n)}(ct=Kf.prototype).setTimeout=function(n){this.O=n},ct.ib=function(n){n=n.target;const e=this.L;e&&3==Jo(n)?e.l():this.La(n)},ct.La=function(n){try{if(n==this.g)e:{const S=Jo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||fm||this.g&&(this.h.h||this.g.fa()||kT(this.g)))){this.I||4!=S||7==e||qf(),Jd(this);var t=this.g.aa();this.Y=t;t:if(WE(this)){var r=kT(this.g);n="";var s=r.length,c=4==Jo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Al(this),Xd(this);var d="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function $E(n,e,t,r,s,c,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+c+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dm(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Dr(12),Al(this),Xd(this);break e}Wd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xm(this,t)}this.P?(KE(this,S,d),fm&&this.i&&3==S&&(Uv(this.S,this.T,"tick",this.hb),this.T.start())):(Wd(this.j,this.m,d,null),xm(this,d)),4==S&&Al(this),this.i&&!this.I&&(4==S?a0(this.l,this):(this.i=!1,Xf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Dr(12)):(this.o=0,Dr(13)),Al(this),Xd(this)}}}catch{}},ct.hb=function(){if(this.g){var n=Jo(this.g),e=this.g.fa();this.C<e.length&&(Jd(this),KE(this,n,e),this.i&&4!=n&&Xf(this))}},ct.cancel=function(){this.I=!0,Al(this)},ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function CT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qf(),Dr(17)),Al(this),this.o=2,Xd(this)):Hv(this,this.V-n)};var Zv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ju(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ju){this.h=void 0!==e?e:n.h,Ur(this,n.j),this.s=n.s,this.g=n.g,Wa(this,n.m),this.l=n.l,e=n.i;var t=new ep;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),QE(this,t),this.o=n.o}else n&&(t=String(n).match(Zv))?(this.h=!!e,Ur(this,t[1]||"",!0),this.s=Mm(t[2]||""),this.g=Mm(t[3]||"",!0),Wa(this,t[4]),this.l=Mm(t[5]||"",!0),QE(this,t[6]||"",!0),this.o=Mm(t[7]||"")):(this.h=!!e,this.i=new ep(null,this.h))}function za(n){return new Ju(n)}function Ur(n,e,t){n.j=t?Mm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wa(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function QE(n,e,t){e instanceof ep?(n.i=e,function Pm(n,e){e&&!n.j&&(Xu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(eb(this,r),zv(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=eh(e,ST)),n.i=new ep(e,n.h))}function Fn(n,e,t){n.i.set(e,t)}function qv(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Mm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function eh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,JE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function JE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ju.prototype.toString=function(){var n=[],e=this.j;e&&n.push(eh(e,th,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(eh(e,th,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(eh(t,"/"==t.charAt(0)?Gv:AT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",eh(t,XE)),n.join("")};var th=/[#\/\?@]/g,AT=/[#\?:]/g,Gv=/[#\?]/g,ST=/[#\?@]/g,XE=/#/g;function ep(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xu(n){n.g||(n.g=new Map,n.h=0,n.i&&function TT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var c=n[t].substring(0,r);s=n[t].substring(r+1)}else c=n[t];e(c,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function eb(n,e){Xu(n),e=Sl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Om(n,e){return Xu(n),e=Sl(n,e),n.g.has(e)}function zv(n,e,t){eb(n,e),0<t.length&&(n.i=null,n.g.set(Sl(n,e),pv(t)),n.h+=t.length)}function Sl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xT(n){this.l=n||tb,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ga&&xt.g.Ga()&&xt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=ep.prototype).add=function(n,e){Xu(this),this.i=null,n=Sl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){Xu(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ct.oa=function(){Xu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let c=0;c<s.length;c++)t.push(e[r])}return t},ct.W=function(n){Xu(this);let e=[];if("string"==typeof n)Om(this,n)&&(e=e.concat(this.g.get(Sl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ct.set=function(n,e){return Xu(this),this.i=null,Om(this,n=Sl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var s=c;""!==d[r]&&(s+="="+encodeURIComponent(String(d[r]))),n.push(s)}}return this.i=n.join("&")};var tb=10;function nb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Kv(n){return n.h?1:n.g?n.g.size:0}function ec(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Yv(n,e){n.g?n.g.add(e):n.h=e}function Qv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Nm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return pv(n.i)}function rb(){}function MT(){this.g=new rb}function jx(n,e,t){const r=t||"";try{$v(n,function(s,c){let d=s;Ga(s)&&(d=kE(s)),e.push(r+c+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Rm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function tp(n){this.l=n.ac||null,this.j=n.jb||!1}function np(n,e){Vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=km,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xT.prototype.cancel=function(){if(this.i=Nm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},rb.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},rb.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Ir(tp,Yd),tp.prototype.g=function(){return new np(this.l,this.j)},tp.prototype.i=function(n){return function(){return n}}({}),Ir(np,Vr);var km=0;function ib(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function nh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,rh(n)}function rh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=np.prototype).open=function(n,e){if(this.readyState!=km)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,rh(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nh(this)),this.readyState=km},ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,rh(this)),this.g&&(this.readyState=3,rh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ib(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?nh(this):rh(this),3==this.readyState&&ib(this)}},ct.Va=function(n){this.g&&(this.response=this.responseText=n,nh(this))},ct.Ua=function(n){this.g&&(this.response=n,nh(this))},ct.ga=function(){this.g&&nh(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(np.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var PT=xt.JSON.parse;function er(n){Vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jv,this.K=this.L=!1}Ir(er,Vr);var Jv="",NT=/^https?$/i,sb=["POST","PUT"];function Xv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,e0(n),Fm(n)}function e0(n){n.D||(n.D=!0,ni(n,"complete"),ni(n,"error"))}function ab(n){if(n.h&&typeof hv<"u"&&(!n.C[1]||4!=Jo(n)||2!=n.aa()))if(n.v&&4==Jo(n))Em(n.Ha,0,n);else if(ni(n,"readystatechange"),4==Jo(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(Zv)[1]||null;if(!s&&xt.self&&xt.self.location){var c=xt.self.location.protocol;s=c.substr(0,c.length-1)}r=!NT.test(s?s.toLowerCase():"")}t=r}if(t)ni(n,"complete"),ni(n,"success");else{n.m=6;try{var d=2<Jo(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",e0(n)}}finally{Fm(n)}}}function Fm(n,e){if(n.g){RT(n);const t=n.g,r=n.C[0]?am:null;n.g=null,n.C=null,e||ni(n,"ready");try{t.onreadystatechange=r}catch{}}}function RT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function Jo(n){return n.g?n.g.readyState:0}function kT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Jv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function FT(n){let e="";return Tv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ub(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=FT(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function Lm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function LT(n){this.Ca=0,this.i=[],this.j=new Bv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Lm("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Lm("baseRetryDelayMs",5e3,n),this.bb=Lm("retryDelaySeedMs",1e4,n),this.$a=Lm("forwardChannelMaxRetries",2,n),this.ta=Lm("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new xT(n&&n.concurrentRequestLimit),this.Fa=new MT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function cb(n){if(VT(n),3==n.G){var e=n.U++,t=za(n.F);Fn(t,"SID",n.I),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),tc(n,t),(e=new Kf(n,n.j,e,void 0)).K=2,e.v=qv(za(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ip(e.l,null),e.g.da(e.v)),e.F=Date.now(),Xf(e)}db(n)}function t0(n){n.g&&(rp(n),n.g.cancel(),n.g=null)}function VT(n){t0(n),n.u&&(xt.clearTimeout(n.u),n.u=null),Vm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function xl(n){nb(n.h)||n.m||(n.m=!0,Rv(n.Ja,n),n.C=0)}function n0(n,e){var t;t=e?e.m:n.U++;const r=za(n.F);Fn(r,"SID",n.I),Fn(r,"RID",t),Fn(r,"AID",n.T),tc(n,r),n.o&&n.s&&ub(r,n.o,n.s),t=new Kf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=r0(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Yv(n.h,t),Jf(t,r,e)}function tc(n,e){n.ia&&Tv(n.ia,function(t,r){Fn(e,r,t)}),n.l&&$v({},function(t,r){Fn(e,r,t)})}function r0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ti(n.l.Ra,n.l,n):null;e:{var s=n.i;let c=-1;for(;;){const d=["count="+t];-1==c?0<t?(c=s[0].h,d.push("ofs="+c)):c=0:d.push("ofs="+c);let m=!0;for(let w=0;w<t;w++){let b=s[w].h;const S=s[w].g;if(b-=c,0>b)c=Math.max(0,s[w].h-100),m=!1;else try{jx(S,d,"req"+b+"_")}catch{r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function s0(n){n.g||n.u||(n.Z=1,Rv(n.Ia,n),n.A=0)}function lb(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Gf(ti(n.Ia,n),UT(n,n.A)),n.A++,0))}function rp(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function o0(n){n.g=new Kf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=za(n.sa);Fn(e,"RID","rpc"),Fn(e,"SID",n.I),Fn(e,"CI",n.L?"0":"1"),Fn(e,"AID",n.T),Fn(e,"TYPE","xmlhttp"),tc(n,e),n.o&&n.s&&ub(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=qv(za(e)),t.s=null,t.P=!0,Sm(t,n)}function Vm(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function a0(n,e){var t=null;if(n.g==e){Vm(n),rp(n),n.g=null;var r=2}else{if(!ec(n.h,e))return;t=e.D,Qv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ni(r=Kd(),new qE(r,t)),xl(n)}else s0(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function Hx(n,e){return!(Kv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Gf(ti(n.Ja,n,e),UT(n,n.C)),n.C++,0)))}(n,e)||2==r&&lb(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:ih(n,5);break;case 4:ih(n,10);break;case 3:ih(n,6);break;default:ih(n,2)}}function UT(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ih(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ti(n.kb,n);t||(t=new Ju("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Ur(t,"https"),qv(t)),function OT(n,e){const t=new Bv;if(xt.Image){const r=new Image;r.onload=lm(Rm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lm(Rm,t,r,"TestLoadImage: error",!1,e),r.onabort=lm(Rm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lm(Rm,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Dr(2);n.G=0,n.l&&n.l.va(e),db(n),VT(n)}function db(n){if(n.G=0,n.la=[],n.l){const e=Nm(n.h);(0!=e.length||0!=n.i.length)&&(AE(n.la,e),AE(n.la,n.i),n.h.i.length=0,pv(n.i),n.i.length=0),n.l.ua()}}function hb(n,e,t){var r=t instanceof Ju?za(t):new Ju(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Wa(r,r.m);else{var s=xt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var c=new Ju(null,void 0);r&&Ur(c,r),e&&(c.g=e),s&&Wa(c,s),t&&(c.l=t),r=c}return e=n.za,(t=n.D)&&e&&Fn(r,t,e),Fn(r,"VER",n.ma),tc(n,r),r}function ip(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new er(t&&n.Da&&!n.ra?new tp({jb:!0}):n.ra)).Ka(n.H),e}function fb(){}function u0(){if(qd&&!(10<=Number(pT)))throw Error("Environmental error: no available transport.")}function xs(n,e){Vr.call(this),this.g=new LT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!dm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sh(this)}function BT(n){Dm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function pb(){Wf.call(this),this.status=1}function sh(n){this.g=n}(ct=er.prototype).Ka=function(n){this.L=n},ct.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Tm.g(),this.C=function GE(n){return n.h||(n.h=n.i())}(this.u?this.u:Tm),this.g.onreadystatechange=ti(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void Xv(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),s=xt.FormData&&n instanceof xt.FormData,!(0<=fv(sb,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,d]of t)this.g.setRequestHeader(c,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{RT(this),0<this.B&&((this.K=function ob(n){return qd&&function Iv(){return function dT(n){var e=bv;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mv(String(Uf)).split("."),t=mv("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",c=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==s[0].length&&0==c[0].length)break;n=_v(0==s[1].length?0:parseInt(s[1],10),0==c[1].length?0:parseInt(c[1],10))||_v(0==s[2].length,0==c[2].length)||_v(s[2],c[2]),s=s[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ti(this.qa,this)):this.A=Em(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Xv(this,c)}},ct.qa=function(){typeof hv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ni(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ni(this,"complete"),ni(this,"abort"),Fm(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fm(this,!0)),er.X.M.call(this)},ct.Ha=function(){this.s||(this.F||this.v||this.l?ab(this):this.fb())},ct.fb=function(){ab(this)},ct.aa=function(){try{return 2<Jo(this)?this.g.status:-1}catch{return-1}},ct.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),PT(e)}},ct.Ea=function(){return this.m},ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=LT.prototype).ma=8,ct.G=1,ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Kf(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=gT(c),mm(c,this.S)):c=this.S),null!==this.o||this.N||(s.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=r0(this,s,e),Fn(t=za(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),tc(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(FT(c)))+"&"+e:this.o&&ub(t,this.o,c)),Yv(this.h,s),this.Ya&&Fn(t,"TYPE","init"),this.O?(Fn(t,"$req",e),Fn(t,"SID","null"),s.Z=!0,Jf(s,t,null)):Jf(s,t,e),this.G=2}}else 3==this.G&&(n?n0(this,n):0==this.i.length||nb(this.h)||n0(this))},ct.Ia=function(){if(this.u=null,o0(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Gf(ti(this.eb,this),n)}},ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Dr(10),t0(this),o0(this))},ct.cb=function(){null!=this.v&&(this.v=null,t0(this),lb(this),Dr(19))},ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Dr(2)):(this.j.info("Failed to ping google.com"),Dr(1))},(ct=fb.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Ra=function(){},u0.prototype.g=function(n,e){return new xs(n,e)},Ir(xs,Vr),xs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Dr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=hb(n,null,n.V),xl(n)},xs.prototype.close=function(){cb(this.g)},xs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=kE(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&xl(e)},xs.prototype.M=function(){this.g.l=null,delete this.j,cb(this.g),delete this.g,xs.X.M.call(this)},Ir(BT,Dm),Ir(pb,Wf),Ir(sh,fb),sh.prototype.xa=function(){ni(this.g,"a")},sh.prototype.wa=function(n){ni(this.g,new BT(n))},sh.prototype.va=function(n){ni(this.g,new pb)},sh.prototype.ua=function(){ni(this.g,"b")},u0.prototype.createWebChannel=u0.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,Im.NO_ERROR=0,Im.TIMEOUT=8,Im.HTTP_ERROR=6,zf.COMPLETE="complete",zE.EventType=Qd,Qd.OPEN="a",Qd.CLOSE="b",Qd.ERROR="c",Qd.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,er.prototype.listenOnce=er.prototype.O,er.prototype.getLastError=er.prototype.Oa,er.prototype.getLastErrorCode=er.prototype.Ea,er.prototype.getStatus=er.prototype.aa,er.prototype.getResponseJson=er.prototype.Sa,er.prototype.getResponseText=er.prototype.fa,er.prototype.send=er.prototype.da,er.prototype.setWithCredentials=er.prototype.Ka;var jT=qa.createWebChannelTransport=function(){return new u0},$x=qa.getStatEventTarget=function(){return Kd()},c0=qa.ErrorCode=Im,gb=qa.EventType=zf,mb=qa.Event=co,HT=qa.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ho=qa.FetchXmlHttpFactory=tp,Um=qa.WebChannel=zE,l0=qa.XhrIo=er;const _b="@firebase/firestore";class mn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let oh="9.14.0";const Xo=new El.Yd("@firebase/firestore");function d0(){return Xo.logLevel}function Ne(n,...e){if(Xo.logLevel<=El.in.DEBUG){const t=e.map(h0);Xo.debug(`Firestore (${oh}): ${n}`,...t)}}function tr(n,...e){if(Xo.logLevel<=El.in.ERROR){const t=e.map(h0);Xo.error(`Firestore (${oh}): ${n}`,...t)}}function nc(n,...e){if(Xo.logLevel<=El.in.WARN){const t=e.map(h0);Xo.warn(`Firestore (${oh}): ${n}`,...t)}}function h0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${oh}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function Et(n,e){n||et()}function Ge(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class f0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class Ka{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qT{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const c=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let d=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Dn,e.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,me.Z)(function*(){yield b.promise,yield c(r.currentUser)}))},w=b=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Dn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new f0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new mn(e)}}class Zx{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Et(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class GT{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new Zx(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zT{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=c=>{null!=c.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.A;return this.A=c.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const s=c=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>s(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?s(c):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.A=t.token,new yb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class WT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vb(40);for(let c=0;c<s.length;++c)r.length<20&&s[c]<t&&(r+=e.charAt(s[c]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function ah(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function g0(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Hn(0,0))}static max(){return new Ct(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uh{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===uh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const c=e.get(s),d=t.get(s);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends uh{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const wb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends uh{construct(e,t,r){return new $n(e,t,r)}static isValidIdentifier(e){return wb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $n(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const c=()=>{if(0===r.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Me(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(d=!d,s++):"."!==m||d?(r+=m,s++):(c(),s++)}if(c(),d)throw new Me(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(Qt.fromString(e))}static fromName(e){return new Ze(Qt.fromString(e).popFirst(5))}static empty(){return new Ze(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new Qt(e.slice()))}}class Ml{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function ch(n){return n.fields.find(e=>2===e.kind)}function rc(n){return n.fields.filter(e=>2!==e.kind)}Ml.UNKNOWN_ID=-1;class sp{constructor(e,t){this.fieldPath=e,this.kind=t}}class op{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new op(0,Ms.min())}}function Eb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ct.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new Ms(s,Ze.empty(),e)}function YT(n){return new Ms(n.readTime,n.key,-1)}class Ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ms(Ct.min(),Ze.empty(),-1)}static max(){return new Ms(Ct.max(),Ze.empty(),-1)}}function Bm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const bb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ib{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ic(n){return Db.apply(this,arguments)}function Db(){return Db=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==bb)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),Db.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,s)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let s=0,c=0,d=!1;e.forEach(m=>{++s,m.next(()=>{++c,d&&c===s&&t()},w=>r(w))}),d=!0,c===s&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(s=>s?oe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,c)=>{r.push(t.call(this,s,c))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,s)=>{const c=e.length,d=new Array(c);let m=0;for(let w=0;w<c;w++){const b=w;t(e[b]).next(S=>{d[b]=S,++m,m===c&&r(d)},S=>s(S))}})}static doWhile(e,t){return new oe((r,s)=>{const c=()=>{!0===e()?t().next(()=>{c()},s):r()};c()})}}class m0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Dn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ap(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Ya(r.target.error);this.P.reject(new ap(e,s))}}static open(e,t,r,s){try{return new m0(t,e.transaction(s,r))}catch(c){throw new ap(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QT(t)}}class ea{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ea.D((0,rn.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Ol(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,rn.hl)())return!1;if(ea.N())return!0;const e=(0,rn.z$)(),t=ea.D(e),r=0<t&&t<10,s=ea.k(e),c=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=d=>{r(d.target.result)},c.onblocked=()=>{s(new ap(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=d=>{const m=d.target.error;s("VersionError"===m.name?new Me(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ap(e,m))},c.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,c.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var c=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{c.db=yield c.F(e);const w=m0.open(c.db,e,d?"readonly":"readwrite",r),b=s(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),oe.reject(S))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,S="FirebaseError"!==b.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),c.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gx{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ol(this.U.delete())}}class ap extends Me{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fo(n){return"IndexedDbTransactionError"===n.name}class QT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ol(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Ol(this.store.add(e))}get(e){return Ol(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Ol(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Ol(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),c=[];return this.H(s,(d,m)=>{c.push(m)}).next(()=>c)}{const s=this.store.getAll(r.range);return new oe((c,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{c(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(c,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new oe((r,s)=>{t.onerror=c=>{const d=Ya(c.target.error);s(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new oe((s,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void s();const w=new Gx(m),b=t(m.primaryKey,m.value,w);if(b instanceof oe){const S=b.catch(P=>(w.done(),oe.reject(P)));r.push(S)}w.isDone?s():null===w.G?m.continue():m.continue(w.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ol(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Ya(r.target.error);t(s)}})}let _0=!1;function Ya(n){const e=ea.D((0,rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _0||(_0=!0,setTimeout(()=>{throw r},0)),r}}return n}class Tb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){fo(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ic(r)}yield t.nt(6e4)}))}}class y0{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,c=!0;return oe.doWhile(()=>!0===c&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ne("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,s).next(m=>{s-=m,r.add(d)});c=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(s,c)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,c)=>{const d=YT(c);Bm(d,r)>0&&(r=d)}),new Ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Ab(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}fi.at=-1;class Mn{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new v0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new v0(this.root,e,this.comparator,!1)}getReverseIterator(){return new v0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new v0(this.root,e,this.comparator,!0)}}class v0{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&s&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,r,s,c){this.key=e,this.value=t,this.color=r??pi.RED,this.left=s??pi.EMPTY,this.right=c??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,c){return new pi(e??this.key,t??this.value,r??this.color,s??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===c?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return pi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,s){return this}insert(n,e,t){return new pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JT(this.data.getIterator())}getIteratorFrom(e){return new JT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(s,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class JT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(n){return n.hasNext()?n.getNext():void 0}class is{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new is([])}unionWith(e){let t=new En($n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ah(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let c=0;c<r.length;++c)s+=String.fromCharCode(r[c]);return s}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const eA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(n){if(Et(!!n),"string"==typeof n){let e=0;const t=eA.exec(n);if(Et(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zn(n.seconds),nanos:Zn(n.nanos)}}function Zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sc(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function w0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Sb(n){const e=n.mapValue.fields.__previous_value__;return w0(e)?Sb(e):e}function lh(n){const e=Ja(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}class C0{constructor(e,t,r,s,c,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Nl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nl&&e.projectId===this.projectId&&e.database===this.database}}function dh(n){return null==n}function Rl(n){return 0===n&&1/n==-1/0}function xb(n){return"number"==typeof n&&Number.isInteger(n)&&!Rl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const oc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},E0={nullValue:"NULL_VALUE"};function hh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?w0(n)?4:iA(n)?9007199254740991:10:et()}function ta(n,e){if(n===e)return!0;const t=hh(n);if(t!==hh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lh(n).isEqual(lh(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const c=Ja(r.timestampValue),d=Ja(s.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,sc(n.bytesValue).isEqual(sc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Zn(r.geoPointValue.latitude)===Zn(s.geoPointValue.latitude)&&Zn(r.geoPointValue.longitude)===Zn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Zn(r.integerValue)===Zn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const c=Zn(r.doubleValue),d=Zn(s.doubleValue);return c===d?Rl(c)===Rl(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return ah(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:return function(r,s){const c=r.mapValue.fields||{},d=s.mapValue.fields||{};if(Ab(c)!==Ab(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(void 0===d[m]||!ta(c[m],d[m])))return!1;return!0}(n,e);default:return et()}var s}function up(n,e){return void 0!==(n.values||[]).find(t=>ta(t,e))}function ac(n,e){if(n===e)return 0;const t=hh(n),r=hh(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(s,c){const d=Zn(s.integerValue||s.doubleValue),m=Zn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return tA(n.timestampValue,e.timestampValue);case 4:return tA(lh(n),lh(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(s,c){const d=sc(s),m=sc(c);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,c){const d=s.split("/"),m=c.split("/");for(let w=0;w<d.length&&w<m.length;w++){const b=Mt(d[w],m[w]);if(0!==b)return b}return Mt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,c){const d=Mt(Zn(s.latitude),Zn(c.latitude));return 0!==d?d:Mt(Zn(s.longitude),Zn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,c){const d=s.values||[],m=c.values||[];for(let w=0;w<d.length&&w<m.length;++w){const b=ac(d[w],m[w]);if(b)return b}return Mt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,c){if(s===oc.mapValue&&c===oc.mapValue)return 0;if(s===oc.mapValue)return 1;if(c===oc.mapValue)return-1;const d=s.fields||{},m=Object.keys(d),w=c.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const P=Mt(m[S],b[S]);if(0!==P)return P;const V=ac(d[m[S]],w[b[S]]);if(0!==V)return V}return Mt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw et()}}function tA(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Ja(n),r=Ja(e),s=Mt(t.seconds,r.seconds);return 0!==s?s:Mt(t.nanos,r.nanos)}function cp(n){return Mb(n)}function Mb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Ja(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sc(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",c=!0;for(const d of r.values||[])c?c=!1:s+=",",s+=Mb(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let c="{",d=!0;for(const m of s)d?d=!1:c+=",",c+=`${m}:${Mb(r.fields[m])}`;return c+"}"}(n.mapValue):et();var e}function fh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ob(n){return!!n&&"integerValue"in n}function lp(n){return!!n&&"arrayValue"in n}function nA(n){return!!n&&"nullValue"in n}function rA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function b0(n){return!!n&&"mapValue"in n}function Hm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zx(n){return"nullValue"in n?E0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fh(Nl.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function i(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fh(Nl.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?oc:et()}function o(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function a(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class l{constructor(e){this.value=e}static empty(){return new l({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!b0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hm(t)}setAll(e){let t=$n.emptyPath(),r={},s=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}d?r[m.lastSegment()]=Hm(d):s.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,s)}delete(e){const t=this.field(e.popLast());b0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];b0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Qa(t,(s,c)=>e[s]=c);for(const s of r)delete e[s]}clone(){return new l(Hm(this.value))}}function h(n){const e=[];return Qa(n.fields,(t,r)=>{const s=new $n([t]);if(b0(r)){const c=h(r.mapValue).fields;if(0===c.length)e.push(s);else for(const d of c)e.push(s.child(d))}else e.push(s)}),new is(e)}class p{constructor(e,t,r,s,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=c,this.documentState=d}static newInvalidDocument(e){return new p(e,0,Ct.min(),Ct.min(),l.empty(),0)}static newFoundDocument(e,t,r){return new p(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new p(e,2,t,Ct.min(),l.empty(),0)}static newUnknownDocument(e,t){return new p(e,3,t,Ct.min(),l.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=l.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=l.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof p&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new p(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class y{constructor(e,t=null,r=[],s=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=c,this.startAt=d,this.endAt=m,this.ht=null}}function C(n,e=null,t=[],r=[],s=null,c=null,d=null){return new y(n,e,t,r,s,c,d)}function E(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+cp(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),dh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cp(r)).join(",")),e.ht=t}return e.ht}function M(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!I0(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!ta(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zm(n.startAt,e.startAt)&&Zm(n.endAt,e.endAt)}function R(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $(n,e){return n.filters.filter(t=>t instanceof Se&&t.field.isEqual(e))}function X(n,e,t){let r=E0,s=!0;for(const c of $(n,e)){let d=E0,m=!0;switch(c.op){case"<":case"<=":d=zx(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,m=!1;break;case"!=":case"not-in":d=E0}o({value:r,inclusive:s},{value:d,inclusive:m})<0&&(r=d,s=m)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const d=t.position[c];o({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function _e(n,e,t){let r=oc,s=!0;for(const c of $(n,e)){let d=oc,m=!0;switch(c.op){case">=":case">":d=i(c.value),m=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,m=!1;break;case"!=":case"not-in":d=oc}a({value:r,inclusive:s},{value:d,inclusive:m})>0&&(r=d,s=m)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const d=t.position[c];a({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class Se extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new qe(e,t,r):"array-contains"===t?new It(e,r):"in"===t?new ln(e,r):"not-in"===t?new Ln(e,r):"array-contains-any"===t?new kl(e,r):new Se(e,t,r)}static lt(e,t,r){return"in"===t?new tt(e,r):new gt(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ac(t,this.value)):null!==t&&hh(this.value)===hh(t)&&this.ft(ac(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qe extends Se{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.ft(t)}}class tt extends Se{constructor(e,t){super(e,"in",t),this.keys=Te(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gt extends Se{constructor(e,t){super(e,"not-in",t),this.keys=Te(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Te(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class It extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lp(t)&&up(t.arrayValue,this.value)}}class ln extends Se{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&up(this.value.arrayValue,t)}}class Ln extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(up(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!up(this.value.arrayValue,t)}}class kl extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>up(this.value.arrayValue,r))}}class na{constructor(e,t){this.position=e,this.inclusive=t}}class uc{constructor(e,t="asc"){this.field=e,this.dir=t}}function I0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function $m(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const c=e[s],d=n.position[s];if(r=c.field.isKeyField()?Ze.comparator(Ze.fromName(d.referenceValue),t.key):ac(d,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function Zm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}class po{constructor(e,t=null,r=[],s=[],c=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function qm(n,e,t,r,s,c,d,m){return new po(n,e,t,r,s,c,d,m)}function cc(n){return new po(n)}function Gm(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function oA(n){for(const e of n.filters)if(e.dt())return e.field;return null}function aA(n){return null!==n.collectionGroup}function zm(n){const e=Ge(n);if(null===e._t){e._t=[];const t=oA(e),r=sA(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new uc(t)),e._t.push(new uc($n.keyField(),"asc"));else{let s=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(s=!0);if(!s){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new uc($n.keyField(),c))}}}return e._t}function ss(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=C(e.path,e.collectionGroup,zm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of zm(e))t.push(new uc(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new na(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new na(e.startAt.position,e.startAt.inclusive):null;e.wt=C(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function Pb(n,e,t){return new po(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function D0(n,e){return M(ss(n),ss(e))&&n.limitType===e.limitType}function Wx(n){return`${E(ss(n))}|lt:${n.limitType}`}function uA(n){return`Query(target=${function T(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${cp(r.value)}`;var r}).join(", ")}]`),dh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>cp(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>cp(t)).join(",")),`Target(${e})`}(ss(n))}; limitType=${n.limitType})`}function cA(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,c,d){const m=$m(s,c,d);return s.inclusive?m<=0:m<0}(t.startAt,zm(t),r)||t.endAt&&!function(s,c,d){const m=$m(s,c,d);return s.inclusive?m>=0:m>0}(t.endAt,zm(t),r)));var t,r}function Kx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yx(n){return(e,t)=>{let r=!1;for(const s of zm(n)){const c=eP(s,e,t);if(0!==c)return c;r=r||s.field.isKeyField()}return 0}}function eP(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(s,c,d){const m=c.data.field(s),w=d.data.field(s);return null!==m&&null!==w?ac(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function Qx(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rl(e)?"-0":e}}function Jx(n){return{integerValue:""+n}}function Xx(n,e){return xb(e)?Jx(e):Qx(n,e)}class Nb{constructor(){this._=void 0}}function tP(n,e,t){return n instanceof Wm?function(r,s){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(c.fields.__previous_value__=s),{mapValue:c}}(t,e):n instanceof dp?t1(n,e):n instanceof hp?n1(n,e):function(r,s){const c=e1(r,s),d=r1(c)+r1(r.yt);return Ob(c)&&Ob(r.yt)?Jx(d):Qx(r.It,d)}(n,e)}function nP(n,e,t){return n instanceof dp?t1(n,e):n instanceof hp?n1(n,e):t}function e1(n,e){return n instanceof Km?Ob(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Wm extends Nb{}class dp extends Nb{constructor(e){super(),this.elements=e}}function t1(n,e){const t=i1(e);for(const r of n.elements)t.some(s=>ta(s,r))||t.push(r);return{arrayValue:{values:t}}}class hp extends Nb{constructor(e){super(),this.elements=e}}function n1(n,e){let t=i1(e);for(const r of n.elements)t=t.filter(s=>!ta(s,r));return{arrayValue:{values:t}}}class Km extends Nb{constructor(e,t){super(),this.It=e,this.yt=t}}function r1(n){return Zn(n.integerValue||n.doubleValue)}function i1(n){return lp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class T0{constructor(e,t){this.field=e,this.transform=t}}class iP{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kb{}function s1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Qm(n.key,nr.none()):new Ym(n.key,n.data,nr.none());{const t=n.data,r=l.empty();let s=new En($n.comparator);for(let c of e.fields)if(!s.has(c)){let d=t.field(c);null===d&&c.length>1&&(c=c.popLast(),d=t.field(c)),null===d?r.delete(c):r.set(c,d),s=s.add(c)}return new Fl(n.key,r,new is(s.toArray()),nr.none())}}function sP(n,e,t){n instanceof Ym?function(r,s,c){const d=r.value.clone(),m=u1(r.fieldTransforms,s,c.transformResults);d.setAll(m),s.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Fl?function(r,s,c){if(!Rb(r.precondition,s))return void s.convertToUnknownDocument(c.version);const d=u1(r.fieldTransforms,s,c.transformResults),m=s.data;m.setAll(a1(r)),m.setAll(d),s.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function A0(n,e,t,r){return n instanceof Ym?function(s,c,d,m){if(!Rb(s.precondition,c))return d;const w=s.value.clone(),b=c1(s.fieldTransforms,m,c);return w.setAll(b),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fl?function(s,c,d,m){if(!Rb(s.precondition,c))return d;const w=c1(s.fieldTransforms,m,c),b=c.data;return b.setAll(a1(s)),b.setAll(w),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,Rb(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d);var c,d}function oP(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),c=e1(r.transform,s||null);null!=c&&(null===t&&(t=l.empty()),t.set(r.field,c))}return t||null}function o1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ah(t,r,(s,c)=>function rP(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dp&&r instanceof dp||t instanceof hp&&r instanceof hp?ah(t.elements,r.elements,ta):t instanceof Km&&r instanceof Km?ta(t.yt,r.yt):t instanceof Wm&&r instanceof Wm);var t,r}(s,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ym extends kb{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fl extends kb{constructor(e,t,r,s,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function a1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function u1(n,e,t){const r=new Map;Et(n.length===t.length);for(let s=0;s<t.length;s++){const c=n[s],d=c.transform,m=e.data.field(c.field);r.set(c.field,nP(d,m,t[s]))}return r}function c1(n,e,t){const r=new Map;for(const s of n){const c=s.transform,d=t.data.field(s.field);r.set(s.field,tP(c,d,e))}return r}class Qm extends kb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lA extends kb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aP{constructor(e){this.count=e}}var Br,an;function l1(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function d1(n){if(void 0===n)return tr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Br.OK:return ce.OK;case Br.CANCELLED:return ce.CANCELLED;case Br.UNKNOWN:return ce.UNKNOWN;case Br.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Br.INTERNAL:return ce.INTERNAL;case Br.UNAVAILABLE:return ce.UNAVAILABLE;case Br.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Br.NOT_FOUND:return ce.NOT_FOUND;case Br.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Br.ABORTED:return ce.ABORTED;case Br.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Br.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(an=Br||(Br={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class ph{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,c]of r)if(this.equalsFn(s,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return void(s[c]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,(t,r)=>{for(const[s,c]of r)e(s,c)})}isEmpty(){return jm(this.inner)}size(){return this.innerSize}}const uP=new Mn(Ze.comparator);function Os(){return uP}const h1=new Mn(Ze.comparator);function S0(...n){let e=h1;for(const t of n)e=e.insert(t.key,t);return e}function f1(n){let e=h1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lc(){return x0()}function p1(){return x0()}function x0(){return new ph(n=>n.toString(),(n,e)=>n.isEqual(e))}const cP=new Mn(Ze.comparator),lP=new En(Ze.comparator);function Bt(...n){let e=lP;for(const t of n)e=e.add(t);return e}const dP=new En(Mt);function Fb(){return dP}class M0{constructor(e,t,r,s,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,O0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new M0(Ct.min(),s,Fb(),Os(),Bt())}}class O0{constructor(e,t,r,s,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new O0(r,t,Bt(),Bt(),Bt())}}class Lb{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class g1{constructor(e,t){this.targetId=e,this.At=t}}class m1{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class _1{constructor(){this.Rt=0,this.bt=v1(),this.Pt=Tr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Bt(),t=Bt(),r=Bt();return this.bt.forEach((s,c)=>{switch(c){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:et()}}),new O0(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=v1()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class hP{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Os(),this.qt=y1(),this.Kt=new En(Mt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const c=s.target;if(R(c))if(0===r){const d=new Ze(c.path);this.jt(t,d,p.newNoDocument(d,Ct.min()))}else Et(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,d)=>{const m=this.Xt(d);if(m){if(c.current&&R(m.target)){const w=new Ze(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,p.newNoDocument(w,e))}c.Dt&&(t.set(d,c.xt()),c.Nt())}});let r=Bt();this.qt.forEach((c,d)=>{let m=!0;d.forEachWhile(w=>{const b=this.Xt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(c))}),this.Ut.forEach((c,d)=>d.setReadTime(e));const s=new M0(e,t,this.Kt,this.Ut,r);return this.Ut=Os(),this.qt=y1(),this.Kt=new En(Mt),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new _1,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new En(Mt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new _1),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function y1(){return new Mn(Ze.comparator)}function v1(){return new Mn(Ze.comparator)}const fP={asc:"ASCENDING",desc:"DESCENDING"},pP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class gP{constructor(e,t){this.databaseId=e,this.gt=t}}function P0(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w1(n,e){return n.gt?e.toBase64():e.toUint8Array()}function mP(n,e){return P0(n,e.toTimestamp())}function gi(n){return Et(!!n),Ct.fromTimestamp(function(e){const t=Ja(e);return new Hn(t.seconds,t.nanos)}(n))}function dA(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function C1(n){const e=Qt.fromString(n);return Et(x1(e)),e}function N0(n,e){return dA(n.databaseId,e.path)}function dc(n,e){const t=C1(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(b1(t))}function hA(n,e){return dA(n.databaseId,e)}function E1(n){const e=C1(n);return 4===e.length?Qt.emptyPath():b1(e)}function R0(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function b1(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function I1(n,e,t){return{name:N0(n,e),fields:t.value.mapValue.fields}}function D1(n,e,t){const r=dc(n,e.name),s=gi(e.updateTime),c=new l({mapValue:{fields:e.fields}}),d=p.newFoundDocument(r,s,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function k0(n,e){let t;if(e instanceof Ym)t={update:I1(n,e.key,e.value)};else if(e instanceof Qm)t={delete:N0(n,e.key)};else if(e instanceof Fl)t={update:I1(n,e.key,e.data),updateMask:DP(e.fieldMask)};else{if(!(e instanceof lA))return et();t={verify:N0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,c){const d=c.transform;if(d instanceof Wm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof dp)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hp)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Km)return{fieldPath:c.field.canonicalString(),increment:d.yt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:mP(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:et()),t;var s}function fA(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?nr.updateTime(gi(s.updateTime)):void 0!==s.exists?nr.exists(s.exists):nr.none():nr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(c,d){let m=null;"setToServerValue"in d?(Et("REQUEST_TIME"===d.setToServerValue),m=new Wm):"appendMissingElements"in d?m=new dp(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new hp(d.removeAllFromArray.values||[]):"increment"in d?m=new Km(c,d.increment):et();const w=$n.fromServerFormat(d.fieldPath);return new T0(w,m)}(n,s)):[];var s;if(e.update){const s=dc(n,e.update.name),c=new l({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new is((e.updateMask.fieldPaths||[]).map(b=>$n.fromServerFormat(b)));return new Fl(s,c,d,t,r)}return new Ym(s,c,t,r)}if(e.delete){const s=dc(n,e.delete);return new Qm(s,t)}if(e.verify){const s=dc(n,e.verify);return new lA(s,t)}return et()}function T1(n,e){return{documents:[hA(n,e.path)]}}function pA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=hA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0===w.length)return;const b=w.map(S=>function(P){if("=="===P.op){if(rA(P.value))return{unaryFilter:{field:Jm(P.field),op:"IS_NAN"}};if(nA(P.value))return{unaryFilter:{field:Jm(P.field),op:"IS_NULL"}}}else if("!="===P.op){if(rA(P.value))return{unaryFilter:{field:Jm(P.field),op:"IS_NOT_NAN"}};if(nA(P.value))return{unaryFilter:{field:Jm(P.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jm(P.field),op:EP(P.op),value:P.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const c=function(w){if(0!==w.length)return w.map(b=>{return{field:Jm((S=b).field),direction:CP(S.dir)};var S})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=(b=e.limit,n.gt||dh(b)?b:{value:b});var b,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function A1(n){let e=E1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Et(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let c=[];t.where&&(c=S1(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new uc(Xm((P=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let m=null;t.limit&&(m=function(S){let P;return P="object"==typeof S?S.value:S,dh(P)?null:P}(t.limit));let w=null;var S;t.startAt&&(w=new na((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new na(S.values||[],!S.before)}(t.endAt)),qm(e,s,d,c,m,"F",w,b)}function S1(n){return n?void 0!==n.unaryFilter?[IP(n)]:void 0!==n.fieldFilter?[bP(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>S1(e)).reduce((e,t)=>e.concat(t)):et():[]}function CP(n){return fP[n]}function EP(n){return pP[n]}function Jm(n){return{fieldPath:n.canonicalString()}}function Xm(n){return $n.fromServerFormat(n.fieldPath)}function bP(n){return Se.create(Xm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function IP(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Xm(n.unaryFilter.field);return Se.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Xm(n.unaryFilter.field);return Se.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xm(n.unaryFilter.field);return Se.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xm(n.unaryFilter.field);return Se.create(s,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function DP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function x1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function os(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=M1(e)),e=TP(n.get(t),e);return M1(e)}function TP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const c=n.charAt(s);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function M1(n){return n+"\x01\x01"}function hc(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let s="";for(let c=0;c<e;){const d=n.indexOf("\x01",c);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(c,d);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(c,d),s+="\0";break;case"\x11":s+=n.substring(c,d+1);break;default:et()}c=d+2}return new Qt(r)}const O1=["userId","batchId"];function Vb(n,e){return[n,os(e)]}function P1(n,e,t){return[n,os(e),t]}const AP={},SP=["prefixPath","collectionGroup","readTime","documentId"],xP=["prefixPath","collectionGroup","documentId"],MP=["collectionGroup","readTime","prefixPath","documentId"],OP=["canonicalId","targetId"],PP=["targetId","path"],NP=["path","targetId"],RP=["collectionId","parent"],kP=["indexId","uid"],FP=["uid","sequenceNumber"],LP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VP=["indexId","uid","orderedDocumentKey"],UP=["userId","collectionPath","documentId"],BP=["userId","collectionPath","largestBatchId"],jP=["userId","collectionGroup","largestBatchId"],N1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HP=[...N1,"documentOverlays"],R1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],k1=R1,$P=[...k1,"indexConfiguration","indexState","indexEntries"];class gA extends Ib{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function mi(n,e){const t=Ge(n);return ea.M(t.ie,e)}class mA{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const c=this.mutations[s];c.key.isEqual(e.key)&&sP(c,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=A0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=A0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=p1();return this.mutations.forEach(s=>{const c=e.get(s.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(s.key)?null:m;const w=s1(d,m);null!==w&&r.set(s.key,w),d.isValidDocument()||d.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&ah(this.mutations,e.mutations,(t,r)=>o1(t,r))&&ah(this.baseMutations,e.baseMutations,(t,r)=>o1(t,r))}}class _A{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Et(e.mutations.length===r.length);let s=cP;const c=e.mutations;for(let d=0;d<c.length;d++)s=s.insert(c[d].key,r[d].version);return new _A(e,t,r,s)}}class yA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gh{constructor(e,t,r,s,c=Ct.min(),d=Ct.min(),m=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new gh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class F1{constructor(e){this.re=e}}function L1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ub(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:N0(s=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:P0(s,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:fp(e.version)}}var s,c;return r}function Ub(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pp(n){const e=new Hn(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function gp(n,e){const t=(e.baseMutations||[]).map(c=>fA(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(d.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>fA(n.re,c)),s=Hn.fromMillis(e.localWriteTimeMs);return new mA(e.batchId,s,t,r)}function F0(n){const e=pp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pp(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var s;return void 0!==n.query.documents?(Et(1===(s=n.query).documents.length),r=ss(cc(E1(s.documents[0])))):r=ss(A1(n.query)),new gh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function V1(n,e){const t=fp(e.snapshotVersion),r=fp(e.lastLimboFreeSnapshotVersion);let s;s=R(e.target)?T1(n.re,e.target):pA(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:E(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function vA(n){const e=A1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Pb(e,e.limit,"L"):e}function wA(n,e){return new yA(e.largestBatchId,fA(n.re,e.overlayMutation))}function U1(n,e){const t=e.path.lastSegment();return[n,os(e.path.popLast()),t]}function B1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:fp(r.readTime),documentKey:os(r.documentKey.path),largestBatchId:r.largestBatchId}}class qP{getBundleMetadata(e,t){return j1(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:pp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return j1(e).put({bundleId:(r=t).id,createTime:fp(gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return H1(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:vA(s.bundledQuery),readTime:pp(s.readTime)};var s})}saveNamedQuery(e,t){return H1(e).put({name:(r=t).name,readTime:fp(gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function j1(n){return mi(n,"bundles")}function H1(n){return mi(n,"namedQueries")}class Bb{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Bb(e,t.uid||"")}getOverlay(e,t){return L0(e).get(U1(this.userId,t)).next(r=>r?wA(this.It,r):null)}getOverlays(e,t){const r=lc();return oe.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((c,d)=>{const m=new yA(t,d);s.push(this.ue(e,m))}),oe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(os(d.getCollectionPath())));const c=[];return s.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);c.push(L0(e).Y("collectionPathOverlayIndex",m))}),oe.waitFor(c)}getOverlaysForCollection(e,t,r){const s=lc(),c=os(t),d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return L0(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const b=wA(this.It,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const c=lc();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return L0(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,b,S)=>{const P=wA(this.It,b);c.size()<s||P.largestBatchId===d?(c.set(P.getKey(),P),d=P.largestBatchId):S.done()}).next(()=>c)}ue(e,t){return L0(e).put(function(r,s,c){const[d,m,w]=U1(s,c.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:k0(r.re,c.mutation)}}(this.It,this.userId,t))}}function L0(n){return mi(n,"documentOverlays")}class mp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Zn(e.integerValue));else if("doubleValue"in e){const r=Zn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Rl(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(sc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?iA(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):et()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),Ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function GP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function $1(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const c=GP(255&t[s]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}mp.Te=new mp;class zP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=$1(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=$1(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,s,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class WP{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class KP{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class V0{constructor(){this.Be=new zP,this.Le=new WP(this.Be),this.Ue=new KP(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class _p{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _p(this.indexId,this.documentKey,this.arrayValue,r)}}function yp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Z1(n.arrayValue,e.arrayValue),0!==t?t:(t=Z1(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function Z1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class YP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=ch(e);if(void 0!==t&&!this.ze(t))return!1;const r=rc(e);let s=0,c=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const d=r[s];if(!this.He(this.je,d)||!this.Je(this.Ge[c++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(c>=this.Ge.length||!this.Je(this.Ge[c++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class QP{constructor(){this.Ye=new CA}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ms.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class CA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new En(Qt.comparator),c=!s.has(r);return this.index[t]=s.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new En(Qt.comparator)).toArray()}}const jb=new Uint8Array(0);class JP{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new CA,this.Ze=new ph(r=>E(r),(r,s)=>M(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:r,parent:os(s)};return q1(e).put(c)}return oe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[g0(t),""],!1,!0);return q1(e).W(s).next(c=>{for(const d of c){if(d.collectionId!==t)break;r.push(hc(d.parent))}return r})}addFieldIndex(e,t){const r=Hb(e),s={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete s.indexId;const c=r.add(s);if(t.indexState){const d=B0(e);return c.next(m=>{d.put(B1(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=Hb(e),s=B0(e),c=U0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=U0(e);let s=!0;const c=new Map;return oe.forEach(this.tn(t),d=>this.en(e,d).next(m=>{s&&(s=!!m),c.set(d,m)})).next(()=>{if(s){let d=Bt();const m=[];return oe.forEach(c,(w,b)=>{var S;Ne("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Nt=>`${Nt.fieldPath}:${Nt.kind}`).join(",")}`} to execute ${E(t)}`);const P=function(Nt,Rt){const Ft=ch(Rt);if(void 0===Ft)return null;for(const Zt of $(Nt,Ft.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(b,w),V=function(Nt,Rt){const Ft=new Map;for(const Zt of rc(Rt))for(const ri of $(Nt,Zt.fieldPath))switch(ri.op){case"==":case"in":Ft.set(Zt.fieldPath.canonicalString(),ri.value);break;case"not-in":case"!=":return Ft.set(Zt.fieldPath.canonicalString(),ri.value),Array.from(Ft.values())}return null}(b,w),q=function(Nt,Rt){const Ft=[];let Zt=!0;for(const ri of rc(Rt)){const rw=0===ri.kind?X(Nt,ri.fieldPath,Nt.startAt):_e(Nt,ri.fieldPath,Nt.startAt);Ft.push(rw.value),Zt&&(Zt=rw.inclusive)}return new na(Ft,Zt)}(b,w),ee=function(Nt,Rt){const Ft=[];let Zt=!0;for(const ri of rc(Rt)){const rw=0===ri.kind?_e(Nt,ri.fieldPath,Nt.endAt):X(Nt,ri.fieldPath,Nt.endAt);Ft.push(rw.value),Zt&&(Zt=rw.inclusive)}return new na(Ft,Zt)}(b,w),Oe=this.nn(w,b,q),Pe=this.nn(w,b,ee),st=this.sn(w,b,V),Tt=this.rn(w.indexId,P,Oe,q.inclusive,Pe,ee.inclusive,st);return oe.forEach(Tt,Nt=>r.J(Nt,t.limit).next(Rt=>{Rt.forEach(Ft=>{const Zt=Ze.fromSegments(Ft.documentKey);d.has(Zt)||(d=d.add(Zt),m.push(Zt))})}))}).next(()=>m)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,c,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,c.length),b=w/(null!=t?t.length:1),S=[];for(let P=0;P<w;++P){const V=t?this.on(t[P/b]):jb,q=this.un(e,V,r[P%b],s),ee=this.cn(e,V,c[P%b],d),Oe=m.map(Pe=>this.un(e,V,Pe,!0));S.push(...this.createRange(q,ee,Oe))}return S}un(e,t,r,s){const c=new _p(e,Ze.empty(),t,r);return s?c:c.Ke()}cn(e,t,r,s){const c=new _p(e,Ze.empty(),t,r);return s?c.Ke():c}en(e,t){const r=new YP(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(c=>{let d=null;for(const m of c)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),s=>this.en(e,s).next(c=>{c?0!==r&&c.fields.length<function(d){let m=new En($n.comparator),w=!1;for(const b of d.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:m=m.add(S.field))}for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(w?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new V0;for(const s of rc(e)){const c=t.data.field(s.fieldPath);if(null==c)return null;const d=r.qe(s.kind);mp.Te.ce(c,d)}return r.$e()}on(e){const t=new V0;return mp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new V0;return mp.Te.ce(fh(this.databaseId,t),r.qe(function(s){const c=rc(s);return 0===c.length?0:c[c.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new V0);let c=0;for(const d of rc(e)){const m=r[c++];for(const w of s)if(this.ln(t,d.fieldPath)&&lp(m))s=this.fn(s,d,m);else{const b=w.qe(d.kind);mp.Te.ce(m,b)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],c=[];for(const d of r.arrayValue.values||[])for(const m of s){const w=new V0;w.seed(m.$e()),mp.Te.ce(d,w.qe(t.kind)),c.push(w)}return c}ln(e,t){return!!e.filters.find(r=>r instanceof Se&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Hb(e),s=B0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const d=[];return oe.forEach(c,m=>s.get([m.indexId,this.uid]).next(w=>{d.push(function(b,S){const P=S?new op(S.sequenceNumber,new Ms(pp(S.readTime),new Ze(hc(S.documentKey)),S.largestBatchId)):op.empty(),V=b.fields.map(([q,ee])=>new sp($n.fromServerFormat(q),ee));return new Ml(b.indexId,b.collectionGroup,V,P)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const c=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==c?c:Mt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Hb(e),c=B0(e);return this._n(e).next(d=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,w=>c.put(B1(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(s,c)=>{const d=r.get(s.collectionGroup);return(d?oe.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),oe.forEach(m,w=>this.wn(e,s,w).next(b=>{const S=this.mn(c,w);return b.isEqual(S)?oe.resolve():this.gn(e,c,w,b,S)}))))})}yn(e,t,r,s){return U0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return U0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=U0(e);let c=new En(yp);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{c=c.add(new _p(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>c)}mn(e,t){let r=new En(yp);const s=this.an(t,e);if(null==s)return r;const c=ch(t);if(null!=c){const d=e.data.field(c.fieldPath);if(lp(d))for(const m of d.arrayValue.values||[])r=r.add(new _p(t.indexId,e.key,this.on(m),s))}else r=r.add(new _p(t.indexId,e.key,jb,s));return r}gn(e,t,r,s,c){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,b,S,P){const V=m.getIterator(),q=w.getIterator();let ee=Pl(V),Oe=Pl(q);for(;ee||Oe;){let Pe=!1,st=!1;if(ee&&Oe){const Tt=b(ee,Oe);Tt<0?st=!0:Tt>0&&(Pe=!0)}else null!=ee?st=!0:Pe=!0;Pe?(S(Oe),Oe=Pl(q)):st?(P(ee),ee=Pl(V)):(ee=Pl(V),Oe=Pl(q))}}(s,c,yp,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),oe.waitFor(d)}_n(e){let t=1;return B0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,c)=>{c.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>yp(d,m)).filter((d,m,w)=>!m||0!==yp(d,w[m-1]));const s=[];s.push(e);for(const d of r){const m=yp(d,e),w=yp(d,t);if(0===m)s[0]=e.Ke();else if(m>0&&w<0)s.push(d),s.push(d.Ke());else if(w>0)break}s.push(t);const c=[];for(let d=0;d<s.length;d+=2)c.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,jb,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,jb,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(G1)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||et())).next(G1)}}function q1(n){return mi(n,"collectionParents")}function U0(n){return mi(n,"indexEntries")}function Hb(n){return mi(n,"indexConfiguration")}function B0(n){return mi(n,"indexState")}function G1(n){Et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Bm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ms(e.readTime,e.documentKey,t)}const z1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ps(e,Ps.DEFAULT_COLLECTION_PERCENTILE,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function W1(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),c=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(S,P,V)=>(m++,V.delete()));c.push(w.next(()=>{Et(1===m)}));const b=[];for(const S of t.mutations){const P=P1(e,S.key.path,t.batchId);c.push(s.delete(P)),b.push(S.key)}return oe.waitFor(c).next(()=>b)}function $b(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Ps.DEFAULT_COLLECTION_PERCENTILE=10,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ps.DEFAULT=new Ps(41943040,Ps.DEFAULT_COLLECTION_PERCENTILE,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ps.DISABLED=new Ps(-1,0,0);class Zb{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){Et(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Zb(c,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).Z({index:"userMutationsIndex",range:r},(s,c,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const c=e_(e),d=mh(e);return d.add({}).next(m=>{Et("number"==typeof m);const w=new mA(m,t,r,s),b=function(V,q,ee){const Oe=ee.baseMutations.map(st=>k0(V.re,st)),Pe=ee.mutations.map(st=>k0(V.re,st));return{userId:q,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Oe,mutations:Pe}}(this.It,this.userId,w),S=[];let P=new En((V,q)=>Mt(V.canonicalString(),q.canonicalString()));for(const V of s){const q=P1(this.userId,V.key.path,m);P=P.add(V.key.path.popLast()),S.push(d.put(b)),S.push(c.put(q,AP))}return P.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),oe.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return mh(e).get(t).next(r=>r?(Et(r.userId===this.userId),gp(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return mh(e).Z({index:"userMutationsIndex",range:s},(d,m,w)=>{m.userId===this.userId&&(Et(m.batchId>=r),c=gp(this.It,m)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return mh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,c,d)=>{r=c.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).W("userMutationsIndex",t).next(r=>r.map(s=>gp(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vb(this.userId,t.path),s=IDBKeyRange.lowerBound(r),c=[];return e_(e).Z({range:s},(d,m,w)=>{const[b,S,P]=d,V=hc(S);if(b===this.userId&&t.path.isEqual(V))return mh(e).get(P).next(q=>{if(!q)throw et();Et(q.userId===this.userId),c.push(gp(this.It,q))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Mt);const s=[];return t.forEach(c=>{const d=Vb(this.userId,c.path),m=IDBKeyRange.lowerBound(d),w=e_(e).Z({range:m},(b,S,P)=>{const[V,q,ee]=b,Oe=hc(q);V===this.userId&&c.path.isEqual(Oe)?r=r.add(ee):P.done()});s.push(w)}),oe.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,c=Vb(this.userId,r),d=IDBKeyRange.lowerBound(c);let m=new En(Mt);return e_(e).Z({range:d},(w,b,S)=>{const[P,V,q]=w,ee=hc(V);P===this.userId&&r.isPrefixOf(ee)?ee.length===s&&(m=m.add(q)):S.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(c=>{s.push(mh(e).get(c).next(d=>{if(null===d)throw et();Et(d.userId===this.userId),r.push(gp(this.It,d))}))}),oe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return W1(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return e_(e).Z({range:r},(c,d,m)=>{if(c[0]===this.userId){const w=hc(c[1]);s.push(w)}else m.done()}).next(()=>{Et(0===s.length)})})}containsKey(e,t){return K1(e,this.userId,t)}Rn(e){return Y1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function K1(n,e,t){const r=Vb(e,t.path),s=r[1],c=IDBKeyRange.lowerBound(r);let d=!1;return e_(n).Z({range:c,X:!0},(m,w,b)=>{const[S,P,V]=m;S===e&&P===s&&(d=!0),b.done()}).next(()=>d)}function mh(n){return mi(n,"mutations")}function e_(n){return mi(n,"documentMutations")}function Y1(n){return mi(n,"mutationQueues")}class vp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new vp(0)}static vn(){return new vp(-1)}}class XP{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new vp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ct.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>t_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const c=[];return t_(e).Z((d,m)=>{const w=F0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,c.push(this.removeTargetData(e,w)))}).next(()=>oe.waitFor(c)).next(()=>s)}forEachTarget(e,t){return t_(e).Z((r,s)=>{const c=F0(s);t(c)})}Vn(e){return Q1(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}Sn(e,t){return Q1(e).put("targetGlobalKey",t)}Dn(e,t){return t_(e).put(V1(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=E(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return t_(e).Z({range:s,index:"queryTargetsIndex"},(d,m,w)=>{const b=F0(m);M(t,b.target)&&(c=b,w.done())}).next(()=>c)}addMatchingKeys(e,t,r){const s=[],c=_h(e);return t.forEach(d=>{const m=os(d.path);s.push(c.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,d))}),oe.waitFor(s)}removeMatchingKeys(e,t,r){const s=_h(e);return oe.forEach(t,c=>{const d=os(c.path);return oe.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=_h(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=_h(e);let c=Bt();return s.Z({range:r,X:!0},(d,m,w)=>{const b=hc(d[1]),S=new Ze(b);c=c.add(S)}).next(()=>c)}containsKey(e,t){const r=os(t.path),s=IDBKeyRange.bound([r],[g0(r)],!1,!0);let c=0;return _h(e).Z({index:"documentTargetsIndex",X:!0,range:s},([d,m],w,b)=>{0!==d&&(c++,b.done())}).next(()=>c>0)}se(e,t){return t_(e).get(t).next(r=>r?F0(r):null)}}function t_(n){return mi(n,"targets")}function Q1(n){return mi(n,"targetGlobal")}function _h(n){return mi(n,"targetDocuments")}function J1([n,e],[t,r]){const s=Mt(n,t);return 0===s?Mt(e,r):s}class eN{constructor(e){this.xn=e,this.buffer=new En(J1),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();J1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fo(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ic(r)}yield t.Fn(3e5)}))}}class nN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(fi.at);const r=new eN(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(z1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z1):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,c,d,m,w,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),s=this.params.maximumSequenceNumbersToCollect):s=P,d=Date.now(),this.nthSequenceNumber(e,s))).next(P=>(r=P,m=Date.now(),this.removeTargets(e,r,t))).next(P=>(c=P,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(b=Date.now(),d0()<=El.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${s} in `+(m-d)+`ms\n\tRemoved ${c} targets in `+(w-m)+`ms\n\tRemoved ${P} documents in `+(b-w)+`ms\nTotal Duration: ${b-S}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:c,documentsRemoved:P})))}}class rN{constructor(e,t){this.db=e,this.garbageCollector=new nN(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return qb(e,r)}removeReference(e,t,r){return qb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qb(e,t)}Gn(e,t){return function(r,s){let c=!1;return Y1(r).tt(d=>K1(r,d,s).next(m=>(m&&(c=!0),oe.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let c=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(b=>{if(!b)return c++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Ct.min()),_h(e).delete([0,os(d.path)])))});s.push(w)}}).next(()=>oe.waitFor(s)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qb(e,t)}Kn(e,t){const r=_h(e);let s,c=fi.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:b})=>{0===d?(c!==fi.at&&t(new Ze(hc(s)),c),c=b,s=w):c=fi.at}).next(()=>{c!==fi.at&&t(new Ze(hc(s)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qb(n,e){return _h(n).put((r=n.currentSequenceNumber,{targetId:0,path:os(e.path),sequenceNumber:r}));var r}class X1{constructor(){this.changes=new ph(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,p.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iN{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wp(e).put(r)}removeEntry(e,t,r){return wp(e).delete(function(s,c){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ub(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=p.newInvalidDocument(t);return wp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(j0(t))},(s,c)=>{r=this.jn(t,c)}).next(()=>r)}Wn(e,t){let r={size:0,document:p.newInvalidDocument(t)};return wp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(j0(t))},(s,c)=>{r={document:this.jn(t,c),size:$b(c)}}).next(()=>r)}getEntries(e,t){let r=Os();return this.zn(e,t,(s,c)=>{const d=this.jn(s,c);r=r.insert(s,d)}).next(()=>r)}Hn(e,t){let r=Os(),s=new Mn(Ze.comparator);return this.zn(e,t,(c,d)=>{const m=this.jn(c,d);r=r.insert(c,m),s=s.insert(c,$b(d))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let s=new En(rM);t.forEach(w=>s=s.add(w));const c=IDBKeyRange.bound(j0(s.first()),j0(s.last())),d=s.getIterator();let m=d.getNext();return wp(e).Z({index:"documentKeyIndex",range:c},(w,b,S)=>{const P=Ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&rM(m,P)<0;)r(m,null),m=d.getNext();m&&m.isEqual(P)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?S.j(j0(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Ub(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wp(e).W(IDBKeyRange.bound(s,c,!0)).next(d=>{let m=Os();for(const w of d){const b=this.jn(Ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,s){let c=Os();const d=nM(t,r),m=nM(t,Ms.max());return wp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,b,S)=>{const P=this.jn(Ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);c=c.insert(P.key,P),c.size===s&&S.done()}).next(()=>c)}newChangeBuffer(e){return new sN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tM(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Qn(e,t){return tM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function ZP(n,e){let t;if(e.document)t=D1(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),s=pp(e.noDocument.readTime);t=p.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ze.fromSegments(e.unknownDocument.path),s=pp(e.unknownDocument.version);t=p.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Hn(r[0],r[1]);return Ct.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return p.newInvalidDocument(e)}}function eM(n){return new iN(n)}class sN extends X1{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ph(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new En((c,d)=>Mt(c.canonicalString(),d.canonicalString()));return this.changes.forEach((c,d)=>{const m=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,m.readTime)),d.isValidDocument()){const w=L1(this.Yn.It,d);s=s.add(c.path.popLast()),r+=$b(w)-m.size,t.push(this.Yn.addEntry(e,c,w))}else if(r-=m.size,this.trackRemovals){const w=L1(this.Yn.It,d.convertToNoDocument(Ct.min()));t.push(this.Yn.addEntry(e,c,w))}}),s.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((c,d)=>{this.Xn.set(c,{size:d,readTime:r.get(c).readTime})}),r))}}function tM(n){return mi(n,"remoteDocumentGlobal")}function wp(n){return mi(n,"remoteDocumentsV14")}function j0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nM(n,e){const t=e.documentKey.path.toArray();return[n,Ub(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rM(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(s=Mt(t[c],r[c]),s)return s;return s=Mt(t.length,r.length),s||(s=Mt(t[t.length-2],r[r.length-2]),s||Mt(t[t.length-1],r[r.length-1]))}class oN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&A0(r.mutation,s,is.empty(),Hn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const s=lc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(c=>{let d=S0();return c.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=lc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const s=[];return r.forEach(c=>{t.has(c)||s.push(c)}),this.documentOverlayCache.getOverlays(e,s).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,s){let c=Os();const d=x0(),m=x0();return t.forEach((w,b)=>{const S=r.get(b.key);s.has(b.key)&&(void 0===S||S.mutation instanceof Fl)?c=c.insert(b.key,b):void 0!==S&&(d.set(b.key,S.mutation.getFieldMask()),A0(S.mutation,b,S.mutation.getFieldMask(),Hn.now()))}),this.recalculateAndSaveOverlays(e,c).next(w=>(w.forEach((b,S)=>d.set(b,S)),t.forEach((b,S)=>{var P;return m.set(b,new oN(S,null!==(P=d.get(b))&&void 0!==P?P:null))}),m))}recalculateAndSaveOverlays(e,t){const r=x0();let s=new Mn((d,m)=>d-m),c=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let S=r.get(w)||is.empty();S=m.applyToLocalView(b,S),r.set(w,S);const P=(s.get(m.batchId)||Bt()).add(w);s=s.insert(m.batchId,P)})}).next(()=>{const d=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,S=w.value,P=p1();S.forEach(V=>{if(!c.has(V)){const q=s1(t.get(V),r.get(V));null!==q&&P.set(V,q),c=c.add(V)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,P))}return oe.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):aA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(c=>{const d=s-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-c.size):oe.resolve(lc());let m=-1,w=c;return d.next(b=>oe.forEach(b,(S,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),c.get(S)?oe.resolve():this.getBaseDocument(e,S,P).next(V=>{w=w.insert(S,V)}))).next(()=>this.populateOverlays(e,b,c)).next(()=>this.computeViews(e,w,b,Bt())).next(S=>({batchId:m,changes:f1(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let s=S0();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let c=S0();return this.indexManager.getCollectionParents(e,s).next(d=>oe.forEach(d,m=>{const w=(b=t,S=m.child(s),new po(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((S,P)=>{c=c.insert(S,P)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(c=>(s=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(c=>{c.forEach((m,w)=>{const b=w.getKey();null===s.get(b)&&(s=s.insert(b,p.newInvalidDocument(b)))});let d=S0();return s.forEach((m,w)=>{const b=c.get(m);void 0!==b&&A0(b.mutation,w,is.empty(),Hn.now()),cA(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(p.newInvalidDocument(t))}}class aN{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:gi(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:vA(r.bundledQuery),readTime:gi(r.readTime)}),oe.resolve();var r}}class uN{constructor(){this.overlays=new Mn(Ze.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lc();return oe.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,c)=>{this.ue(e,t,c)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const s=lc(),c=t.length+1,d=new Ze(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===c&&w.largestBatchId>r&&s.set(w.getKey(),w)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let c=new Mn((b,S)=>b-S);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=c.get(b.largestBatchId);null===S&&(S=lc(),c=c.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=lc(),w=c.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=s)););return oe.resolve(m)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new yA(t,r));let c=this.es.get(t);void 0===c&&(c=Bt(),this.es.set(t,c)),this.es.set(t,c.add(r.key))}}class EA{constructor(){this.ns=new En(_i.ss),this.rs=new En(_i.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new _i(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new _i(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ze(new Qt([])),r=new _i(t,e),s=new _i(t,e+1),c=[];return this.rs.forEachInRange([r,s],d=>{this.cs(d),c.push(d.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ze(new Qt([])),r=new _i(t,e),s=new _i(t,e+1);let c=Bt();return this.rs.forEachInRange([r,s],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new _i(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class _i{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ze.comparator(e.key,t.key)||Mt(e._s,t._s)}static os(e,t){return Mt(e._s,t._s)||Ze.comparator(e.key,t.key)}}class cN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new En(_i.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const c=this.ws;this.ws++;const d=new mA(c,t,r,s);this.mutationQueue.push(d);for(const m of s)this.gs=this.gs.add(new _i(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),c=s<0?0:s;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _i(t,0),s=new _i(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([r,s],d=>{const m=this.ys(d._s);c.push(m)}),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Mt);return t.forEach(s=>{const c=new _i(s,0),d=new _i(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,d],m=>{r=r.add(m._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let c=r;Ze.isDocumentKey(c)||(c=c.child(""));const d=new _i(new Ze(c),0);let m=new En(Mt);return this.gs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w._s)),!0)},d),oe.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Et(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,s=>{const c=new _i(s.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new _i(t,0),s=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lN{constructor(e){this.Es=e,this.docs=new Mn(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),c=s?s.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():p.newInvalidDocument(t))}getEntries(e,t){let r=Os();return t.forEach(s=>{const c=this.docs.get(s);r=r.insert(s,c?c.document.mutableCopy():p.newInvalidDocument(s))}),oe.resolve(r)}getAllFromCollection(e,t,r){let s=Os();const c=new Ze(t.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Bm(YT(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){et()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dN(this)}getSize(e){return oe.resolve(this.size)}}class dN extends X1{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class hN{constructor(e){this.persistence=e,this.Rs=new ph(t=>E(t),M),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.bs=0,this.Ps=new EA,this.targetCount=0,this.vs=vp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new vp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let s=0;const c=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),oe.waitFor(c).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,c=[];return s&&t.forEach(d=>{c.push(s.markPotentiallyOrphaned(e,d))}),oe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class sM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new fi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new hN(this),this.indexManager=new QP,this.remoteDocumentCache=new lN(r=>this.referenceDelegate.xs(r)),this.It=new F1(t),this.Ns=new aN(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new cN(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const s=new fN(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(c=>this.referenceDelegate.Os(s).next(()=>c)).toPromise().then(c=>(s.raiseOnCommittedEvent(),c))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class fN extends Ib{constructor(e){super(),this.currentSequenceNumber=e}}class Gb{constructor(e){this.persistence=e,this.Fs=new EA,this.$s=null}static Bs(e){return new Gb(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(c=>this.Ls.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const s=Ze.fromPath(r);return this.Us(e,s).next(c=>{c||t.removeEntry(s,Ct.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class pN{constructor(e){this.It=e}$(e,t,r,s){const c=new m0("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O1,{unique:!0}),m.createObjectStore("documentMutations"),oM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=oe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),oM(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(c))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O1,{unique:!0});const S=w.store("mutations"),P=b.map(V=>S.put(V));return oe.waitFor(P)})}(e,c))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.qs(c))),r<6&&s>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),r<7&&s>=7&&(d=d.next(()=>this.Gs(c))),r<8&&s>=8&&(d=d.next(()=>this.Qs(e,c))),r<9&&s>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.js(c))),r<11&&s>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:UP});w.createIndex("collectionPathOverlayIndex",BP,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",jP,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:SP});w.createIndex("documentKeyIndex",xP),w.createIndex("collectionGroupIndex",MP)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.zs(e,c))),r<15&&s>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:kP}).createIndex("sequenceNumberIndex",FP,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:LP}).createIndex("documentKeyIndex",VP,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=$b(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>oe.forEach(s,c=>{const d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>oe.forEach(m,w=>{Et(w.userId===c.userId);const b=gp(this.It,w);return W1(e,c.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const c=[];return r.Z((d,m)=>{const w=new Qt(d),b=[0,os(w)];c.push(t.get(b).next(S=>S?oe.resolve():t.put({targetId:0,path:os(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>oe.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:RP});const r=t.store("collectionParents"),s=new CA,c=d=>{if(s.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:os(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Qt(d);return c(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],b)=>{const S=hc(m);return c(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const c=F0(s),d=V1(this.It,c);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((c,d)=>{const m=t.store("remoteDocumentsV14"),w=(b=d,b.document?new Ze(Qt.fromString(b.document.name).popFirst(5)):b.noDocument?Ze.fromSegments(b.noDocument.path):b.unknownDocument?Ze.fromSegments(b.unknownDocument.path):et()).path.toArray();var b;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(m.put(S))}).next(()=>oe.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=eM(this.It),c=new sM(Gb.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var b;let S=null!==(b=m.get(w.userId))&&void 0!==b?b:Bt();gp(this.It,w).keys().forEach(P=>S=S.add(P)),m.set(w.userId,S)}),oe.forEach(m,(w,b)=>{const S=new mn(b),P=Bb.oe(this.It,S),V=c.getIndexManager(S),q=Zb.oe(S,this.It,V,c.referenceDelegate);return new iM(s,q,P,V).recalculateAndSaveOverlaysForDocumentKeys(new gA(t,fi.at),w).next()})})}}function oM(n){n.createObjectStore("targetDocuments",{keyPath:PP}).createIndex("documentTargetsIndex",NP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",OP,{unique:!0}),n.createObjectStore("targetGlobal")}const bA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class IA{constructor(e,t,r,s,c,d,m,w,b,S,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=c,this.window=d,this.document=m,this.Js=b,this.Ys=S,this.Xs=P,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!IA.C())throw new Me(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rN(this,s),this.ii=t+"main",this.It=new F1(w),this.ri=new ea(this.ii,this.Xs,new pN(this.It)),this.Cs=new XP(this.referenceDelegate,this.It),this.remoteDocumentCache=eM(this.It),this.Ns=new qP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,bA);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new fi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fo(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return H0(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return zb(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=mi(r,"clientMetadata");return s.W().next(c=>{const d=e.Ii(c,18e5),m=c.filter(w=>-1===d.indexOf(w));return oe.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):H0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,bA);return!1}}return!(!this.networkEnabled||!this.inForeground)||zb(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new gA(t,fi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>zb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Zb.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new JP(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Bb.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",c=15===(d=this.Xs)?$P:14===d?k1:13===d?R1:12===d?HP:11===d?N1:void et();var d;let m;return this.ri.runTransaction(e,s,c,w=>(m=new gA(w,this.Ss?this.Ss.next():fi.at),"readwrite-primary"===t?this.fi(m).next(b=>!!b||this.di(m)).next(b=>{if(!b)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(ce.FAILED_PRECONDITION,bb);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return H0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ce.FAILED_PRECONDITION,bA)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return H0(e).put("owner",t)}static C(){return ea.C()}_i(e){const t=H0(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,rn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function H0(n){return mi(n,"owner")}function zb(n){return mi(n,"clientMetadata")}function DA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class TA{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Bt(),s=Bt();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:s=s.add(c.doc.key)}return new TA(e,t.fromCache,r,s)}}class aM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(c=>c||this.Oi(e,t,s,r)).next(c=>c||this.Mi(e,t))}ki(e,t){if(Gm(t))return oe.resolve(null);let r=ss(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Pb(t,null,"F"),r=ss(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const d=Bt(...c);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Fi(t,m);return this.$i(t,b,d,w.readTime)?this.ki(e,Pb(t,null,"F")):this.Bi(e,b,t,w)}))})))}Oi(e,t,r,s){return Gm(t)||s.isEqual(Ct.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(c=>{const d=this.Fi(t,c);return this.$i(t,d,r,s)?this.Mi(e,t):(d0()<=El.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),uA(t)),this.Bi(e,d,t,Eb(s,-1)))})}Fi(e,t){let r=new En(Yx(e));return t.forEach((s,c)=>{cA(e,c)&&(r=r.add(c))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(s)>0)}Mi(e,t){return d0()<=El.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",uA(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ms.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}class gN{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new Mn(Mt),this.qi=new ph(c=>E(c),M),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function uM(n,e,t,r){return new gN(n,e,t,r)}function cM(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,me.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(c=>(s=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let w=Bt();for(const b of s){d.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}for(const b of c){m.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(b=>({ji:b,removedBatchIds:d,addedBatchIds:m}))})})}),AA.apply(this,arguments)}function mN(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,b){const S=w.batch,P=S.keys();let V=oe.resolve();return P.forEach(q=>{V=V.next(()=>b.getEntry(m,q)).next(ee=>{const Oe=w.docVersions.get(q);Et(null!==Oe),ee.version.compareTo(Oe)<0&&(S.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),b.addEntry(ee)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(m,S))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Bt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function lM(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function _N(n,e){const t=Ge(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const m=[];e.targetChanges.forEach((S,P)=>{const V=s.get(P);if(!V)return;m.push(t.Cs.removeMatchingKeys(c,S.removedDocuments,P).next(()=>t.Cs.addMatchingKeys(c,S.addedDocuments,P)));let q=V.withSequenceNumber(c.currentSequenceNumber);var ee,Oe,Pe;e.targetMismatches.has(P)?q=q.withResumeToken(Tr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):S.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(S.resumeToken,r)),s=s.insert(P,q),Oe=q,Pe=S,(0===(ee=V).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(c,q))});let w=Os(),b=Bt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,S))}),m.push(dM(c,d,e.documentUpdates).next(S=>{w=S.Wi,b=S.zi})),!r.isEqual(Ct.min())){const S=t.Cs.getLastRemoteSnapshotVersion(c).next(P=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(S)}return oe.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,w,b)).next(()=>w)}).then(c=>(t.Ui=s,c))}function dM(n,e,t){let r=Bt(),s=Bt();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let d=Os();return t.forEach((m,w)=>{const b=c.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(Ct.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{Wi:d,zi:s}})}function yN(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function n_(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(c=>c?(s=c,oe.resolve(s)):t.Cs.allocateTargetId(r).next(d=>(s=new gh(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function r_(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,me.Z)(function*(n,e,t){const r=Ge(n),s=r.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!fo(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),SA.apply(this,arguments)}function Wb(n,e,t){const r=Ge(n);let s=Ct.min(),c=Bt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,b){const S=Ge(m),P=S.qi.get(b);return void 0!==P?oe.resolve(S.Ui.get(P)):S.Cs.getTargetData(w,b)}(r,d,ss(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{c=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?s:Ct.min(),t?c:Bt())).next(m=>(pM(r,Kx(e),m),{documents:m,Hi:c})))}function hM(n,e){const t=Ge(n),r=Ge(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",c=>r.se(c,e).next(d=>d?d.target:null))}function fM(n,e){const t=Ge(n),r=t.Ki.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Eb(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(pM(t,e,s),s))}function pM(n,e,t){let r=n.Ki.get(e)||Ct.min();t.forEach((s,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Ki.set(e,r)}function xA(){return xA=(0,me.Z)(function*(n,e,t,r){const s=Ge(n);let c=Bt(),d=Os();for(const b of t){const S=e.Ji(b.metadata.name);b.document&&(c=c.add(S));const P=e.Yi(b);P.setReadTime(e.Xi(b.metadata.readTime)),d=d.insert(S,P)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),w=yield n_(s,(b=r,ss(cc(Qt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>dM(b,m,d).next(S=>(m.apply(b),S)).next(S=>s.Cs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Cs.addMatchingKeys(b,c,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,S.Wi,S.zi)).next(()=>S.Wi)))}),xA.apply(this,arguments)}function wN(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,me.Z)(function*(n,e,t=Bt()){const r=yield n_(n,ss(vA(e.bundledQuery))),s=Ge(n);return s.persistence.runTransaction("Save named query","readwrite",c=>{const d=gi(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.Ns.saveNamedQuery(c,e);const m=r.withResumeToken(Tr.EMPTY_BYTE_STRING,d);return s.Ui=s.Ui.insert(m.targetId,m),s.Cs.updateTargetData(c,m).next(()=>s.Cs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>s.Cs.addMatchingKeys(c,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(c,e))})}),MA.apply(this,arguments)}function gM(n,e){return`firestore_clients_${n}_${e}`}function mM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function OA(n,e){return`firestore_targets_${n}_${e}`}class Kb{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let c,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(c=new Me(s.error.code,s.error.message))),d?new Kb(e,t,s.state,c):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Me(r.error.code,r.error.message))),c?new $0(e,r.state,s):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,c=Fb();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=xb(r.activeTargetIds[d]),c=c.add(r.activeTargetIds[d]);return s?new Yb(e,c):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class PA{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new PA(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class NA{constructor(){this.activeTargetIds=Fb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RA{constructor(e,t,r,s,c){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Mn(Mt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=gM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new NA),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const c=e.getItem(gM(e.persistenceKey,s));if(c){const d=Yb.Zi(s,c);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(OA(this.persistenceKey,e));if(r){const s=$0.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(OA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(c){let d=fi.at;if(null!=c)try{const m=JSON.parse(c);Et("number"==typeof m),d=m}catch(m){tr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);s!==fi.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new Kb(this.currentUser,e,t,r),c=mM(this.persistenceKey,this.currentUser,e);this.setItem(c,s.tr())}Er(e){const t=mM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=OA(this.persistenceKey,e),c=new $0(e,t,r);this.setItem(s,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Yb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return Kb.Zi(new mn(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return $0.Zi(s,t)}yr(e){return PA.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),c=this.Ir(r),d=[],m=[];return c.forEach(w=>{s.has(w)||d.push(w)}),s.forEach(w=>{c.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Fb();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class _M{constructor(){this.Lr=new NA,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new NA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CN{qr(e){}shutdown(){}}class yM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const EN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class IN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,c){const d=this.ho(e,t);Ne("RestConnection","Sending: ",d,r);const m={};return this.lo(m,s,c),this.fo(e,d,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw nc("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,s,c,d){return this.ao(e,t,r,s,c)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+oh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,c)=>e[c]=s),r&&r.headers.forEach((s,c)=>e[c]=s)}ho(e,t){return`${this.oo}/v1/${t}:${EN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((c,d)=>{const m=new l0;m.setWithCredentials(!0),m.listenOnce(gb.COMPLETE,()=>{var b;try{switch(m.getLastErrorCode()){case c0.NO_ERROR:const S=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(S)),c(S);break;case c0.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new Me(ce.DEADLINE_EXCEEDED,"Request time out"));break;case c0.HTTP_ERROR:const P=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',P,"response text:",m.getResponseText()),P>0){let V=m.getResponseJson();Array.isArray(V)&&(V=V[0]);const q=null===(b=V)||void 0===b?void 0:b.error;if(q&&q.status&&q.message){const ee=function(Oe){const Pe=Oe.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Pe)>=0?Pe:ce.UNKNOWN}(q.status);d(new Me(ee,q.message))}else d(new Me(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=jT(),d=$x(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new ho({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=s.join("");Ne("Connection","Creating WebChannel: "+w,m);const b=c.createWebChannel(w,m);let S=!1,P=!1;const V=new bN({Hr:ee=>{P?Ne("Connection","Not sending because WebChannel is closed:",ee):(S||(Ne("Connection","Opening WebChannel transport."),b.open(),S=!0),Ne("Connection","WebChannel sending:",ee),b.send(ee))},Jr:()=>b.close()}),q=(ee,Oe,Pe)=>{ee.listen(Oe,st=>{try{Pe(st)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return q(b,Um.EventType.OPEN,()=>{P||Ne("Connection","WebChannel transport opened.")}),q(b,Um.EventType.CLOSE,()=>{P||(P=!0,Ne("Connection","WebChannel transport closed"),V.io())}),q(b,Um.EventType.ERROR,ee=>{P||(P=!0,nc("Connection","WebChannel transport errored:",ee),V.io(new Me(ce.UNAVAILABLE,"The operation could not be completed")))}),q(b,Um.EventType.MESSAGE,ee=>{var Oe;if(!P){const Pe=ee.data[0];Et(!!Pe);const st=Pe,Tt=st.error||(null===(Oe=st[0])||void 0===Oe?void 0:Oe.error);if(Tt){Ne("Connection","WebChannel received error:",Tt);const Nt=Tt.status;let Rt=function(Zt){const ri=Br[Zt];if(void 0!==ri)return d1(ri)}(Nt),Ft=Tt.message;void 0===Rt&&(Rt=ce.INTERNAL,Ft="Unknown error status: "+Nt+" with message "+Tt.message),P=!0,V.io(new Me(Rt,Ft)),b.close()}else Ne("Connection","WebChannel received:",Pe),V.ro(Pe)}}),q(d,mb.STAT_EVENT,ee=>{ee.stat===HT.PROXY?Ne("Connection","Detected buffering proxy"):ee.stat===HT.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function vM(){return typeof window<"u"?window:null}function Qb(){return typeof document<"u"?document:null}function Z0(n){return new gP(n,!0)}class kA{constructor(e,t,r=1e3,s=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class wM{constructor(e,t,r,s,c,d,m,w){this.Hs=e,this.vo=r,this.Vo=s,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new kA(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Me(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DN extends wM{constructor(e,t,r,s,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.It=c}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function yP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),s=e.targetChange.targetIds||[],c=function(w,b){return w.gt?(Et(void 0===b||"string"==typeof b),Tr.fromBase64String(b||"")):(Et(void 0===b||b instanceof Uint8Array),Tr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const b=void 0===w.code?ce.UNKNOWN:d1(w.code);return new Me(b,w.message||"")}(d);t=new m1(r,s,c,m||null)}else if("documentChange"in e){const r=e.documentChange,s=dc(n,r.document.name),c=gi(r.document.updateTime),d=new l({mapValue:{fields:r.document.fields}}),m=p.newFoundDocument(s,c,d);t=new Lb(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=dc(n,r.document),c=r.readTime?gi(r.readTime):Ct.min(),d=p.newNoDocument(s,c);t=new Lb([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=dc(n,r.document);t=new Lb([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return et();{const r=e.filter,c=new aP(r.count||0);t=new g1(r.targetId,c)}}var w;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return Ct.min();const c=s.targetChange;return c.targetIds&&c.targetIds.length?Ct.min():c.readTime?gi(c.readTime):Ct.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=R0(this.It),t.addTarget=function(s,c){let d;const m=c.target;return d=R(m)?{documents:T1(s,m)}:{query:pA(s,m)},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?d.resumeToken=w1(s,c.resumeToken):c.snapshotVersion.compareTo(Ct.min())>0&&(d.readTime=P0(s,c.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function wP(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=R0(this.It),t.removeTarget=e,this.Bo(t)}}class TN extends wM{constructor(e,t,r,s,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.It=c,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function vP(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,s){let c=gi(r.updateTime?r.updateTime:s);return c.isEqual(Ct.min())&&(c=gi(s)),new iP(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.Zo(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=R0(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>k0(this.It,r))};this.Bo(t)}}class AN extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.ao(e,t,r,s,c)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(ce.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection._o(e,t,r,c,d,s)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Me(ce.UNKNOWN,c.toString())})}terminate(){this.nu=!0}}class xN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(tr(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class MN{constructor(e,t,r,s,c){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=c,this.mu.qr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;Ll(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(b){const S=Ge(b);S._u.add(4),yield i_(S),S.gu.set("Unknown"),S._u.delete(4),yield q0(S)}),function(b){return w.apply(this,arguments)})(d))}))}),this.gu=new xN(r,s)}}function q0(n){return LA.apply(this,arguments)}function LA(){return LA=(0,me.Z)(function*(n){if(Ll(n))for(const e of n.wu)yield e(!0)}),LA.apply(this,arguments)}function i_(n){return VA.apply(this,arguments)}function VA(){return VA=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),VA.apply(this,arguments)}function Jb(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),jA(t)?BA(t):o_(t).ko()&&UA(t,e))}function G0(n,e){const t=Ge(n),r=o_(t);t.du.delete(e),r.ko()&&CM(t,e),0===t.du.size&&(r.ko()?r.Fo():Ll(t)&&t.gu.set("Unknown"))}function UA(n,e){n.yu.Mt(e.targetId),o_(n).zo(e)}function CM(n,e){n.yu.Mt(e),o_(n).Ho(e)}function BA(n){n.yu=new hP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),o_(n).start(),n.gu.uu()}function jA(n){return Ll(n)&&!o_(n).No()&&n.du.size>0}function Ll(n){return 0===Ge(n)._u.size}function EM(n){n.yu=void 0}function ON(n){return HA.apply(this,arguments)}function HA(){return HA=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{UA(n,e)})}),HA.apply(this,arguments)}function PN(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,me.Z)(function*(n,e){EM(n),jA(n)?(n.gu.hu(e),BA(n)):n.gu.set("Unknown")}),$A.apply(this,arguments)}function NN(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof m1&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(s,c){const d=c.cause;for(const m of c.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,d),s.du.delete(m),s.yu.removeTarget(m))}),function(s,c){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xb(n,r)}else if(e instanceof Lb?n.yu.Gt(e):e instanceof g1?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ct.min()))try{const r=yield lM(n.localStore);t.compareTo(r)>=0&&(yield function(s,c){const d=s.yu.te(c);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.du.get(w);b&&s.du.set(w,b.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach(m=>{const w=s.du.get(m);if(!w)return;s.du.set(m,w.withResumeToken(Tr.EMPTY_BYTE_STRING,w.snapshotVersion)),CM(s,m);const b=new gh(w.target,m,1,w.sequenceNumber);UA(s,b)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield Xb(n,r)}var r}),ZA.apply(this,arguments)}function Xb(n,e,t){return qA.apply(this,arguments)}function qA(){return qA=(0,me.Z)(function*(n,e,t){if(!fo(e))throw e;n._u.add(1),yield i_(n),n.gu.set("Offline"),t||(t=()=>lM(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield q0(n)}))}),qA.apply(this,arguments)}function bM(n,e){return e().catch(t=>Xb(n,t,e))}function s_(n){return GA.apply(this,arguments)}function GA(){return GA=(0,me.Z)(function*(n){const e=Ge(n),t=yh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;RN(e);)try{const s=yield yN(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,kN(e,s)}catch(s){yield Xb(e,s)}IM(e)&&DM(e)}),GA.apply(this,arguments)}function RN(n){return Ll(n)&&n.fu.length<10}function kN(n,e){n.fu.push(e);const t=yh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function IM(n){return Ll(n)&&!yh(n).No()&&n.fu.length>0}function DM(n){yh(n).start()}function FN(n){return zA.apply(this,arguments)}function zA(){return zA=(0,me.Z)(function*(n){yh(n).eu()}),zA.apply(this,arguments)}function LN(n){return WA.apply(this,arguments)}function WA(){return WA=(0,me.Z)(function*(n){const e=yh(n);for(const t of n.fu)e.Xo(t.mutations)}),WA.apply(this,arguments)}function VN(n,e,t){return KA.apply(this,arguments)}function KA(){return KA=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),s=_A.from(r,e,t);yield bM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield s_(n)}),KA.apply(this,arguments)}function UN(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,me.Z)(function*(n,e){var t;e&&yh(n).Yo&&(yield(t=(0,me.Z)(function*(r,s){if(l1(c=s.code)&&c!==ce.ABORTED){const d=r.fu.shift();yh(r).Mo(),yield bM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield s_(r)}var c}),function(r,s){return t.apply(this,arguments)})(n,e)),IM(n)&&DM(n)}),YA.apply(this,arguments)}function TM(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,me.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Ll(t);t._u.add(3),yield i_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield q0(t)}),QA.apply(this,arguments)}function JA(n,e){return XA.apply(this,arguments)}function XA(){return XA=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield q0(t)):e||(t._u.add(2),yield i_(t),t.gu.set("Unknown"))}),XA.apply(this,arguments)}function o_(n){return n.pu||(n.pu=function(e,t,r){const s=Ge(e);return s.su(),new DN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:ON.bind(null,n),Zr:PN.bind(null,n),Wo:NN.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),jA(n)?BA(n):n.gu.set("Unknown")):(yield n.pu.stop(),EM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function yh(n){return n.Iu||(n.Iu=function(e,t,r){const s=Ge(e);return s.su(),new TN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:FN.bind(null,n),Zr:UN.bind(null,n),tu:LN.bind(null,n),Zo:VN.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield s_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class eS{constructor(e,t,r,s,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=c,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,c){const d=Date.now()+r,m=new eS(e,t,d,s,c);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a_(n,e){if(tr("AsyncQueue",`${e}: ${n}`),fo(n))return new Me(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class u_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=S0(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new u_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof u_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(!s.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new u_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class AM{constructor(){this.Tu=new Mn(Ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class c_{constructor(e,t,r,s,c,d,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new c_(e,t,u_.emptySet(t),d,r,s,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&D0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class BN{constructor(){this.Au=void 0,this.listeners=[]}}class jN{constructor(){this.queries=new ph(e=>Wx(e),D0),this.onlineState="Unknown",this.Ru=new Set}}function tS(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let s=!1,c=t.queries.get(r);if(c||(s=!0,c=new BN),s)try{c.Au=yield t.onListen(r)}catch(d){const m=a_(d,`Initialization of query '${uA(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,c),c.listeners.push(e),e.bu(t.onlineState),c.Au&&e.Pu(c.Au)&&sS(t)}),nS.apply(this,arguments)}function rS(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let s=!1;const c=t.queries.get(r);if(c){const d=c.listeners.indexOf(e);d>=0&&(c.listeners.splice(d,1),s=0===c.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),iS.apply(this,arguments)}function HN(n,e){const t=Ge(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const m of d.listeners)m.Pu(s)&&(r=!0);d.Au=s}}r&&sS(t)}function $N(n,e,t){const r=Ge(n),s=r.queries.get(e);if(s)for(const c of s.listeners)c.onError(t);r.queries.delete(e)}function sS(n){n.Ru.forEach(e=>{e.next()})}class oS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new c_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=c_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class ZN{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class SM{constructor(e){this.It=e}Ji(e){return dc(this.It,e)}Yi(e){return e.metadata.exists?D1(this.It,e.document,!1):p.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return gi(e)}}class qN{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Qt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new SM(this.It);for(const s of e)if(s.metadata.queries){const c=r.Ji(s.metadata.name);for(const d of s.metadata.queries){const m=(t.get(d)||Bt()).add(c);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function vN(n,e,t,r){return xA.apply(this,arguments)}(e.localStore,new SM(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield wN(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function xM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MM{constructor(e){this.key=e}}class OM{constructor(e){this.key=e}}class PM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Bt(),this.mutatedKeys=Bt(),this.Gu=Yx(e),this.Qu=new u_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new AM,s=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,d=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,P)=>{const V=s.get(S),q=cA(this.query,P)?P:null,ee=!!V&&this.mutatedKeys.has(V.key),Oe=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Pe=!1;V&&q?V.data.isEqual(q.data)?ee!==Oe&&(r.track({type:3,doc:q}),Pe=!0):this.Hu(V,q)||(r.track({type:2,doc:q}),Pe=!0,(w&&this.Gu(q,w)>0||b&&this.Gu(q,b)<0)&&(m=!0)):!V&&q?(r.track({type:0,doc:q}),Pe=!0):V&&!q&&(r.track({type:1,doc:V}),Pe=!0,(w||b)&&(m=!0)),Pe&&(q?(d=d.add(q),c=Oe?c.add(S):c.delete(S)):(d=d.delete(S),c=c.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),c=c.delete(S.key),r.track({type:1,doc:S})}return{Qu:d,zu:r,$i:m,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Eu();c.sort((b,S)=>function(P,V){const q=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return q(P)-q(V)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==c.length||w?{snapshot:new c_(this.query,e.Qu,s,c,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new AM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Bt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new OM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new MM(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Bt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return c_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class GN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class zN{constructor(e){this.key=e,this.nc=!1}}class WN{constructor(e,t,r,s,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new ph(m=>Wx(m),D0),this.rc=new Map,this.oc=new Set,this.uc=new Mn(Ze.comparator),this.cc=new Map,this.ac=new EA,this.hc={},this.lc=new Map,this.fc=vp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function KN(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,me.Z)(function*(n,e){const t=MS(n);let r,s;const c=t.ic.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),s=c.view.ec();else{const d=yield n_(t.localStore,ss(e));t.isPrimaryClient&&Jb(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield uS(t,e,r,"current"===m,d.resumeToken)}return s}),aS.apply(this,arguments)}function uS(n,e,t,r,s){return cS.apply(this,arguments)}function cS(){return cS=(0,me.Z)(function*(n,e,t,r,s){n._c=(P,V,q)=>{return(ee=(0,me.Z)(function*(Oe,Pe,st,Tt){let Nt=Pe.view.Wu(st);Nt.$i&&(Nt=yield Wb(Oe.localStore,Pe.query,!1).then(({documents:Zt})=>Pe.view.Wu(Zt,Nt)));const Rt=Tt&&Tt.targetChanges.get(Pe.targetId),Ft=Pe.view.applyChanges(Nt,Oe.isPrimaryClient,Rt);return vS(Oe,Pe.targetId,Ft.Xu),Ft.snapshot}),function(Oe,Pe,st,Tt){return ee.apply(this,arguments)})(n,P,V,q);var ee};const c=yield Wb(n.localStore,e,!0),d=new PM(e,c.Hi),m=d.Wu(c.documents),w=O0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=d.applyChanges(m,n.isPrimaryClient,w);vS(n,t,b.Xu);const S=new GN(e,t,d);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),cS.apply(this,arguments)}function YN(n,e){return lS.apply(this,arguments)}function lS(){return lS=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(c=>!D0(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield r_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),G0(t.remoteStore,r.targetId),l_(t,r.targetId)}).catch(ic))):(l_(t,r.targetId),yield r_(t.localStore,r.targetId,!0))}),lS.apply(this,arguments)}function dS(){return dS=(0,me.Z)(function*(n,e,t){const r=OS(n);try{const s=yield function(c,d){const m=Ge(c),w=Hn.now(),b=d.reduce((V,q)=>V.add(q.key),Bt());let S,P;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let q=Os(),ee=Bt();return m.Gi.getEntries(V,b).next(Oe=>{q=Oe,q.forEach((Pe,st)=>{st.isValidDocument()||(ee=ee.add(Pe))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,q)).next(Oe=>{S=Oe;const Pe=[];for(const st of d){const Tt=oP(st,S.get(st.key).overlayedDocument);null!=Tt&&Pe.push(new Fl(st.key,Tt,h(Tt.value.mapValue),nr.exists(!0)))}return m.mutationQueue.addMutationBatch(V,w,Pe,d)}).next(Oe=>{P=Oe;const Pe=Oe.applyToLocalDocumentSet(S,ee);return m.documentOverlayCache.saveOverlays(V,Oe.batchId,Pe)})}).then(()=>({batchId:P.batchId,changes:f1(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,d,m){let w=c.hc[c.currentUser.toKey()];w||(w=new Mn(Mt)),w=w.insert(d,m),c.hc[c.currentUser.toKey()]=w}(r,s.batchId,t),yield Vl(r,s.changes),yield s_(r.remoteStore)}catch(s){const c=a_(s,"Failed to persist write");t.reject(c)}}),dS.apply(this,arguments)}function NM(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield _N(t.localStore,e);e.targetChanges.forEach((s,c)=>{const d=t.cc.get(c);d&&(Et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.nc=!0:s.modifiedDocuments.size>0?Et(d.nc):s.removedDocuments.size>0&&(Et(d.nc),d.nc=!1))}),yield Vl(t,r,e)}catch(r){yield ic(r)}}),hS.apply(this,arguments)}function RM(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((c,d)=>{const m=d.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(c,d){const m=Ge(c);m.onlineState=d;let w=!1;m.queries.forEach((b,S)=>{for(const P of S.listeners)P.bu(d)&&(w=!0)}),w&&sS(m)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function JN(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),c=s&&s.key;if(c){let d=new Mn(Ze.comparator);d=d.insert(c,p.newNoDocument(c,Ct.min()));const m=Bt().add(c),w=new M0(Ct.min(),new Map,new En(Mt),d,m);yield NM(r,w),r.uc=r.uc.remove(c),r.cc.delete(e),wS(r)}else yield r_(r.localStore,e,!1).then(()=>l_(r,e,t)).catch(ic)}),fS.apply(this,arguments)}function XN(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const s=yield mN(t.localStore,e);yS(t,r,null),_S(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vl(t,s)}catch(s){yield ic(s)}}),pS.apply(this,arguments)}function eR(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const s=yield function(c,d){const m=Ge(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,d).next(S=>(Et(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);yS(r,e,t),_S(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vl(r,s)}catch(s){yield ic(s)}}),gS.apply(this,arguments)}function mS(){return mS=(0,me.Z)(function*(n,e){const t=Ge(n);Ll(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const d=Ge(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=a_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),mS.apply(this,arguments)}function _S(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function yS(n,e,t){const r=Ge(n);let s=r.hc[r.currentUser.toKey()];if(s){const c=s.get(e);c&&(t?c.reject(t):c.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function l_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||kM(n,r)})}function kM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(G0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),wS(n))}function vS(n,e,t){for(const r of t)r instanceof MM?(n.ac.addReference(r.key,e),nR(n,r)):r instanceof OM?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||kM(n,r.key)):et()}function nR(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.oc.add(r),wS(n))}function wS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ze(Qt.fromString(e)),r=n.fc.next();n.cc.set(r,new zN(t)),n.uc=n.uc.insert(t,r),Jb(n.remoteStore,new gh(ss(cc(t.path)),r,2,fi.at))}}function Vl(n,e,t){return CS.apply(this,arguments)}function CS(){return CS=(0,me.Z)(function*(n,e,t){const r=Ge(n),s=[],c=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{d.push(r._c(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const S=TA.Ci(w.targetId,b);c.push(S)}}))}),yield Promise.all(d),r.sc.Wo(s),yield(m=(0,me.Z)(function*(w,b){const S=Ge(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>oe.forEach(b,V=>oe.forEach(V.Si,q=>S.persistence.referenceDelegate.addReference(P,V.targetId,q)).next(()=>oe.forEach(V.Di,q=>S.persistence.referenceDelegate.removeReference(P,V.targetId,q)))))}catch(P){if(!fo(P))throw P;Ne("LocalStore","Failed to update sequence numbers: "+P)}for(const P of b){const V=P.targetId;if(!P.fromCache){const q=S.Ui.get(V),Oe=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);S.Ui=S.Ui.insert(V,Oe)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,c))}),CS.apply(this,arguments)}function rR(n,e){return ES.apply(this,arguments)}function ES(){return ES=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield cM(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new Me(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vl(t,r.ji)}var s}),ES.apply(this,arguments)}function iR(n,e){const t=Ge(n),r=t.cc.get(e);if(r&&r.nc)return Bt().add(r.key);{let s=Bt();const c=t.rc.get(e);if(!c)return s;for(const d of c){const m=t.ic.get(d);s=s.unionWith(m.view.ju)}return s}}function sR(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield Wb(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&vS(t,e.targetId,s.Xu),s}),bS.apply(this,arguments)}function oR(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,me.Z)(function*(n,e){const t=Ge(n);return fM(t.localStore,e).then(r=>Vl(t,r))}),IS.apply(this,arguments)}function aR(n,e,t,r){return DS.apply(this,arguments)}function DS(){return DS=(0,me.Z)(function*(n,e,t,r){const s=Ge(n),c=yield function(d,m){const w=Ge(d),b=Ge(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Tn(S,m).next(P=>P?w.localDocuments.getDocuments(S,P):oe.resolve(null)))}(s.localStore,e);var m;null!==c?("pending"===t?yield s_(s.remoteStore):"acknowledged"===t||"rejected"===t?(yS(s,e,r||null),_S(s,e),m=e,Ge(Ge(s.localStore).mutationQueue).An(m)):et(),yield Vl(s,c)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),DS.apply(this,arguments)}function TS(){return TS=(0,me.Z)(function*(n,e){const t=Ge(n);if(MS(t),OS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield FM(t,r.toArray());t.dc=!0,yield JA(t.remoteStore,!0);for(const c of s)Jb(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(l_(t,d),r_(t.localStore,d,!0))),G0(t.remoteStore,d)}),yield s,yield FM(t,r),function(c){const d=Ge(c);d.cc.forEach((m,w)=>{G0(d.remoteStore,w)}),d.ac.fs(),d.cc=new Map,d.uc=new Mn(Ze.comparator)}(t),t.dc=!1,yield JA(t.remoteStore,!1)}}),TS.apply(this,arguments)}function FM(n,e,t){return AS.apply(this,arguments)}function AS(){return AS=(0,me.Z)(function*(n,e,t){const r=Ge(n),s=[],c=[];for(const d of e){let m;const w=r.rc.get(d);if(w&&0!==w.length){m=yield n_(r.localStore,ss(w[0]));for(const b of w){const S=r.ic.get(b),P=yield sR(r,S);P.snapshot&&c.push(P.snapshot)}}else{const b=yield hM(r.localStore,d);m=yield n_(r.localStore,b),yield uS(r,LM(b),d,!1,m.resumeToken)}s.push(m)}return r.sc.Wo(c),s}),AS.apply(this,arguments)}function LM(n){return qm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function cR(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function lR(n,e,t,r){return SS.apply(this,arguments)}function SS(){return SS=(0,me.Z)(function*(n,e,t,r){const s=Ge(n);if(s.dc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const c=s.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=yield fM(s.localStore,Kx(c[0])),m=M0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Tr.EMPTY_BYTE_STRING);yield Vl(s,d,m);break}case"rejected":yield r_(s.localStore,e,!0),l_(s,e,r);break;default:et()}}),SS.apply(this,arguments)}function dR(n,e,t){return xS.apply(this,arguments)}function xS(){return xS=(0,me.Z)(function*(n,e,t){const r=MS(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Ne("SyncEngine","Adding an already active target "+s);continue}const c=yield hM(r.localStore,s),d=yield n_(r.localStore,c);yield uS(r,LM(c),d.targetId,!1,d.resumeToken),Jb(r.remoteStore,d)}for(const s of t)r.rc.has(s)&&(yield r_(r.localStore,s,!1).then(()=>{G0(r.remoteStore,s),l_(r,s)}).catch(ic))}}),xS.apply(this,arguments)}function MS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JN.bind(null,e),e.sc.Wo=HN.bind(null,e.eventManager),e.sc.wc=$N.bind(null,e.eventManager),e}function OS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eR.bind(null,e),e}class VM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Z0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return uM(this.persistence,new aM,e.initialUser,this.It)}yc(e){return new sM(Gb.Bs,this.It)}gc(e){return new _M}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class UM extends VM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield OS(r.Ac.syncEngine),yield s_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return uM(this.persistence,new aM,e.initialUser,this.It)}Tc(e,t){return new tN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new y0(t,this.persistence);return new Tb(e.asyncQueue,r)}yc(e){const t=DA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ps.withCacheSize(this.cacheSizeBytes):Ps.DEFAULT;return new IA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vM(),Qb(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new _M}}class fR extends UM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof RA&&(r.sharedClientState.syncEngine={Fr:aR.bind(null,s),$r:lR.bind(null,s),Br:dR.bind(null,s),vi:cR.bind(null,s),Mr:oR.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var c=(0,me.Z)(function*(d){yield function uR(n,e){return TS.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return c.apply(this,arguments)}}())})()}gc(e){const t=vM();if(!RA.C(t))throw new Me(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=DA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new RA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class PS{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>RM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=rR.bind(null,r.syncEngine),yield JA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jN}createDatastore(e){const t=Z0(e.databaseInfo.databaseId),r=new IN(e.databaseInfo);return new AN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,c=m=>RM(this.syncEngine,m,0),d=yM.C()?new yM:new CN,new MN(t,r,s,c,d);var t,r,s,c,d}createSyncEngine(e,t){return function(r,s,c,d,m,w,b){const S=new WN(r,s,c,d,m,w);return b&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield i_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function NS(n,e,t){if(!t)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BM(n,e,t,r){if(!0===e&&!0===r)throw new Me(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jM(n){if(!Ze.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HM(n){if(Ze.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eI(n);throw new Me(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $M(n,e){if(e<=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const ZM=new Map;class qM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,BM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new p0;switch(t.type){case"gapi":return new GT(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ZM.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),ZM.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class fc extends Ui{constructor(e,t,r){super(e,t,cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ze(e))}withConverter(e){return new fc(this.firestore,e,this._path)}}function zM(n,e,...t){if(n=(0,rn.m9)(n),NS("collection","path",e),n instanceof z0){const r=Qt.fromString(e,...t);return HM(r),new fc(n,null,r)}{if(!(n instanceof qn||n instanceof fc))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return HM(r),new fc(n.firestore,null,r)}}function tI(n,e,...t){if(n=(0,rn.m9)(n),1===arguments.length&&(e=WT.R()),NS("doc","path",e),n instanceof z0){const r=Qt.fromString(e,...t);return jM(r),new qn(n,null,new Ze(r))}{if(!(n instanceof qn||n instanceof fc))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return jM(r),new qn(n.firestore,n instanceof fc?n.converter:null,new Ze(r))}}function WM(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),(n instanceof qn||n instanceof fc)&&(e instanceof qn||e instanceof fc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RS(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&D0(n._query,e._query)&&n.converter===e.converter}function KM(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class nI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gR{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Dn,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const c=yield e.Cc(s);return new ZN(JSON.parse(c),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class yR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,me.Z)(function*(c,d){const m=Ge(c),w=R0(m.It)+"/documents",b={documents:d.map(q=>N0(m.It,q))},S=yield m._o("BatchGetDocuments",w,b,d.length),P=new Map;S.forEach(q=>{const ee=function _P(n,e){return"found"in e?function(t,r){Et(!!r.found);const s=dc(t,r.found.name),c=gi(r.found.updateTime),d=new l({mapValue:{fields:r.found.fields}});return p.newFoundDocument(s,c,d)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const s=dc(t,r.missing),c=gi(r.readTime);return p.newNoDocument(s,c)}(n,e):et()}(m.It,q);P.set(ee.key.toString(),ee)});const V=[];return d.forEach(q=>{const ee=P.get(q.toString());Et(!!ee),V.push(ee)}),V}),function(c,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const c=Ze.fromPath(s);e.mutations.push(new lA(c,e.precondition(c)))}),yield(r=(0,me.Z)(function*(s,c){const d=Ge(s),m=R0(d.It)+"/documents",w={writes:c.map(b=>k0(d.It,b))};yield d.ao("Commit",m,w)}),function(s,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?nr.exists(!1):nr.updateTime(t):nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Me(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nr.updateTime(t)}return nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class vR{constructor(e,t,r,s,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=c,this.kc=r.maxAttempts,this.xo=new kA(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new yR(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(c=>{e.Fc(c)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!dh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!l1(t)}return!1}}class wR{constructor(e,t,r,s){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=mn.UNAUTHENTICATED,this.clientId=WT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield c.authCredentialListener(m),c.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=a_(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function YM(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,me.Z)(function*(c){r.isEqual(c)||(yield cM(e.localStore,c),r=c)});return function(c){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kS.apply(this,arguments)}function QM(n,e){return FS.apply(this,arguments)}function FS(){return FS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LS(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>TM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,c)=>TM(e.remoteStore,c)),n.onlineComponents=e}),FS.apply(this,arguments)}function LS(n){return VS.apply(this,arguments)}function VS(){return VS=(0,me.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield YM(n,new VM)),n.offlineComponents}),VS.apply(this,arguments)}function rI(n){return US.apply(this,arguments)}function US(){return US=(0,me.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield QM(n,new PS)),n.onlineComponents}),US.apply(this,arguments)}function JM(n){return LS(n).then(e=>e.persistence)}function iI(n){return LS(n).then(e=>e.localStore)}function BS(n){return rI(n).then(e=>e.remoteStore)}function jS(n){return rI(n).then(e=>e.syncEngine)}function d_(n){return HS.apply(this,arguments)}function HS(){return HS=(0,me.Z)(function*(n){const e=yield rI(n),t=e.eventManager;return t.onListen=KN.bind(null,e.syncEngine),t.onUnlisten=YN.bind(null,e.syncEngine),t}),HS.apply(this,arguments)}function eO(n,e,t={}){const r=new Dn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,c,d,m,w){const b=new nI({next:P=>{c.enqueueAndForget(()=>rS(s,S));const V=P.docs.has(d);!V&&P.fromCache?w.reject(new Me(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&P.fromCache&&m&&"server"===m.source?w.reject(new Me(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),S=new oS(cc(d.path),b,{includeMetadataChanges:!0,Nu:!0});return tS(s,S)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}function tO(n,e,t={}){const r=new Dn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,c,d,m,w){const b=new nI({next:P=>{c.enqueueAndForget(()=>rS(s,S)),P.fromCache&&"server"===m.source?w.reject(new Me(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),S=new oS(d,b,{includeMetadataChanges:!0,Nu:!0});return tS(s,S)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}class SR{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new kA(this,"async_queue_retry"),this.Wc=()=>{const t=Qb();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Qb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Qb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Dn;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!fo(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,tr("INTERNAL UNHANDLED ERROR: ",function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=eS.createAndSchedule(this,e,t,r,c=>this.Yc(c));return this.qc.push(s),s}zc(){this.Kc&&et()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function $S(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class xR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends z0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new SR,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nO(this),this._firestoreClient.terminate()}}function Ar(n){return n._firestoreClient||nO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function nO(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new C0(n._databaseId,c,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var c,m;n._firestoreClient=new wR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function rO(n,e,t){const r=new Dn;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield YM(n,t),yield QM(n,e),r.resolve()}catch(s){const c=s;if(!("FirebaseError"===(d=c).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw c;nc("Error enabling offline persistence. Falling back to persistence disabled: "+c),r.reject(c)}var d})).then(()=>r.promise)}function iO(n){if(n._initialized||n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(Tr.fromBase64String(e))}catch(t){throw new Me(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pc(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ul{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cp{constructor(e){this._methodName=e}}class sI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const UR=/^__.*__$/;class BR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ym(e,this.data,t,this.fieldTransforms)}}class sO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class oI{constructor(e,t,r,s,c,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new oI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return cI(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(oO(this.sa)&&UR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class jR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Z0(e)}da(e,t,r,s=!1){return new oI({sa:e,methodName:t,fa:r,path:$n.emptyPath(),oa:!1,la:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ep(n){const e=n._freezeSettings(),t=Z0(n._databaseId);return new jR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aI(n,e,t,r,s,c={}){const d=n.da(c.merge||c.mergeFields?2:0,e,t,s);zS("Data must be an object, but it was:",d,r);const m=cO(r,d);let w,b;if(c.merge)w=new is(d.fieldMask),b=d.fieldTransforms;else if(c.mergeFields){const S=[];for(const P of c.mergeFields){const V=WS(e,P,t);if(!d.contains(V))throw new Me(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);dO(S,V)||S.push(V)}w=new is(S),b=d.fieldTransforms.filter(P=>w.covers(P.field))}else w=null,b=d.fieldTransforms;return new BR(new l(m),w,b)}class W0 extends Cp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof W0}}function aO(n,e,t){return new oI({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ZS extends Cp{_toFieldTransform(e){return new T0(e.path,new Wm)}isEqual(e){return e instanceof ZS}}class HR extends Cp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=aO(this,e,!0),r=this._a.map(c=>bp(c,t)),s=new dp(r);return new T0(e.path,s)}isEqual(e){return this===e}}class $R extends Cp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=aO(this,e,!0),r=this._a.map(c=>bp(c,t)),s=new hp(r);return new T0(e.path,s)}isEqual(e){return this===e}}class ZR extends Cp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Km(e.It,Xx(e.It,this.wa));return new T0(e.path,t)}isEqual(e){return this===e}}function qS(n,e,t,r){const s=n.da(1,e,t);zS("Data must be an object, but it was:",s,r);const c=[],d=l.empty();Qa(r,(w,b)=>{const S=uI(e,w,t);b=(0,rn.m9)(b);const P=s.ca(S);if(b instanceof W0)c.push(S);else{const V=bp(b,P);null!=V&&(c.push(S),d.set(S,V))}});const m=new is(c);return new sO(d,m,s.fieldTransforms)}function GS(n,e,t,r,s,c){const d=n.da(1,e,t),m=[WS(e,r,t)],w=[s];if(c.length%2!=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<c.length;V+=2)m.push(WS(e,c[V])),w.push(c[V+1]);const b=[],S=l.empty();for(let V=m.length-1;V>=0;--V)if(!dO(b,m[V])){const q=m[V];let ee=w[V];ee=(0,rn.m9)(ee);const Oe=d.ca(q);if(ee instanceof W0)b.push(q);else{const Pe=bp(ee,Oe);null!=Pe&&(b.push(q),S.set(q,Pe))}}const P=new is(b);return new sO(S,P,d.fieldTransforms)}function uO(n,e,t,r=!1){return bp(t,n.da(r?4:3,e))}function bp(n,e){if(lO(n=(0,rn.m9)(n)))return zS("Unsupported field value:",e,n),cO(n,e);if(n instanceof Cp)return function(t,r){if(!oO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let c=0;for(const d of t){let m=bp(d,r.aa(c));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),c++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xx(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Hn.fromDate(t);return{timestampValue:P0(r.It,s)}}if(t instanceof Hn){const s=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:P0(r.It,s)}}if(t instanceof sI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pc)return{bytesValue:w1(r.It,t._byteString)};if(t instanceof qn){const s=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(s))throw r.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${eI(t)}`)}(n,e)}function cO(n,e){const t={};return jm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(n,(r,s)=>{const c=bp(s,e.ra(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function lO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof sI||n instanceof pc||n instanceof qn||n instanceof Cp)}function zS(n,e,t){if(!lO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=eI(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function WS(n,e,t){if((e=(0,rn.m9)(e))instanceof Ul)return e._internalPath;if("string"==typeof e)return uI(n,e);throw cI("Field path arguments must be of type string or ",n,!1,void 0,t)}const qR=new RegExp("[~\\*/\\[\\]]");function uI(n,e,t){if(e.search(qR)>=0)throw cI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ul(...e.split("."))._internalPath}catch{throw cI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cI(n,e,t,r,s){const c=r&&!r.isEmpty(),d=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(c||d)&&(w+=" (found",c&&(w+=` in field ${r}`),d&&(w+=` in document ${s}`),w+=")"),new Me(ce.INVALID_ARGUMENT,m+n+w)}function dO(n,e){return n.some(t=>t.isEqual(e))}class K0{constructor(e,t,r,s,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new GR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class GR extends K0{data(){return super.data()}}function lI(n,e){return"string"==typeof e?uI(n,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}function hO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y0{}function vh(n,...e){for(const t of e)n=t._apply(n);return n}class zR extends Y0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Ep(e.firestore),r=function(s,c,d,m,w,b,S){let P;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){yO(S,b);const q=[];for(const ee of S)q.push(_O(m,s,ee));P={arrayValue:{values:q}}}else P=_O(m,s,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||yO(S,b),P=uO(d,"where",S,"in"===b||"not-in"===b);const V=Se.create(w,b,P);return function(q,ee){if(ee.dt()){const Pe=oA(q);if(null!==Pe&&!Pe.isEqual(ee.field))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${ee.field.toString()}'`);const st=sA(q);null!==st&&vO(0,ee.field,st)}const Oe=function(Pe,st){for(const Tt of Pe.filters)if(st.indexOf(Tt.op)>=0)return Tt.op;return null}(q,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Oe)throw new Me(ce.INVALID_ARGUMENT,Oe===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Oe.toString()}' filters.`)}(s,V),V}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ui(e.firestore,e.converter,function(s,c){const d=s.filters.concat([c]);return new po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),d,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class KR extends Y0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,s,c){if(null!==r.startAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new uc(s,c);return function(m,w){if(null===sA(m)){const b=oA(m);null!==b&&vO(0,b,w.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Ui(e.firestore,e.converter,function(r,s){const c=r.explicitOrderBy.concat([s]);return new po(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fO extends Y0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ui(e.firestore,e.converter,Pb(e._query,this.Ia,this.Ta))}}class pO extends Y0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=mO(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(s=t,new po((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class gO extends Y0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=mO(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(s=t,new po((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function mO(n,e,t,r){if(t[0]=(0,rn.m9)(t[0]),t[0]instanceof K0)return function(s,c,d,m,w){if(!m)throw new Me(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const S of zm(s))if(S.field.isKeyField())b.push(fh(c,m.key));else{const P=m.data.field(S.field);if(w0(P))throw new Me(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const V=S.field.canonicalString();throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}b.push(P)}return new na(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Ep(n.firestore);return function(c,d,m,w,b,S){const P=c.explicitOrderBy;if(b.length>P.length)throw new Me(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<b.length;q++){const ee=b[q];if(P[q].field.isKeyField()){if("string"!=typeof ee)throw new Me(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ee}`);if(!aA(c)&&-1!==ee.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ee}' contains a slash.`);const Oe=c.path.child(Qt.fromString(ee));if(!Ze.isDocumentKey(Oe))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Pe=new Ze(Oe);V.push(fh(d,Pe))}else{const Oe=uO(m,w,ee);V.push(Oe)}}return new na(V,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function _O(n,e,t){if("string"==typeof(t=(0,rn.m9)(t))){if(""===t)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aA(e)&&-1!==t.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!Ze.isDocumentKey(r))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fh(n,new Ze(r))}if(t instanceof qn)return fh(n,t._key);throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eI(t)}.`)}function yO(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vO(n,e,t){if(!t.isEqual(e))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class KS{convertValue(e,t="none"){switch(hh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return Qa(e.fields,(s,c)=>{r[s]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new sI(Zn(e.latitude),Zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Et(x1(r));const s=new Nl(r.get(1),r.get(3)),c=new Ze(r.popFirst(5));return s.isEqual(t)||tr(`Document ${c} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function dI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rk extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends K0{constructor(e,t,r,s,c,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Q0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Q0 extends Bl{data(e={}){return super.data(e)}}class wh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ip(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Q0(this._firestore,this._userDataWriter,r.key,r,new Ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Q0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const m=new Q0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),1!==d.type&&(c=c.add(d.doc),b=c.indexOf(d.doc.key)),{type:ik(d.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ik(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function wO(n,e){return n instanceof Bl&&e instanceof Bl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wh&&e instanceof wh&&n._firestore===e._firestore&&RS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ch extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function CO(n,e,t){n=tn(n,qn);const r=tn(n.firestore,Gn),s=dI(n.converter,e,t);return h_(r,[aI(Ep(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,nr.none())])}function EO(n,e,t,...r){n=tn(n,qn);const s=tn(n.firestore,Gn),c=Ep(s);let d;return d="string"==typeof(e=(0,rn.m9)(e))||e instanceof Ul?GS(c,"updateDoc",n._key,e,t,r):qS(c,"updateDoc",n._key,e),h_(s,[d.toMutation(n._key,nr.exists(!0))])}function bO(n,...e){var t,r,s;n=(0,rn.m9)(n);let c={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||$S(e[d])||(c=e[d],d++);const m={includeMetadataChanges:c.includeMetadataChanges};if($S(e[d])){const P=e[d];e[d]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[d+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[d+2]=null===(s=P.complete)||void 0===s?void 0:s.bind(P)}let w,b,S;if(n instanceof qn)b=tn(n.firestore,Gn),S=cc(n._key.path),w={next:P=>{e[d]&&e[d](YS(b,n,P))},error:e[d+1],complete:e[d+2]};else{const P=tn(n,Ui);b=tn(P.firestore,Gn),S=P._query;const V=new Ch(b);w={next:q=>{e[d]&&e[d](new wh(b,V,P,q))},error:e[d+1],complete:e[d+2]},hO(n._query)}return function(P,V,q,ee){const Oe=new nI(ee),Pe=new oS(V,Oe,q);return P.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return tS(yield d_(P),Pe)})),()=>{Oe.bc(),P.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return rS(yield d_(P),Pe)}))}}(Ar(b),S,m,w)}function h_(n,e){return function(t,r){const s=new Dn;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function QN(n,e,t){return dS.apply(this,arguments)}(yield jS(t),r,s)})),s.promise}(Ar(n),e)}function YS(n,e,t){const r=t.docs.get(e._key),s=new Ch(n);return new Bl(n,s,e._key,r,new Ip(t.hasPendingWrites,t.fromCache),e.converter)}const pk={maxAttempts:5};class IO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ep(e)}set(e,t,r){this._verifyNotCommitted();const s=Eh(e,this._firestore),c=dI(s.converter,t,r),d=aI(this._dataReader,"WriteBatch.set",s._key,c,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,nr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const c=Eh(e,this._firestore);let d;return d="string"==typeof(t=(0,rn.m9)(t))||t instanceof Ul?GS(this._dataReader,"WriteBatch.update",c._key,t,r,s):qS(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Eh(e,this._firestore);return this._mutations=this._mutations.concat(new Qm(t._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eh(n,e){if((n=(0,rn.m9)(n)).firestore!==e)throw new Me(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ep(e)}get(e){const t=Eh(e,this._firestore),r=new rk(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return et();const c=s[0];if(c.isFoundDocument())return new K0(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new K0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const s=Eh(e,this._firestore),c=dI(s.converter,t,r),d=aI(this._dataReader,"Transaction.set",s._key,c,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const c=Eh(e,this._firestore);let d;return d="string"==typeof(t=(0,rn.m9)(t))||t instanceof Ul?GS(this._dataReader,"Transaction.update",c._key,t,r,s):qS(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=Eh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Eh(e,this._firestore),r=new Ch(this._firestore);return super.get(e).then(s=>new Bl(this._firestore,r,t._key,s._document,new Ip(!1,!1),t.converter))}}function QS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TO(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function AO(){if(!function XT(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){oh=Yu.SDK_VERSION,(0,Yu._registerComponent)(new zg.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const c=t.getProvider("app").getImmediate(),d=new Gn(new qT(t.getProvider("auth-internal")),new zT(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Me(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(m.options.projectId,w)}(c,r),c);return s=Object.assign({useFetchStreams:e},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,Yu.registerVersion)(_b,"3.7.3",n),(0,Yu.registerVersion)(_b,"3.7.3","esm2017")}();class J0{constructor(e){this._delegate=e}static fromBase64String(e){return AO(),new J0(pc.fromBase64String(e))}static fromUint8Array(e){return TO(),new J0(pc.fromUint8Array(e))}toBase64(){return AO(),this._delegate.toBase64()}toUint8Array(){return TO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JS(n){return function Ik(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Dk{enableIndexedDbPersistence(e,t){return function OR(n,e){iO(n=tn(n,Gn));const t=Ar(n),r=n._freezeSettings(),s=new PS;return rO(t,s,new UM(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function PR(n){iO(n=tn(n,Gn));const e=Ar(n),t=n._freezeSettings(),r=new PS;return rO(e,r,new fR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function NR(n){if(n._initialized&&!n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!ea.C())return Promise.resolve();const s=r+"main";yield ea.delete(s)}),function(r){return t.apply(this,arguments)})(DA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class SO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&nc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function GM(n,e,t,r={}){var s;const c=(n=tn(n,z0))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&nc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=mn.MOCK_USER;else{d=(0,rn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Me(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new mn(w)}n._authCredentials=new Ka(new f0(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function kR(n){return function CR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield JM(n),t=yield BS(n);return e.setNetworkEnabled(!0),function(r){const s=Ge(r);return s._u.delete(0),q0(s)}(t)}))}(Ar(n=tn(n,Gn)))}(this._delegate)}disableNetwork(){return function FR(n){return function ER(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield JM(n),t=yield BS(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(s){const c=Ge(s);c._u.add(0),yield i_(c),c.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Ar(n=tn(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,BM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RR(n){return function(e){const t=new Dn;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function tR(n,e){return mS.apply(this,arguments)}(yield jS(e),t)})),t.promise}(Ar(n=tn(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function fk(n,e){return function DR(n,e){const t=new nI(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield d_(n),s=t,Ge(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield d_(n),s=t,void Ge(r).Ru.delete(s);var r,s}))}}(Ar(n=tn(n,Gn)),$S(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new f_(this,zM(this._delegate,e))}catch(t){throw as(t,"collection()","Firestore.collection()")}}doc(e){try{return new ra(this,tI(this._delegate,e))}catch(t){throw as(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new us(this,function pR(n,e){if(n=tn(n,z0),NS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new po(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw as(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function mk(n,e,t){n=tn(n,Gn);const r=Object.assign(Object.assign({},pk),t);return function(s){if(s.maxAttempts<1)throw new Me(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,c,d){const m=new Dn;return s.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const w=yield function XM(n){return rI(n).then(e=>e.datastore)}(s);new vR(s.asyncQueue,w,d,c,m).run()})),m.promise}(Ar(n),s=>e(new gk(n,s)),r)}(this._delegate,t=>e(new xO(this,t)))}batch(){return Ar(this._delegate),new MO(new IO(this._delegate,e=>h_(this._delegate,e)))}loadBundle(e){return function LR(n,e){const t=Ar(n=tn(n,Gn)),r=new xR;return function TR(n,e,t,r){const s=function(c,d){let m;return m="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,b){if(w instanceof Uint8Array)return KM(w,b);if(w instanceof ArrayBuffer)return KM(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new gR(w,d);var w}(t,Z0(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function hR(n,e,t){const r=Ge(n);var s;(s=(0,me.Z)(function*(c,d,m){try{const w=yield d.getMetadata();if(yield function(V,q){const ee=Ge(V),Oe=gi(q.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Pe=>ee.Ns.getBundleMetadata(Pe,q.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Oe)>=0)}(c.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=w).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(xM(w));const b=new qN(w,c.localStore,d.It);let S=yield d.mc();for(;S;){const V=yield b.Fu(S);V&&m._updateProgress(V),S=yield d.mc()}const P=yield b.complete();return yield Vl(c,P.Lu,void 0),yield function(V,q){const ee=Ge(V);return ee.persistence.runTransaction("Save bundle","readwrite",Oe=>ee.Ns.saveBundleMetadata(Oe,q))}(c.localStore,w),m._completeWith(P.progress),Promise.resolve(P.Bu)}catch(w){return nc("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var V}),function(c,d,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield jS(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function VR(n,e){return function AR(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const s=Ge(t);return s.persistence.runTransaction("Get named query","readonly",c=>s.Ns.getNamedQuery(c,r))}(yield iI(n),e)}))}(Ar(n=tn(n,Gn)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new us(this,t):null)}}class hI extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new J0(new pc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ra.forKey(t,this.firestore,null)}}class xO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hI(e)}get(e){const t=Tp(e);return this._delegate.get(t).then(r=>new X0(this._firestore,new Bl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Tp(e);return r?(QS("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=Tp(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=Tp(e);return this._delegate.delete(t),this}}class MO{constructor(e){this._delegate=e}set(e,t,r){const s=Tp(e);return r?(QS("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=Tp(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=Tp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Q0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ew(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let c=s.get(t);return c||(c=new Dp(e,new hI(e),t),s.set(t,c)),c}}Dp.INSTANCES=new WeakMap;class ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ra(t,new qn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new ra(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new f_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new f_(this.firestore,zM(this._delegate,e))}catch(t){throw as(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.m9)(e))instanceof qn&&WM(this._delegate,e)}set(e,t){t=QS("DocumentReference.set",t);try{return t?CO(this._delegate,e,t):CO(this._delegate,e)}catch(r){throw as(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EO(this._delegate,e):EO(this._delegate,e,t,...r)}catch(s){throw as(s,"updateDoc()","DocumentReference.update()")}}delete(){return function dk(n){return h_(tn(n.firestore,Gn),[new Qm(n._key,nr.none())])}(this._delegate)}onSnapshot(...e){const t=OO(e),r=PO(e,s=>new X0(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return bO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function ok(n){n=tn(n,qn);const e=tn(n.firestore,Gn),t=Ar(e),r=new Ch(e);return function bR(n,e){const t=new Dn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,c,d){try{const m=yield function(w,b){const S=Ge(w);return S.persistence.runTransaction("read document","readonly",P=>S.localDocuments.getDocument(P,b))}(s,c);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=a_(m,`Failed to get document '${c} from cache`);d.reject(w)}}),function(s,c,d){return r.apply(this,arguments)})(yield iI(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Bl(e,r,n._key,s,new Ip(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function ak(n){n=tn(n,qn);const e=tn(n.firestore,Gn);return eO(Ar(e),n._key,{source:"server"}).then(t=>YS(e,n,t))}(this._delegate):function sk(n){n=tn(n,qn);const e=tn(n.firestore,Gn);return eO(Ar(e),n._key).then(t=>YS(e,n,t))}(this._delegate),t.then(r=>new X0(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ra(this.firestore,this._delegate.withConverter(e?Dp.getInstance(this.firestore,e):null))}}function as(n,e,t){return n.message=n.message.replace(e,t),n}function OO(n){for(const e of n)if("object"==typeof e&&!JS(e))return e;return{}}function PO(n,e){var t,r;let s;return s=JS(n[0])?n[0]:JS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{s.next&&s.next(e(c))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class X0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wO(this._delegate,e._delegate)}}class ew extends X0{data(e){const t=this._delegate.data(e);return function ZT(n,e){n||et()}(void 0!==t),t}}class us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hI(e)}where(e,t,r){try{return new us(this.firestore,vh(this._delegate,function WR(n,e,t){const r=e,s=lI("where",n);return new zR(s,r,t)}(e,t,r)))}catch(s){throw as(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new us(this.firestore,vh(this._delegate,function YR(n,e="asc"){const t=e,r=lI("orderBy",n);return new KR(r,t)}(e,t)))}catch(r){throw as(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new us(this.firestore,vh(this._delegate,function QR(n){return $M("limit",n),new fO("limit",n,"F")}(e)))}catch(t){throw as(t,"limit()","Query.limit()")}}limitToLast(e){try{return new us(this.firestore,vh(this._delegate,function JR(n){return $M("limitToLast",n),new fO("limitToLast",n,"L")}(e)))}catch(t){throw as(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new us(this.firestore,vh(this._delegate,function XR(...n){return new pO("startAt",n,!0)}(...e)))}catch(t){throw as(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new us(this.firestore,vh(this._delegate,function ek(...n){return new pO("startAfter",n,!1)}(...e)))}catch(t){throw as(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new us(this.firestore,vh(this._delegate,function tk(...n){return new gO("endBefore",n,!1)}(...e)))}catch(t){throw as(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new us(this.firestore,vh(this._delegate,function nk(...n){return new gO("endAt",n,!0)}(...e)))}catch(t){throw as(t,"endAt()","Query.endAt()")}}isEqual(e){return RS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ck(n){n=tn(n,Ui);const e=tn(n.firestore,Gn),t=Ar(e),r=new Ch(e);return function IR(n,e){const t=new Dn;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,c,d){try{const m=yield Wb(s,c,!0),w=new PM(c,m.Hi),b=w.Wu(m.documents),S=w.applyChanges(b,!1);d.resolve(S.snapshot)}catch(m){const w=a_(m,`Failed to execute query '${c} against cache`);d.reject(w)}}),function(s,c,d){return r.apply(this,arguments)})(yield iI(n),e,t);var r})),t.promise}(t,n._query).then(s=>new wh(e,r,n,s))}(this._delegate):"server"===e?.source?function lk(n){n=tn(n,Ui);const e=tn(n.firestore,Gn),t=Ar(e),r=new Ch(e);return tO(t,n._query,{source:"server"}).then(s=>new wh(e,r,n,s))}(this._delegate):function uk(n){n=tn(n,Ui);const e=tn(n.firestore,Gn),t=Ar(e),r=new Ch(e);return hO(n._query),tO(t,n._query).then(s=>new wh(e,r,n,s))}(this._delegate),t.then(r=>new XS(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OO(e),r=PO(e,s=>new XS(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return bO(this._delegate,t,r)}withConverter(e){return new us(this.firestore,this._delegate.withConverter(e?Dp.getInstance(this.firestore,e):null))}}class Ak{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ew(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class XS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ew(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ak(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ew(this._firestore,r))})}isEqual(e){return wO(this._delegate,e._delegate)}}class f_ extends us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ra(this.firestore,e):null}doc(e){try{return new ra(this.firestore,void 0===e?tI(this._delegate):tI(this._delegate,e))}catch(t){throw as(t,"doc()","CollectionReference.doc()")}}add(e){return function hk(n,e){const t=tn(n.firestore,Gn),r=tI(n),s=dI(n.converter,e);return h_(t,[aI(Ep(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ra(this.firestore,t))}isEqual(e){return WM(this._delegate,e._delegate)}withConverter(e){return new f_(this.firestore,this._delegate.withConverter(e?Dp.getInstance(this.firestore,e):null))}}function Tp(n){return tn(n,qn)}class ex{constructor(...e){this._delegate=new Ul(...e)}static documentId(){return new ex($n.keyField().canonicalString())}isEqual(e){return(e=(0,rn.m9)(e))instanceof Ul&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yk(){return new ZS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ap(e)}static delete(){const e=function _k(){return new W0("deleteField")}();return e._methodName="FieldValue.delete",new Ap(e)}static arrayUnion(...e){const t=function vk(...n){return new HR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ap(t)}static arrayRemove(...e){const t=function wk(...n){return new $R("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ap(t)}static increment(e){const t=function Ck(n){return new ZR("increment",n)}(e);return t._methodName="FieldValue.increment",new Ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Sk={Firestore:SO,GeoPoint:sI,Timestamp:Hn,Blob:J0,Transaction:xO,WriteBatch:MO,DocumentReference:ra,DocumentSnapshot:X0,Query:us,QueryDocumentSnapshot:ew,QuerySnapshot:XS,CollectionReference:f_,FieldPath:ex,FieldValue:Ap,setLogLevel:function Tk(n){!function $T(n){Xo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function NO(n,e){return function Ok(n,e=sm.z){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function tx(n,e){return NO(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function fI(n,e){return tx(n,e).pipe($_(void 0),dv(),(0,pt.U)(([t,r])=>{const s=r.payload.docChanges(),c=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=s.find(S=>S.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||c.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),c}))}function RO(n,e,t){return fI(n,t).pipe(cl((r,s)=>function Nk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Rk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(c=>c.payload),e),[]),function sT(n,e=Ho.y){return n=n??IE,(0,Nn.e)((t,r)=>{let s,c=!0;t.subscribe((0,Cn.x)(r,d=>{const m=e(d);(c||!n(s,m))&&(c=!1,s=m,r.next(d))}))})}(),(0,pt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function nx(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function kO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Mk(n){(function xk(n,e){n.INTERNAL.registerComponent(new zg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},Sk)))})(n,(e,t)=>new SO(e,t,new Dk)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(oT.Z);class FO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=fI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe($_(void 0),dv(),wr(([r,s])=>s.length>0||!r),(0,pt.U)(([r,s])=>s),Fr.iC)}auditTrail(e){return this.stateChanges(e).pipe(cl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kO(e);return RO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}valueChanges(e={}){return tx(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fr.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(Fr.iC)}add(e){return this.ref.add(e)}doc(e){return new LO(this.ref.doc(e),this.afs)}}class LO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:c}=BO(r,t);return new FO(s,c,this.afs)}snapshotChanges(){return function Pk(n,e){return NO(n,e).pipe($_(void 0),dv(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(Fr.iC)}}class kk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?fI(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),wr(t=>t.length>0),Fr.iC):fI(this.query,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}auditTrail(e){return this.stateChanges(e).pipe(cl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kO(e);return RO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}valueChanges(e={}){return tx(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Fr.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(Fr.iC)}}const VO=new u.OlP("angularfire2.enableFirestorePersistence"),UO=new u.OlP("angularfire2.firestore.persistenceSettings"),Fk=new u.OlP("angularfire2.firestore.settings"),Lk=new u.OlP("angularfire2.firestore.use-emulator");function BO(n,e=(t=>t)){return{query:e(n),ref:n}}let pI=(()=>{class n{constructor(t,r,s,c,d,m,w,b,S,P,V,q,ee,Oe,Pe,st,Tt){this.schedulers=w;const Nt=(0,Ss.on)(t,m,r),Rt=S;P&&rT(Nt,m,V,ee,Oe,Pe,q,st),[this.firestore,this.persistenceEnabled$]=(0,Ss.cc)(`${Nt.name}.firestore`,"AngularFirestore",Nt.name,()=>{const Ft=m.runOutsideAngular(()=>Nt.firestore());if(c&&Ft.settings(c),Rt&&Ft.useEmulator(...Rt),s&&!hr(d)){const Zt=()=>{try{return(0,en.D)(Ft.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ri){return typeof console<"u"&&console.warn(ri),rt(!1)}};return[Ft,m.runOutsideAngular(Zt)]}return[Ft,rt(!1)]},[c,Rt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:d}=BO(s,r),m=this.schedulers.ngZone.run(()=>c);return new FO(m,d,this)}collectionGroup(t,r){const s=r||(d=>d),c=this.firestore.collectionGroup(t);return new kk(s(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new LO(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ss.Dh),u.LFG(Ss.xv,8),u.LFG(VO,8),u.LFG(Fk,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Fr.HU),u.LFG(UO,8),u.LFG(Lk,8),u.LFG(bE,8),u.LFG(wE,8),u.LFG(lv,8),u.LFG(CE,8),u.LFG(EE,8),u.LFG(tT,8),u.LFG(nT,8),u.LFG(av,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Vk=(()=>{class n{constructor(){yE.Z.registerVersion("angularfire",Fr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:VO,useValue:!0},{provide:UO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[pI]}),n})(),Ns=(()=>{class n{constructor(t,r,s){this.angularFireAuth=t,this.firestore=r,this.router=s,this.persistence="local",this.currUser=new Ti({name:"",email:"",parmissions:"0000"}),this.currUserId=new Ti({id:""}),t.authState.subscribe(c=>{this.userAuthData=c,this.firestore.collection("Users").doc(c?.uid).valueChanges().subscribe(d=>{this.userData=d,this.currUserId.next({id:c?.uid}),this.currUser.next(d)})}),this.items=r.collection("Users").snapshotChanges()}getUserId(){return this.currUserId}getUsers(){return this.items}addUser(t,r,s){var c=this;return(0,me.Z)(function*(){try{if(yield c.isUsernameTaken(s.name))throw new Error("Invalid username");const m=yield c.angularFireAuth.createUserWithEmailAndPassword(t,r);c.addUserData(m.user.uid,s),c.login(t,r)}catch(d){throw d}})()}updatePermissions(t,r){this.firestore.collection("Users").doc(r).update({permissions:t})}isUsernameTaken(t){return new Promise(r=>{this.firestore.collection("Users",s=>s.where("name","==",t)).valueChanges().subscribe(s=>r(s.length>0))})}addUserData(t,r){this.firestore.collection("Users").doc(t).set({...r})}getUserData(){return this.currUser}getUserByID(t){return this.firestore.collection("Users").doc(t).get()}getUserName(){return this.userData.name}login(t,r){var s=this;return(0,me.Z)(function*(){try{yield s.angularFireAuth.setPersistence(s.persistence),yield s.angularFireAuth.signInWithEmailAndPassword(t,r),console.log("logged in"),s.router.navigate(["home"])}catch(c){throw c}})()}signOut(){this.angularFireAuth.signOut().then(function(){},function(t){throw t})}getAuthenticated(){return this.angularFireAuth.authState}isLoggedIn(){return null!=this.userAuthData}log(){console.log(this.userAuthData)}isManager(){return"1"==this.userData?.permissions[1]}isAdmin(){return"1"==this.userData?.permissions[2]}isUser(){return"1"==this.userData?.permissions[0]}isBanned(){return"1"==this.userData?.permissions[3]}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bE),u.LFG(pI),u.LFG(on))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gI=function(n,e){return{true:n,false:e}};function Uk(n,e){if(1&n&&(u.TgZ(0,"div",10)(1,"div",2),u._uU(2),u.qZA(),u.TgZ(3,"div",3),u._uU(4),u.qZA(),u.TgZ(5,"div",11),u._uU(6),u.qZA(),u.TgZ(7,"div",12),u._uU(8),u.qZA(),u.TgZ(9,"div",13),u._uU(10),u.qZA(),u.TgZ(11,"div",14),u._uU(12),u.qZA(),u.TgZ(13,"div",15),u._uU(14,"Edit"),u.qZA()()),2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.email),u.xp6(1),u.Q6J("ngClass",u.WLB(11,gI,"1"==t.permissions[0],"1"!=t.permissions[0])),u.xp6(1),u.Oqu("1"==t.permissions[0]),u.xp6(1),u.Q6J("ngClass",u.WLB(14,gI,"1"==t.permissions[1],"1"!=t.permissions[1])),u.xp6(1),u.Oqu("1"==t.permissions[1]),u.xp6(1),u.Q6J("ngClass",u.WLB(17,gI,"1"==t.permissions[2],"1"!=t.permissions[2])),u.xp6(1),u.Oqu("1"==t.permissions[2]),u.xp6(1),u.Q6J("ngClass",u.WLB(20,gI,"1"==t.permissions[3],"1"!=t.permissions[3])),u.xp6(1),u.Oqu("1"==t.permissions[3]),u.xp6(1),u.MGl("routerLink","/admin/",t.key,"")}}let Bk=(()=>{class n{constructor(t){this.authService=t,this.users=[],this.authService.getUsers().subscribe(r=>{this.users=r.map(s=>({...s.payload.doc.data(),key:s.payload.doc.id}))})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ns))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-admin-panel"]],decls:16,vars:1,consts:[[1,"user-list"],[1,"user__element","user__element--header"],[1,"user__element__single","user__element__single--name"],[1,"user__element__single","user__element__single--email"],[1,"user__element__single","user__element__single--user"],[1,"user__element__single","user__element__single--manager"],[1,"user__element__single","user__element__single--admin"],[1,"user__element__single","user__element__single--banned"],[1,"user__element__single"],["class","user__element",4,"ngFor","ngForOf"],[1,"user__element"],[1,"user__element__single","user__element__single--user",3,"ngClass"],[1,"user__element__single","user__element__single--manager",3,"ngClass"],[1,"user__element__single","user__element__single--admin",3,"ngClass"],[1,"user__element__single","user__element__single--banned",3,"ngClass"],["routerLinkActive","active",1,"user__element__single","btn","btn--edit",3,"routerLink"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u._uU(3,"Name"),u.qZA(),u.TgZ(4,"div",3),u._uU(5,"Email"),u.qZA(),u.TgZ(6,"div",4),u._uU(7,"User"),u.qZA(),u.TgZ(8,"div",5),u._uU(9,"Manager"),u.qZA(),u.TgZ(10,"div",6),u._uU(11,"Admin"),u.qZA(),u.TgZ(12,"div",7),u._uU(13,"Banned"),u.qZA(),u._UZ(14,"div",8),u.qZA(),u.YNc(15,Uk,15,23,"div",9),u.qZA()),2&t&&(u.xp6(15),u.Q6J("ngForOf",r.users))},dependencies:[Ht,dr,di,Vi],styles:[".user-list[_ngcontent-%COMP%]{padding:1rem}.user__element[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:1rem}.user__element__single[_ngcontent-%COMP%]{text-align:center;width:calc(100% - 540px);min-width:100px}.user__element__single--email[_ngcontent-%COMP%]{min-width:200px}.user__element--header[_ngcontent-%COMP%]{font-weight:600}.btn[_ngcontent-%COMP%]{border-radius:10px;margin:0 5px;box-sizing:border-box}.btn--delete[_ngcontent-%COMP%]{background:var(--gradient-red)}.btn--edit[_ngcontent-%COMP%]{background:var(--gradient-yellow)}.true[_ngcontent-%COMP%]{color:var(--color-green)}.false[_ngcontent-%COMP%]{color:var(--color-red)}"]}),n})(),jl=(()=>{class n{constructor(t,r){this.authService=t,this.firestore=r,this.items=[],this.currUserKey="",this.sumOfQuantity=new Ti(0),this.history=new Ti([]);try{this.authService.currUserId.subscribe({next:s=>{if(this.currUserKey=s.id,""==this.currUserKey)try{throw Error("User not found")}catch{console.log("jajcujesz")}this.firestore.collection("History",d=>d.where("user","==",this.currUserKey)).valueChanges().subscribe({next:d=>{this.history.next(d)},error:d=>console.log("nie masno fest")})},error:s=>console.log("wtf")})}catch(s){if(s instanceof Error)throw s instanceof Error?console.log(s.message):console.log("Error occured"),s}}addToCart(t){let r=this.items.filter(s=>s.id==t.id);r.length>0?0==t.amount?this.items.splice(this.items.indexOf(r[0]),1):r[0].amount=t.amount:t.amount>0&&this.items.push(t),this.sumOfQuantity.next(this.items.reduce((s,c)=>c.amount+s,0))}deleteFromCart(t){t.amount=0,this.addToCart(t)}getItems(){return this.items}clearCart(){return this.items=[],this.items}tripInfoFactory(t){return function(s){return Object.entries(t).every(([c,d])=>"amount"===c||d===s[c])}}getAmountOfItem(t){let r=this.items.filter(s=>s.id==t);return r.length>0?r[0].amount:0}getSumOfQuantity(){return this.items.reduce((t,r)=>r.amount+t,0)}getSumOfQuantity2(){return this.sumOfQuantity.asObservable()}buyTrip(t){let r=new Date,s={tripId:t.id,amount:t.amount,buyPrice:t.price,buyDate:`${r.getDate()}-${r.getMonth()+1}-${r.getFullYear()}`,user:this.authService.userAuthData.uid};this.firestore.collection("History").add(s),this.deleteFromCart(t)}getHistory(){try{if(""==this.currUserKey)throw Error("User not found");return this.history.asObservable()}catch(t){throw t instanceof Error?console.log(t.message):console.log("Error occured"),t}}UserBoughtTrip(t){return this.history.getValue().filter(r=>r.user===this.authService.userAuthData.uid&&r.tripId==t).length<=0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ns),u.LFG(pI))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jk(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",4)(1,"div",5)(2,"div",6),u._UZ(3,"img",7),u.TgZ(4,"div",8),u._uU(5),u.ALo(6,"uppercase"),u.qZA()(),u.TgZ(7,"div",9)(8,"div",10),u._uU(9),u.ALo(10,"currency"),u.qZA(),u.TgZ(11,"div",11),u._uU(12),u.qZA()()(),u._UZ(13,"hr",12),u.TgZ(14,"div",13)(15,"div"),u._uU(16),u.ALo(17,"currency"),u.qZA(),u.TgZ(18,"div",14),u.NdJ("click",function(){const c=u.CHM(t).$implicit,d=u.oxw(2);return u.KtG(d.buyTrip(c))}),u._uU(19,"Buy"),u.qZA()()()}if(2&n){const t=e.$implicit;u.xp6(3),u.s9C("src",t.imgLink[0],u.LSH),u.xp6(2),u.Oqu(u.lcZ(6,5,t.name)),u.xp6(4),u.hij("",u.lcZ(10,7,t.price)," "),u.xp6(3),u.Oqu(t.amount),u.xp6(4),u.hij("Total: ",u.lcZ(17,9,t.price*t.amount),"")}}function Hk(n,e){if(1&n&&(u.TgZ(0,"div",2),u.YNc(1,jk,20,11,"div",3),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngForOf",t.items)}}function $k(n,e){1&n&&(u.TgZ(0,"div",15)(1,"p"),u._uU(2,"Cart is Empty :("),u.qZA()())}let Zk=(()=>{class n{constructor(t){this._cartService=t,this.items=this._cartService.getItems()}ngOnInit(){}buyTrip(t){this._cartService.buyTrip(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(jl))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-detailed-cart"]],decls:2,vars:2,consts:[["class","cartNotEmpty",4,"ngIf"],["class","cartEmpty",4,"ngIf"],[1,"cartNotEmpty"],["class","cart__item",4,"ngFor","ngForOf"],[1,"cart__item"],[1,"cart__item__container"],[1,"group","group--1"],["alt","",1,"item__img",3,"src"],[1,"item__name"],[1,"group","group--2"],[1,"item__price"],[1,"item__amount"],[1,"line"],[1,"cart__item__summary"],[1,"item__btn",3,"click"],[1,"cartEmpty"]],template:function(t,r){1&t&&(u.YNc(0,Hk,2,1,"div",0),u.YNc(1,$k,3,0,"div",1)),2&t&&(u.Q6J("ngIf",r.items.length>0),u.xp6(1),u.Q6J("ngIf",r.items.length<=0))},dependencies:[dr,fn,ua,Ci],styles:[".cartEmpty[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-size:1.5rem;color:gray;display:flex;justify-content:center;align-items:center;height:calc(100vh - 70px)}.cartNotEmpty[_ngcontent-%COMP%]{padding:2rem}.cart__item[_ngcontent-%COMP%]{border:2px var(--color-outline) solid;border-radius:10px;padding:1.2rem 2rem;width:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.2rem;margin-bottom:1.2rem}.cart__item__container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.cart__item__summary[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;align-items:flex-end;flex-direction:column}.item__img[_ngcontent-%COMP%]{width:70px;height:70px;object-fit:cover;border-radius:10px}.item__name[_ngcontent-%COMP%]{margin-left:1rem}.group--2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(1){margin-right:1rem}.item__amount[_ngcontent-%COMP%]{border:2px var(--color-outline) solid;border-radius:10px;width:50px;height:35px;display:flex;justify-content:center;align-items:center}.group[_ngcontent-%COMP%]{display:flex;align-items:center}.line[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:100%;background-color:var(--color-outline);height:1px;margin-top:.8rem}.item__btn[_ngcontent-%COMP%]{background:var(--gradient-green);display:flex;align-items:center;justify-content:center;padding:.5rem 2rem;border-radius:10px;margin-top:1rem;cursor:pointer}"]}),n})(),jO=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isAdmin()&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ns),u.LFG(on))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tw=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn()&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ns),u.LFG(on))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HO=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.getAuthenticated().pipe((0,pt.U)(s=>null===s||(this.router.navigate(["home"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ns),u.LFG(on))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bh=(()=>{class n{constructor(t,r){this.http=t,this.firestore=r,this.reviews=[],this.firestore.collection("Reviews").valueChanges().subscribe(s=>this.reviews=s)}addData(t){try{this.firestore.collection("Trips").add({...t})}catch{console.log("Error")}}getData(){return this.firestore.collection("Trips").snapshotChanges()}getTrip(t){return this.firestore.collection("Trips",r=>r.where("id","==",t)).snapshotChanges()}deleteData(t){this.firestore.collection("Trips").doc(t).delete()}modifyData(t,r){try{this.firestore.collection("Trips").doc(t).set(r)}catch{console.log("Error")}}getNextId(){return new Promise(t=>{this.firestore.collection("Trips",r=>r.orderBy("id","desc").limit(1)).valueChanges().subscribe(r=>t(r[0].id+1))})}getReviewsSingleTrip(t){return this.firestore.collection("Reviews",r=>r.where("tripId","==",t)).snapshotChanges()}getReview(t){return this.reviews.filter(r=>r.tripId==t)}addReview(t){this.firestore.collection("Reviews").add(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qs),u.LFG(pI))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$O=(()=>{class n{transform(t,r){return t?""==r?t:(r=r.toLowerCase(),t.filter(s=>s.destCountry.toLowerCase().includes(r))):[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"countryPipe",type:n,pure:!0}),n})(),ZO=(()=>{class n{transform(t,r,s){if(!t)return[];if(""==s&&""==r)return t;""==s&&(s="999999999999999"),""==r&&(r="0");let c=Number(s),d=Number(r);return t.filter(m=>m.price>=d).filter(m=>m.price<=c)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"pricePipe",type:n,pure:!0}),n})(),qO=(()=>{class n{transform(t,r,s){if(!t)return[];if(""==r&&""==s)return t;let c=""==r?new Date((new Date).toDateString()):new Date(r),d=""==s?new Date(new Date((new Date).setFullYear((new Date).getFullYear()+10)).toDateString()):new Date(s);return t.filter(m=>new Date(m.startDate)>=c).filter(m=>new Date(m.endDate)<=d)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"datePipe",type:n,pure:!0}),n})(),GO=(()=>{class n{transform(t,r){if(!t)return[];if(0==r.length)return t;let s=r.map(c=>Number(c));return t.filter(c=>{let d=c.reviews,m=d.length;if(0==m)return s.includes(0);let w=0;return d.forEach(b=>{0==b.raiting?m-=1:w+=b.raiting}),w=Math.round(w/m),s.includes(w)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"raitingPipe",type:n,pure:!0}),n})(),qk=(()=>{class n{getStatus(t,r){return new Date(t)<new Date?"finished":new Date(r)>new Date?"coming up":"active"}transform(t,r){return t?""==r?t:t.filter("finished"==r?s=>"finished"==this.getStatus(s.startDate,s.endDate):"active"==r?s=>"active"==this.getStatus(s.startDate,s.endDate):s=>"coming up"==this.getStatus(s.startDate,s.endDate)):[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"historyPipe",type:n,pure:!0}),n})();const Gk=function(n,e,t){return{red:n,green:e,yellow:t}};function zk(n,e){if(1&n&&(u.TgZ(0,"div",12)(1,"div",13),u._uU(2),u.qZA(),u.TgZ(3,"div",14),u._uU(4),u.qZA(),u.TgZ(5,"div",15),u._uU(6),u.qZA(),u.TgZ(7,"div",16),u._uU(8),u.qZA(),u.TgZ(9,"div",17),u._uU(10),u.qZA(),u.TgZ(11,"div",18)(12,"span",19),u._uU(13),u.qZA()()()),2&n){const t=e.$implicit,r=u.oxw();u.xp6(2),u.Oqu(t.buyPrice),u.xp6(2),u.Oqu(t.startDate),u.xp6(2),u.Oqu(t.endDate),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.amount),u.xp6(2),u.Q6J("ngClass",u.kEZ(7,Gk,"finished"==r.getStatus(t.startDate,t.endDate),"active"==r.getStatus(t.startDate,t.endDate),"coming up"==r.getStatus(t.startDate,t.endDate))),u.xp6(1),u.Oqu(r.getStatus(t.startDate,t.endDate))}}const rx=function(n){return{active:n}};let Wk=(()=>{class n{constructor(t,r){this._cartService=t,this._tripService=r,this.history=[],this.status="";try{this._cartService.getHistory().subscribe(s=>{this.history=[];for(let c=0;c<s.length;++c)this.history.push({...s[c],startDate:"",endDate:"",name:""}),this._tripService.getTrip(Number(s[c].tripId)).subscribe(d=>{let m=d.map(b=>({...b.payload.doc.data(),key:b.payload.doc.id,amount:0,reviews:[]}))[0],w=this.history.filter(b=>b.tripId==m.id);w.length>0&&w.forEach(b=>{b.startDate=m.startDate,b.endDate=m.endDate,b.name=m.name})})},s=>console.log("HTTP Error",s))}catch(s){s instanceof Error?alert(s.message):alert("Unknown error occured. Try again later.")}}ngOnInit(){}getStatus(t,r){return new Date(t)<new Date?"finished":new Date(r)>new Date?"coming up":"active"}setStatus(t){this.status=this.status==t?"":t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(jl),u.Y36(bh))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-history"]],decls:22,vars:13,consts:[[1,"filter"],[1,"btn","yellow",3,"ngClass","click"],[1,"btn","green",3,"ngClass","click"],[1,"btn","red",3,"ngClass","click"],[1,"labels"],[1,"label__price"],[1,"label__startDate"],[1,"label__endDate"],[1,"label__destCountry"],[1,"label__amount"],[1,"label__status"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"price"],[1,"startDate"],[1,"endDate"],[1,"name"],[1,"amount"],[1,"status"],[3,"ngClass"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u.NdJ("click",function(){return r.setStatus("coming up")}),u._uU(2,"coming up"),u.qZA(),u.TgZ(3,"div",2),u.NdJ("click",function(){return r.setStatus("active")}),u._uU(4,"active"),u.qZA(),u.TgZ(5,"div",3),u.NdJ("click",function(){return r.setStatus("finished")}),u._uU(6,"finished"),u.qZA()(),u.TgZ(7,"div",4)(8,"div",5),u._uU(9,"Price"),u.qZA(),u.TgZ(10,"div",6),u._uU(11,"Date of start"),u.qZA(),u.TgZ(12,"div",7),u._uU(13,"Date of end"),u.qZA(),u.TgZ(14,"div",8),u._uU(15,"Destination country"),u.qZA(),u.TgZ(16,"div",9),u._uU(17,"Amount"),u.qZA(),u.TgZ(18,"div",10),u._uU(19,"Status"),u.qZA()(),u.YNc(20,zk,14,11,"div",11),u.ALo(21,"historyPipe")),2&t&&(u.xp6(1),u.Q6J("ngClass",u.VKq(7,rx,"coming up"==r.status)),u.xp6(2),u.Q6J("ngClass",u.VKq(9,rx,"active"==r.status)),u.xp6(2),u.Q6J("ngClass",u.VKq(11,rx,"finished"==r.status)),u.xp6(15),u.Q6J("ngForOf",u.xi3(21,4,r.history,r.status)))},dependencies:[Ht,dr,qk],styles:[".labels[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}.labels[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:16.6%;text-align:center}.item[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-top:1rem;padding:1rem 0;border-bottom:2px var(--color-outline) solid}.item[_ngcontent-%COMP%]:nth-last-child(1){border-bottom:none}.item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;width:16.6%}.red[_ngcontent-%COMP%]{background:var(--gradient-red)}.green[_ngcontent-%COMP%]{background:var(--gradient-green)}.yellow[_ngcontent-%COMP%]{background:var(--gradient-yellow)}.status[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-radius:10px;display:block;width:60%;height:70%}.btn[_ngcontent-%COMP%]{width:100px;border-radius:10px;margin-right:1.5rem;text-align:center;padding:.5rem 1rem;cursor:pointer}.filter[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:2rem;margin-bottom:2rem}.gray[_ngcontent-%COMP%]{background-color:var(--color-outline)}.active[_ngcontent-%COMP%]{transform:translateY(10px)}"]}),n})(),Kk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:39,vars:0,consts:[[1,"home__container"],[1,"home__desc"],[1,"home__desc__header","header"],[1,"home__desc__p"],["routerLink","/trips","routerLinkActive","active",1,"btn--products","home__desc__p"],["src","https://img.freepik.com/free-photo/person-standing-top-mountain_198169-339.jpg?w=2000","alt",""],[1,"contact__title","header"],[1,"contact_info"],[1,"contact_info__column","contact_info__column--left"],[1,"contact_info__element__header"],[1,"contact_info__element__content"],[1,"contact_info__column","contact_info__column--right"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3172.7502589448904!2d19.913367779155642!3d50.06707835255961!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47165ba756b59b21%3A0xb20c8dba21b317d1!2sAGH%20University%20of%20Science%20and%20Technology!5e0!3m2!1sen!2spl!4v1670323508668!5m2!1sen!2spl","width","600","height","450","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),u._uU(3,"It's adventure time!"),u.qZA(),u.TgZ(4,"p",3),u._uU(5,"Don't wait for your dream to fulfil itself. Purchase your dream trip right now!"),u.qZA(),u.TgZ(6,"p",4),u._uU(7,"See our products"),u.qZA()(),u.TgZ(8,"figure"),u._UZ(9,"img",5),u.qZA()(),u.TgZ(10,"h1",6),u._uU(11,"Contact"),u.qZA(),u.TgZ(12,"div",7)(13,"div",8)(14,"h3",9),u._uU(15,"TripsShow Sp. z o.o."),u.qZA(),u.TgZ(16,"p",10),u._uU(17," al. Mickiewicza 30, 30-059 Krak\xf3w "),u.qZA(),u.TgZ(18,"h3",9),u._uU(19,"Phone"),u.qZA(),u.TgZ(20,"p",10),u._uU(21," +48 22 629 27 58 "),u.qZA(),u.TgZ(22,"h3",9),u._uU(23,"Infoline available"),u.qZA(),u.TgZ(24,"p",10)(25,"span"),u._uU(26,"Monday \u2013 Friday"),u.qZA(),u.TgZ(27,"span"),u._uU(28,"9:00 \u2013 19:00"),u.qZA(),u.TgZ(29,"span"),u._uU(30,"Saturday \u2013 Sunday"),u.qZA(),u.TgZ(31,"span"),u._uU(32,"9:00 \u2013 15:00"),u.qZA()(),u.TgZ(33,"h3",9),u._uU(34,"Email"),u.qZA(),u.TgZ(35,"p",10),u._uU(36," info@tripshop.pl "),u.qZA()(),u.TgZ(37,"div",11),u._UZ(38,"iframe",12),u.qZA()())},dependencies:[di,Vi],styles:[".home__container[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 80px);display:flex;justify-content:flex-start;align-items:flex-start;position:relative}.home__desc[_ngcontent-%COMP%]{position:absolute;top:20vh;left:5vw}.home__desc__p[_ngcontent-%COMP%]{font-size:1.2rem}.btn--products[_ngcontent-%COMP%]{background:var(--gradient-green);display:flex;align-items:center;justify-content:center;border-radius:10px;width:-moz-fit-content;width:fit-content;padding:.7rem 1.4rem;margin-top:2rem;cursor:pointer}figure[_ngcontent-%COMP%]{margin:0;height:100%;width:60%;position:absolute;right:6%;z-index:-1}figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.header[_ngcontent-%COMP%]{font-size:3rem;font-weight:300}.contact__title[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;margin-top:5rem}.contact_info[_ngcontent-%COMP%]{width:100%;display:flex}.contact_info__column[_ngcontent-%COMP%]{width:50%;padding:1rem 0 5rem}.contact_info__column--left[_ngcontent-%COMP%]{margin-left:5vw}.contact_info__element__header[_ngcontent-%COMP%]{padding:0;margin:1rem 0 0}.contact_info__element__content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.contact_info__column--right[_ngcontent-%COMP%]{margin-right:5vw}agm-map[_ngcontent-%COMP%]{height:300px}iframe[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 800px){.contact_info[_ngcontent-%COMP%]{flex-direction:column}.contact_info__column[_ngcontent-%COMP%]{width:100%}.contact_info__column--left[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:0}}"]}),n})();function Yk(n,e){if(1&n&&(u.TgZ(0,"span",9),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function Qk(n,e){if(1&n&&(u.TgZ(0,"span",9),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}let Jk=(()=>{class n{constructor(t,r,s){this.formBuilder=t,this.authService=r,this.router=s,this.formErrors={email:[],password:[]},this.validationMessages={email:{required:"Filed required"},password:{required:"Filed required"}},this.loginForm=this.formBuilder.group({email:["",[kn.required]],password:["",[kn.required]]})}ngOnInit(){}clearErrors(){for(let t in this.formErrors)this.formErrors[t]=[]}submitForm(){var t=this;return(0,me.Z)(function*(){t.clearErrors();let r=!1;if(!t.loginForm.valid){for(let s in t.formErrors){t.formErrors[s]=[];let c=t.loginForm.get(s);if(c&&!c.valid){const d=t.validationMessages[s];for(const m in c.errors)t.formErrors[s].push(d[m])}}r=!0}if(!r){try{yield t.authService.login(t.loginForm.get("email").value||"",t.loginForm.get("password").value||"")}catch(s){return void("auth/wrong-password"==s?.code||"auth/invalid-email"==s?.code||"auth/user-not-found"==s?.code?t.formErrors.password.push("Invalid password or email"):"auth/too-many-requests"==s?.code?t.formErrors.password.push("Account temporairly blocked due to too many failed attempts. Try again later."):alert("Something went wrong - make sure that all informations are correct and try again"))}t.loginForm.reset(),t.clearErrors()}})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qu),u.Y36(Ns),u.Y36(on))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:16,vars:3,consts:[[1,"main"],[1,"loginForm",3,"formGroup"],[1,"form__element"],[1,"email"],["id","email","type","text","formControlName","email","placeholder","E-mail",1,"email"],["class","error",4,"ngFor","ngForOf"],["id","password","type","password","formControlName","password","placeholder","Password"],["type","submit",1,"form__element","btn",3,"click"],["routerLink","/register","routerLinkActive","active",1,"registerBtn"],[1,"error"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),u._uU(4,"E-mail: "),u.qZA(),u._UZ(5,"input",4),u.YNc(6,Yk,2,1,"span",5),u.qZA(),u.TgZ(7,"div",2)(8,"label"),u._uU(9,"Password: "),u.qZA(),u._UZ(10,"input",6),u.YNc(11,Qk,2,1,"span",5),u.qZA(),u.TgZ(12,"button",7),u.NdJ("click",function(){return r.submitForm()}),u._uU(13,"Login"),u.qZA(),u.TgZ(14,"div",8),u._uU(15,"Don't have an account ?"),u.qZA()()()),2&t&&(u.xp6(1),u.Q6J("formGroup",r.loginForm),u.xp6(5),u.Q6J("ngForOf",r.formErrors.email),u.xp6(5),u.Q6J("ngForOf",r.formErrors.password))},dependencies:[dr,La,Fo,Vo,Di,Hu,Va,di,Vi],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:calc(100vh - 80px);box-sizing:border-box}.loginForm[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;box-sizing:border-box;max-width:700px}input[_ngcontent-%COMP%]{border-radius:5px;border:1px var(--color-outline) solid;padding:.8rem 1rem;width:100%;box-sizing:border-box}label[_ngcontent-%COMP%]{display:block;font-weight:600}.form__element[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;max-width:450px;margin-bottom:1rem;box-sizing:border-box}.btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;color:#444;display:flex;justify-content:center;align-items:center;padding:1rem 2rem;background:var(--gradient-green);border-radius:10px;font-size:1.2rem;width:100%;cursor:pointer;border:none;margin-top:2rem}.error[_ngcontent-%COMP%]{color:red}.registerBtn[_ngcontent-%COMP%]{margin-top:-.8rem;font-size:.9rem;cursor:pointer}"]}),n})();function Xk(n,e){1&n&&(u.TgZ(0,"h2"),u._uU(1,"Add trip"),u.qZA())}function eF(n,e){1&n&&(u.TgZ(0,"h2"),u._uU(1,"Edit Trip"),u.qZA())}function tF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.name)}}function nF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.destCountry)}}function rF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.startDate)}}function iF(n,e){if(1&n&&(u.TgZ(0,"div",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij(" ",t.dateError2," ")}}function sF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.endDate)}}function oF(n,e){if(1&n&&(u.TgZ(0,"div",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij(" ",t.dateError," ")}}function aF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.price)}}function uF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.description)}}function cF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.availableTrips)}}function lF(n,e){if(1&n&&(u.TgZ(0,"span",24),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.formErrors.imgLink)}}function dF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",25)(1,"label",26),u.NdJ("click",function(){const c=u.CHM(t).index,d=u.oxw();return u.KtG(d.onDeleteLink(c))}),u._uU(2,"Delete path"),u.qZA(),u._UZ(3,"input",27),u.qZA()}if(2&n){const t=e.index;u.xp6(3),u.Q6J("formControlName",t)}}function hF(n,e){1&n&&(u.TgZ(0,"span",24),u._uU(1,"all photo path fields required"),u.qZA())}function fF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.submitForm())}),u._uU(1,"Add"),u.qZA()}}function pF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.submitForm())}),u._uU(1,"Edit"),u.qZA()}}let zO=(()=>{class n{constructor(t,r,s,c){this.formBuilder=t,this._tripsService=r,this.router=s,this.route=c,this.dateError="",this.dateError2="",this.formErrors={name:[],destCountry:[],startDate:[],endDate:[],price:[],description:[],availableTrips:[],imgLink:[],imgLinks:[]},this.validationMessages={name:{required:"filed required"},destCountry:{required:"filed required"},startDate:{required:"filed required"},endDate:{required:"filed required"},price:{required:"filed required",pattern:"Invalid number - field can only be natural number"},description:{required:"filed required"},availableTrips:{required:"filed required",pattern:"Invalid number - number of available trips can only be natural number"},imgLink:{required:"filed required"},imgLinks:{required:"filed required"}},this.tripForm=this.formBuilder.group({name:["",[kn.required]],destCountry:["",[kn.required]],startDate:["",[kn.required]],endDate:["",[kn.required]],price:["",[kn.required,kn.pattern("^[0-9]+$")]],description:["",[kn.required]],availableTrips:["",[kn.required,kn.pattern("^[^.]+$"),kn.pattern("^[0-9]+$")]],imgLink:["",[kn.required]],imgLinks:new U_([])}),this.id=null,this.uid="",this.edit=!1}ngOnInit(){/edit/.test(this.router.url)&&(this.id=this.route.snapshot.paramMap.get("id"),this._tripsService.getData().subscribe(t=>{for(let r of t)if(r.payload.doc.data().id==this.id){if(this.tripForm.patchValue(r.payload.doc.data()),r.payload.doc.data().imgLink.length>1){this.tripForm.controls.imgLink.setValue(r.payload.doc.data().imgLink[0]);for(let s=0;s<r.payload.doc.data().imgLink.length-1;s++)this.onAddLink();try{this.tripForm.controls.imgLinks.setValue(r.payload.doc.data().imgLink.slice(1,r.payload.doc.data().imgLink.length))}catch{}}this.uid=r.payload.doc.id;break}}),this.edit=!0)}endAfterStart(){return!(new Date(this.tripForm.get("startDate")?.value||"")>new Date(this.tripForm.get("endDate")?.value||"")&&(this.dateError="End Date can't be before start date",1))}startAfterToday(){return!(new Date(this.tripForm.get("startDate")?.value||"")<new Date((new Date).toDateString())&&(this.dateError2="Start date can't be before current date",1))}onAddLink(){const t=new O(null,[kn.required]);this.tripForm.get("imgLinks").push(t)}onDeleteLink(t){this.tripForm.get("imgLinks").removeAt(t)}get linkControls(){return this.tripForm.get("imgLinks").controls}checkFormArrayInvalid(){return this.tripForm.get("imgLinks").controls.some(t=>t.invalid)}submitForm(){var t=this;return(0,me.Z)(function*(){if(t.dateError="",t.dateError2="",!t.tripForm.valid){for(let s in t.formErrors){t.formErrors[s]=[];let c=t.tripForm.get(s);if(c&&!c.valid){const d=t.validationMessages[s];for(const m in c.errors)t.formErrors[s].push(d[m])}}return}if(!t.endAfterStart()||!t.startAfterToday())return;let r={id:0,name:t.tripForm.get("name")?.value||"",destCountry:t.tripForm.get("destCountry")?.value||"",startDate:t.tripForm.get("startDate")?.value||"",endDate:t.tripForm.get("endDate")?.value||"",price:Number(t.tripForm.get("price")?.value||0),description:t.tripForm.get("description")?.value||"",availableTrips:Number(t.tripForm.get("availableTrips")?.value||0),imgLink:[t.tripForm.get("imgLink")?.value||"",...t.tripForm.get("imgLinks").value]};if(t.edit)r.id=+(t.id||0);else{let s=yield t._tripsService.getNextId();r.id=s}t.tripForm.get("imgLinks").clear(),t.edit?t._tripsService.modifyData(t.uid,r):t._tripsService.addData(r),t.tripForm.reset();for(let s in t.formErrors)t.formErrors[s]=[];t.edit&&t.router.navigate(["manage"])})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qu),u.Y36(bh),u.Y36(on),u.Y36(Go))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trip-form"]],decls:64,vars:17,consts:[[4,"ngIf"],[3,"formGroup"],[1,"form__element"],["for","name"],["id","name","type","text","formControlName","name"],["class","error",4,"ngIf"],["for","destCountry"],["id","destCountry","type","text","formControlName","destCountry"],["for","startDate"],["id","startDate","type","date","formControlName","startDate"],["for","endDate"],["id","endDate","type","date","formControlName","endDate"],["for","price"],["id","price","type","number","formControlName","price"],["for","description"],["id","description","name","","id","","cols","30","rows","10","formControlName","description"],["for","availableTrips"],["id","availableTrips","type","number","formControlName","availableTrips"],["for","imgLink"],["id","imgLink","type","text","formControlName","imgLink"],["formArrayName","imgLinks"],["class","form__element form-group",4,"ngFor","ngForOf"],[1,"add",3,"click"],["type","submit","class","btn",3,"click",4,"ngIf"],[1,"error"],[1,"form__element","form-group"],["for","imgLink",1,"delete",3,"click"],["type","text",1,"fom-control",3,"formControlName"],["type","submit",1,"btn",3,"click"]],template:function(t,r){1&t&&(u.YNc(0,Xk,2,0,"h2",0),u.YNc(1,eF,2,0,"h2",0),u.TgZ(2,"form",1)(3,"div")(4,"div",2)(5,"label",3),u._uU(6,"Name:"),u.qZA(),u._UZ(7,"input",4),u.qZA(),u.YNc(8,tF,2,1,"span",5),u.qZA(),u.TgZ(9,"div")(10,"div",2)(11,"label",6),u._uU(12,"Destination Country:"),u.qZA(),u._UZ(13,"input",7),u.qZA(),u.YNc(14,nF,2,1,"span",5),u.qZA(),u.TgZ(15,"div")(16,"div",2)(17,"label",8),u._uU(18,"Date of start:"),u.qZA(),u._UZ(19,"input",9),u.qZA(),u.YNc(20,rF,2,1,"span",5),u.YNc(21,iF,2,1,"div",5),u.qZA(),u.TgZ(22,"div")(23,"div",2)(24,"label",10),u._uU(25,"Date of finish:"),u.qZA(),u._UZ(26,"input",11),u.qZA(),u.YNc(27,sF,2,1,"span",5),u.YNc(28,oF,2,1,"div",5),u.qZA(),u.TgZ(29,"div")(30,"div",2)(31,"label",12),u._uU(32,"Price:"),u.qZA(),u._UZ(33,"input",13),u.qZA(),u.YNc(34,aF,2,1,"span",5),u.qZA(),u.TgZ(35,"div")(36,"div",2)(37,"label",14),u._uU(38,"Description:"),u.qZA(),u._UZ(39,"textarea",15),u.qZA(),u.YNc(40,uF,2,1,"span",5),u.qZA(),u.TgZ(41,"div")(42,"div",2)(43,"label",16),u._uU(44,"Number of available spots:"),u.qZA(),u._UZ(45,"input",17),u.qZA(),u.YNc(46,cF,2,1,"span",5),u.qZA(),u.TgZ(47,"div")(48,"div",2)(49,"label",18),u._uU(50,"Photo path:"),u.qZA(),u._UZ(51,"input",19),u.qZA(),u.YNc(52,lF,2,1,"span",5),u.qZA(),u.TgZ(53,"div",20),u.YNc(54,dF,4,1,"div",21),u.qZA(),u.TgZ(55,"div",2),u._UZ(56,"label",18),u.TgZ(57,"p",22),u.NdJ("click",function(){return r.onAddLink()}),u._uU(58,"Add next path"),u.qZA()(),u.TgZ(59,"div",2),u._UZ(60,"label",18),u.YNc(61,hF,2,0,"span",5),u.qZA(),u.YNc(62,fF,2,0,"button",23),u.YNc(63,pF,2,0,"button",23),u.qZA()),2&t&&(u.Q6J("ngIf",!r.edit),u.xp6(1),u.Q6J("ngIf",r.edit),u.xp6(1),u.Q6J("formGroup",r.tripForm),u.xp6(6),u.Q6J("ngIf",r.formErrors.name),u.xp6(6),u.Q6J("ngIf",r.formErrors.destCountry),u.xp6(6),u.Q6J("ngIf",r.formErrors.startDate),u.xp6(1),u.Q6J("ngIf",""!=r.dateError2),u.xp6(6),u.Q6J("ngIf",r.formErrors.endDate),u.xp6(1),u.Q6J("ngIf",""!=r.dateError),u.xp6(6),u.Q6J("ngIf",r.formErrors.price),u.xp6(6),u.Q6J("ngIf",r.formErrors.description),u.xp6(6),u.Q6J("ngIf",r.formErrors.availableTrips),u.xp6(6),u.Q6J("ngIf",r.formErrors.imgLink),u.xp6(2),u.Q6J("ngForOf",r.linkControls),u.xp6(7),u.Q6J("ngIf",r.checkFormArrayInvalid()),u.xp6(1),u.Q6J("ngIf",!r.edit),u.xp6(1),u.Q6J("ngIf",r.edit))},dependencies:[dr,fn,La,Fo,tf,Vo,Di,Hu,Va,vd],styles:["span[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content;padding:1rem}form[_ngcontent-%COMP%]{width:100%;max-width:700px;margin-bottom:2rem}input[_ngcontent-%COMP%]{border-radius:5px;border:1px var(--color-outline) solid;padding:.5rem}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.form__element[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:1rem;background:var(--gradient-green);border-radius:10px;font-size:1.2rem;cursor:pointer;border:none}.error[_ngcontent-%COMP%]{color:var(--color-red)}.delete[_ngcontent-%COMP%]{color:#fff;padding:.1rem .5rem;border-radius:10px;background:var(--gradient-red)}.add[_ngcontent-%COMP%]{color:#fff;padding:.1rem .5rem;border-radius:10px;background:var(--gradient-yellow);width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;cursor:pointer}"]}),n})();function gF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"div",3),u._uU(2),u.qZA(),u.TgZ(3,"div",4),u._uU(4),u.qZA(),u.TgZ(5,"div",5),u._uU(6),u.qZA(),u.TgZ(7,"div",6),u._uU(8),u.qZA(),u.TgZ(9,"div",7),u._uU(10),u.qZA(),u.TgZ(11,"div",8),u._uU(12),u.qZA(),u.TgZ(13,"div",9),u._uU(14),u.qZA(),u.TgZ(15,"div",10),u.NdJ("click",function(){const c=u.CHM(t).$implicit,d=u.oxw();return u.KtG(d.removeTrip(c))}),u._uU(16,"Delete"),u.qZA(),u.TgZ(17,"div",11),u._uU(18,"Edit"),u.qZA()()}if(2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t.id),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.destCountry),u.xp6(2),u.hij(" ",t.price,""),u.xp6(2),u.Oqu(t.startDate),u.xp6(2),u.Oqu(t.endDate),u.xp6(2),u.hij("",t.availableTrips," "),u.xp6(3),u.MGl("routerLink","/edit/",t.id,"")}}let mF=(()=>{class n{constructor(t,r,s){this._tripsService=t,this._cartService=r,this.authService=s,this.trips=[]}ngOnInit(){this._tripsService.getData().subscribe(t=>{this.trips=t.map(r=>({...r.payload.doc.data(),key:r.payload.doc.id,amount:this._cartService.getAmountOfItem(r.payload.doc.data().id),reviews:this._tripsService.getReview(Number(r.payload.doc.data().id))}))})}removeTrip(t){this._tripsService.deleteData(t.key)}editTrip(t){console.log("edit")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bh),u.Y36(jl),u.Y36(Ns))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-manager-panel"]],decls:3,vars:1,consts:[[1,"trip-list"],["class","trip__element",4,"ngFor","ngForOf"],[1,"trip__element"],[1,"trip__element__single","trip__element__single--id"],[1,"trip__element__single","trip__element__single--name"],[1,"trip__element__single","trip__element__single--destCountry"],[1,"trip__element__single","trip__element__single--price"],[1,"trip__element__single","trip__element__single--startDate"],[1,"trip__element__single","trip__element__single--endDate"],[1,"trip__element__single","trip__element__single--availableTrips"],[1,"trip__element__single","btn","btn--delete",3,"click"],["routerLinkActive","active",1,"trip__element__single","btn","btn--edit",3,"routerLink"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,gF,19,8,"div",1),u.qZA(),u._UZ(2,"app-trip-form")),2&t&&(u.xp6(1),u.Q6J("ngForOf",r.trips))},dependencies:[dr,di,Vi,zO],styles:[".trip__element[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:1rem}.trip__element__single[_ngcontent-%COMP%]{text-align:center;width:100px}.trip__element__single--id[_ngcontent-%COMP%]{width:40px}.trip__element__single--name[_ngcontent-%COMP%]{width:calc(100% - 740px);min-width:100px}.btn[_ngcontent-%COMP%]{border-radius:10px;margin:0 5px;box-sizing:border-box}.btn--delete[_ngcontent-%COMP%]{background:var(--gradient-red)}.btn--edit[_ngcontent-%COMP%]{background:var(--gradient-yellow)}"]}),n})(),_F=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-page-not-found"]],decls:5,vars:0,consts:[[1,"main"],[1,"big"],[1,"small"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"p",1),u._uU(2,"404 not found :("),u.qZA(),u.TgZ(3,"p",2),u._uU(4,"Check if your url is valid and try again later"),u.qZA()())},styles:[".main[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 80px);display:flex;justify-content:center;align-items:center;flex-direction:column}.big[_ngcontent-%COMP%]{font-size:4rem;color:gray}.small[_ngcontent-%COMP%]{color:gray}"]}),n})(),yF=(()=>{class n{constructor(t,r,s,c,d){this.formBuilder=t,this._tripsService=r,this.router=s,this.route=c,this.authService=d,this.id="",this.user=null,this.permissionForm=this.formBuilder.group({"permission--0":"","permission--1":"","permission--2":"","permission--3":""}),this.init()}ngOnInit(){}init(){this.id=this.route.snapshot.paramMap.get("id")||"",console.log(this.id),this.authService.getUserByID(this.id||"").subscribe(t=>{this.user=t.data();let r=this.user.permissions;this.permissionForm.patchValue({"permission--0":"1"==r[0]?"1":"","permission--1":"1"==r[1]?"1":"","permission--2":"1"==r[2]?"1":"","permission--3":"1"==r[3]?"1":""})})}submitForm(){let t_0="1"==this.permissionForm.get("permission--0")?.value?"1":"0",t_1="1"==this.permissionForm.get("permission--1")?.value?"1":"0",t_2="1"==this.permissionForm.get("permission--2")?.value?"1":"0",t_3="1"==this.permissionForm.get("permission--3")?.value?"1":"0";this.authService.updatePermissions(t_0+t_1+t_2+t_3,this.id),this.router.navigate(["admin"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qu),u.Y36(bh),u.Y36(on),u.Y36(Go),u.Y36(Ns))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-permissions-edit"]],decls:20,vars:1,consts:[["action","",3,"formGroup","ngSubmit"],[1,"permissions"],["type","checkbox","value","1","id","radio--0","name","permission","formControlName","permission--0"],["for","radio--0"],["type","checkbox","value","1","id","radio--1","name","permission","formControlName","permission--1"],["for","radio--1"],["type","checkbox","value","1","id","radio--2","name","permission","formControlName","permission--2"],["for","radio--2"],["type","checkbox","value","1","id","radio--3","name","permission","formControlName","permission--3"],["for","radio--3"],["type","submit",1,"btn"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.submitForm()}),u.TgZ(1,"div",1)(2,"div"),u._UZ(3,"input",2),u.TgZ(4,"label",3),u._uU(5,"User"),u.qZA()(),u.TgZ(6,"div"),u._UZ(7,"input",4),u.TgZ(8,"label",5),u._uU(9,"Manager"),u.qZA()(),u.TgZ(10,"div"),u._UZ(11,"input",6),u.TgZ(12,"label",7),u._uU(13,"Admin"),u.qZA()(),u.TgZ(14,"div"),u._UZ(15,"input",8),u.TgZ(16,"label",9),u._uU(17,"Ban"),u.qZA()()(),u.TgZ(18,"button",10),u._uU(19,"Edit"),u.qZA()()),2&t&&u.Q6J("formGroup",r.permissionForm)},dependencies:[La,Ru,Vo,Di,Hu,Va],styles:[".btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:.8rem;background:var(--gradient-green);border-radius:10px;font-size:1rem;cursor:pointer;border:none}"]}),n})();function vF(n,e){if(1&n&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function wF(n,e){if(1&n&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function CF(n,e){if(1&n&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function EF(n,e){if(1&n&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}let bF=(()=>{class n{constructor(t,r,s){this.formBuilder=t,this.auth=r,this.router=s,this.formErrors={name:[],email:[],password:[],repeatPassword:[]},this.validationMessages={name:{required:"Filed required"},email:{required:"Filed required"},password:{required:"Filed required"},repeatPassword:{required:"Filed required"}},this.registerForm=this.formBuilder.group({name:["",[kn.required]],email:["",[kn.required]],password:["",[kn.required]],repeatPassword:["",[kn.required]]}),this.passwordValidator=c=>(c.length>=8||this.formErrors.password.push("Password must have at least 8 characters"),/[@$!%*#?&]+/.test(c)||this.formErrors.password.push("Password must have at least one special character"),/[A-Z]+/.test(c)||this.formErrors.password.push("Password must have at least one capital letter"),/[0-9]+/.test(c)||this.formErrors.password.push("Password must have at least one digit"),c.length>=8&&/[@$!%*#?&]+/.test(c)&&/[A-Z]+/.test(c)&&/[0-9]+/.test(c)),this.emailValidator=c=>!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c)||(this.formErrors.email.push("Invalid email"),!1)}ngOnInit(){}clearErrors(){for(let t in this.formErrors)this.formErrors[t]=[]}submitForm(){var t=this;return(0,me.Z)(function*(){t.clearErrors();let r=!1;if(!t.registerForm.valid){for(let c in t.formErrors){t.formErrors[c]=[];let d=t.registerForm.get(c);if(d&&!d.valid){const m=t.validationMessages[c];for(const w in d.errors)t.formErrors[c].push(m[w])}}r=!0}if(t.passwordValidator(t.registerForm.get("password").value||"")||(r=!0),t.emailValidator(t.registerForm.get("email").value||"")||(r=!0),t.registerForm.get("password").value!=t.registerForm.get("repeatPassword").value&&(t.formErrors.repeatPassword.push("passowords have to match!"),r=!0),r)return;let s={name:t.registerForm.get("name").value||"",email:t.registerForm.get("email").value||"",permissions:"1000"};try{yield t.auth.addUser(s.email||"",t.registerForm.get("password").value||"",s),t.router.navigate(["home"])}catch(c){return void("auth/email-already-in-use"==c?.code?t.formErrors.email.push("Email already in use!"):"Invalid username"==c?.message?t.formErrors.name.push("Username taken"):alert("Something went wrong - make sure that all informations are correct and try again"))}t.registerForm.reset(),t.clearErrors()})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qu),u.Y36(Ns),u.Y36(on))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-register"]],decls:26,vars:5,consts:[[1,"main"],[1,"loginForm",3,"formGroup"],[1,"form__element"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Username"],["class","error",4,"ngFor","ngForOf"],[1,"email"],["id","email","type","text","formControlName","email","placeholder","E-mail",1,"email"],["id","password","type","password","formControlName","password","placeholder","Password"],["id","repeatPassword","type","password","formControlName","repeatPassword","placeholder","Repeat Password"],["type","submit",1,"form__element","btn",3,"click"],["routerLink","/login","routerLinkActive","active",1,"registerBtn"],[1,"error"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),u._uU(4,"Username (This username will be visable to other users): "),u.qZA(),u._UZ(5,"input",4),u.YNc(6,vF,2,1,"span",5),u.qZA(),u.TgZ(7,"div",2)(8,"label",6),u._uU(9,"E-mail: "),u.qZA(),u._UZ(10,"input",7),u.YNc(11,wF,2,1,"span",5),u.qZA(),u.TgZ(12,"div",2)(13,"label"),u._uU(14,"Password: "),u.qZA(),u._UZ(15,"input",8),u.YNc(16,CF,2,1,"span",5),u.qZA(),u.TgZ(17,"div",2)(18,"label"),u._uU(19,"Repeat password:"),u.qZA(),u._UZ(20,"input",9),u.YNc(21,EF,2,1,"span",5),u.qZA(),u.TgZ(22,"button",10),u.NdJ("click",function(){return r.submitForm()}),u._uU(23,"Register"),u.qZA(),u.TgZ(24,"div",11),u._uU(25,"Have an account already ?"),u.qZA()()()),2&t&&(u.xp6(1),u.Q6J("formGroup",r.registerForm),u.xp6(5),u.Q6J("ngForOf",r.formErrors.name),u.xp6(5),u.Q6J("ngForOf",r.formErrors.email),u.xp6(5),u.Q6J("ngForOf",r.formErrors.password),u.xp6(5),u.Q6J("ngForOf",r.formErrors.repeatPassword))},dependencies:[dr,La,Fo,Vo,Di,Hu,Va,di,Vi],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;min-height:calc(100vh - 80px);box-sizing:border-box}.loginForm[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;box-sizing:border-box;max-width:700px}input[_ngcontent-%COMP%]{border-radius:5px;border:1px var(--color-outline) solid;padding:.8rem 1rem;width:100%;box-sizing:border-box}label[_ngcontent-%COMP%]{display:block;font-weight:600}.form__element[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;max-width:450px;margin-bottom:1rem;box-sizing:border-box}.btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;color:#444;display:flex;justify-content:center;align-items:center;padding:1rem 2rem;background:var(--gradient-green);border-radius:10px;font-size:1.2rem;width:100%;cursor:pointer;border:none;margin-top:2rem}.error[_ngcontent-%COMP%]{color:red}.registerBtn[_ngcontent-%COMP%]{margin-top:-.8rem;font-size:.9rem;cursor:pointer}"]}),n})();function DF(n,e){if(1&n&&(u.TgZ(0,"span",13),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij("(",t.revievs.length,")")}}const nw=function(n){return{yellow:n}};let WO=(()=>{class n{constructor(){this.revievs=[],this.tripId=1,this.showTotal=!1,this.tempCurrUser="admin",this.raiting=0}ngOnInit(){this.calculateRating()}ngOnChanges(t){this.calculateRating()}calculateRating(){let t=this.revievs.length;if(0==t)return;let r=0;this.revievs.forEach(s=>{r+=s.raiting,0==s.raiting&&(t-=1)}),0!=t&&(this.raiting=Math.round(r/t))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trip-raiting"]],inputs:{revievs:["reviews","revievs"],tripId:"tripId",showTotal:"showTotal"},features:[u.TTD],decls:13,vars:16,consts:[[1,"star__container"],[1,"rate"],["type","radio","id","star5","name","readOnly"],["for","star5","title","text",1,"gray",3,"ngClass"],["type","radio","id","star4","name","readOnly"],["for","star4","title","text",1,"gray",3,"ngClass"],["type","radio","id","star3","name","readOnly"],["for","star3","title","text",1,"gray",3,"ngClass"],["type","radio","id","star2","name","readOnly"],["for","star2","title","text",1,"gray",3,"ngClass"],["type","radio","id","star1","name","readOnly"],["for","star1","title","text",1,"gray",3,"ngClass"],["class","yellow",4,"ngIf"],[1,"yellow"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"input",2)(3,"label",3)(4,"input",4)(5,"label",5)(6,"input",6)(7,"label",7)(8,"input",8)(9,"label",9)(10,"input",10)(11,"label",11),u.qZA(),u.YNc(12,DF,2,1,"span",12),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngClass",u.VKq(6,nw,r.raiting>=5)),u.xp6(2),u.Q6J("ngClass",u.VKq(8,nw,r.raiting>=4)),u.xp6(2),u.Q6J("ngClass",u.VKq(10,nw,r.raiting>=3)),u.xp6(2),u.Q6J("ngClass",u.VKq(12,nw,r.raiting>=2)),u.xp6(2),u.Q6J("ngClass",u.VKq(14,nw,r.raiting>=1)),u.xp6(1),u.Q6J("ngIf",r.showTotal))},dependencies:[Ht,fn],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0}.rate[_ngcontent-%COMP%]{float:left;height:auto}.rate[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.rate[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{float:right;width:1em;overflow:hidden;white-space:nowrap;font-size:30px}.rate[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]:before{content:"\\2605  "}.gray[_ngcontent-%COMP%]{color:#ccc}.black[_ngcontent-%COMP%]{color:#000}.yellow[_ngcontent-%COMP%]{color:var(--color-yellow-darker)}.yellowish[_ngcontent-%COMP%]{color:olive}.star__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}']}),n})();function TF(n,e){1&n&&(u.TgZ(0,"h1",4),u._uU(1,"Reviews"),u.qZA())}const gc=function(n){return{yellow:n}};function AF(n,e){if(1&n&&(u.TgZ(0,"div",12)(1,"span",13),u._uU(2,"\u2605"),u.qZA(),u.TgZ(3,"span",13),u._uU(4,"\u2605"),u.qZA(),u.TgZ(5,"span",13),u._uU(6,"\u2605"),u.qZA(),u.TgZ(7,"span",13),u._uU(8,"\u2605"),u.qZA(),u.TgZ(9,"span",13),u._uU(10,"\u2605"),u.qZA()()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Q6J("ngClass",u.VKq(5,gc,t.raiting>=1)),u.xp6(2),u.Q6J("ngClass",u.VKq(7,gc,t.raiting>=2)),u.xp6(2),u.Q6J("ngClass",u.VKq(9,gc,t.raiting>=3)),u.xp6(2),u.Q6J("ngClass",u.VKq(11,gc,t.raiting>=4)),u.xp6(2),u.Q6J("ngClass",u.VKq(13,gc,t.raiting>=5))}}function SF(n,e){if(1&n&&(u.TgZ(0,"div",5)(1,"div",6)(2,"div",7),u._UZ(3,"i",8),u.qZA(),u.TgZ(4,"p"),u._uU(5),u.qZA()(),u.YNc(6,AF,11,15,"div",9),u.TgZ(7,"div",10),u._uU(8),u.qZA(),u.TgZ(9,"div",11),u._uU(10),u.qZA()()),2&n){const t=e.$implicit;u.xp6(5),u.Oqu(t.user),u.xp6(1),u.Q6J("ngIf",t.raiting>0),u.xp6(2),u.hij(" ",t.comment," "),u.xp6(2),u.Oqu(t.buyDate)}}function xF(n,e){1&n&&(u.TgZ(0,"h1",4),u._uU(1,"Add review"),u.qZA())}function MF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",24),u._uU(1," Rating"),u.TgZ(2,"span",19),u._uU(3,"*"),u.qZA(),u._uU(4,": "),u.TgZ(5,"div",25),u._UZ(6,"input",26),u.TgZ(7,"label",27),u.NdJ("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.rate(5))}),u.qZA(),u._UZ(8,"input",28),u.TgZ(9,"label",29),u.NdJ("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.rate(4))}),u.qZA(),u._UZ(10,"input",30),u.TgZ(11,"label",31),u.NdJ("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.rate(3))}),u.qZA(),u._UZ(12,"input",32),u.TgZ(13,"label",33),u.NdJ("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.rate(2))}),u.qZA(),u._UZ(14,"input",34),u.TgZ(15,"label",35),u.NdJ("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.rate(1))}),u.qZA()()()}if(2&n){const t=u.oxw(2);u.xp6(7),u.Q6J("ngClass",u.VKq(5,gc,t.rated>=5)),u.xp6(2),u.Q6J("ngClass",u.VKq(7,gc,t.rated>=4)),u.xp6(2),u.Q6J("ngClass",u.VKq(9,gc,t.rated>=3)),u.xp6(2),u.Q6J("ngClass",u.VKq(11,gc,t.rated>=2)),u.xp6(2),u.Q6J("ngClass",u.VKq(13,gc,t.rated>=1))}}function OF(n,e){if(1&n&&(u.TgZ(0,"span",19),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.formErrors.rate)}}function PF(n,e){if(1&n&&(u.TgZ(0,"span",19),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.formErrors.comment)}}function NF(n,e){if(1&n&&(u.TgZ(0,"span",19),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.formErrors.buyDate)}}function RF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"form",14),u.YNc(1,MF,16,15,"div",15),u.YNc(2,OF,2,1,"span",16),u.TgZ(3,"div",17)(4,"label",18),u._uU(5,"Comment"),u.TgZ(6,"span",19),u._uU(7,"*"),u.qZA(),u._uU(8,":"),u.qZA(),u.TgZ(9,"textarea",20),u._uU(10,"\n        "),u.qZA(),u.YNc(11,PF,2,1,"span",16),u.qZA(),u.TgZ(12,"div",17)(13,"label",21),u._uU(14,"Date of purchase:"),u.qZA(),u._UZ(15,"input",22),u.YNc(16,NF,2,1,"span",16),u.qZA(),u.TgZ(17,"button",23),u.NdJ("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.addReview())}),u._uU(18,"Add"),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("formGroup",t.reviewForm),u.xp6(1),u.Q6J("ngIf",t.authService.isUser()),u.xp6(1),u.Q6J("ngIf",t.formErrors.rate),u.xp6(9),u.Q6J("ngIf",t.formErrors.comment),u.xp6(5),u.Q6J("ngIf",t.formErrors.buyDate)}}let kF=(()=>{class n{constructor(t,r,s,c){this._tripsService=t,this.formBuilder=r,this.authService=s,this._cartService=c,this.tripId=0,this.reviews=[],this.tempCurrUser="admin",this.userData=null,this.available=!1,this.rated=0,this.raiting=0,this.reviewForm=this.formBuilder.group({rate:[""],comment:["",[kn.required]],buyDate:["",[]]}),this.validationMessages={rate:{required:"filed required"},comment:{required:"filed required",minlength:"length must be grater than 50",maxlength:"length must be less than 500"},buyDate:{required:"filed required"}},this.formErrors={rate:[],comment:[],buyDate:[]},s.getUserData().subscribe(d=>{this.userData=d})}ngOnChanges(t){t.reviews.firstChange||this.checkIfAvilableForReview()}ngOnInit(){}rate(t){this.rated=t}checkRating(t){return!!(this.authService.isManager()||t>0)||(this.formErrors.rate.push("filed required"),!1)}checkIfAvilableForReview(){this.available=!1,this.authService.isAdmin()||this.authService.isManager()?this.available=!0:this.authService.isBanned()||this._cartService.UserBoughtTrip(this.tripId)||this.reviews.filter(t=>t.user==this.userData.name).length>0||(this.available=!0)}addReview(){for(let r in this.formErrors)this.formErrors[r]=[];if(!this.reviewForm.valid){for(let r in this.formErrors){this.formErrors[r]=[];let s=this.reviewForm.get(r);if(console.log(s?.errors),s&&!s.valid){const c=this.validationMessages[r];for(const d in s.errors)this.formErrors[r].push(c[d])}}return}if(!this.checkRating(Number(this.reviewForm.get("rate")?.value)))return;let t={tripId:this.tripId,raiting:Number(this.reviewForm.get("rate")?.value),comment:this.reviewForm.get("comment")?.value||"",user:this.userData.name||"",buyDate:this.reviewForm.get("buyDate")?.value||""};this._tripsService.addReview(t),this.reviewForm.reset(),this.rate(0);for(let r in this.formErrors)this.formErrors[r]=[];this.available=!1}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bh),u.Y36(qu),u.Y36(Ns),u.Y36(jl))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trip-review"]],inputs:{tripId:"tripId",reviews:"reviews"},features:[u.TTD],decls:5,vars:4,consts:[["class","centered",4,"ngIf"],[1,"reviews"],["class","review",4,"ngFor","ngForOf"],["action","","class","review__form",3,"formGroup",4,"ngIf"],[1,"centered"],[1,"review"],[1,"review__avatar__container"],[1,"review__avatar"],[1,"fa-solid","fa-user-tie"],["class","review__stars",4,"ngIf"],[1,"review__comment"],[1,"review__buyDate","smallImportance"],[1,"review__stars"],[1,"star","gray",3,"ngClass"],["action","",1,"review__form",3,"formGroup"],["class","star__container",4,"ngIf"],["class","error",4,"ngIf"],[1,"form__element"],["for","comment"],[1,"error"],["name","comment","id","comment","cols","30","rows","10","formControlName","comment","minlength","50","maxlength","500"],["for","buyDate"],["id","buyDate","type","date","formControlName","buyDate"],["type","submit",1,"btn",3,"click"],[1,"star__container"],[1,"rate"],["type","radio","id","starreview5","name","rate","value","5","formControlName","rate"],["for","starreview5","title","text",1,"gray",3,"ngClass","click"],["type","radio","id","starreview4","name","rate","value","4","formControlName","rate"],["for","starreview4","title","text",1,"gray",3,"ngClass","click"],["type","radio","id","starreview3","name","rate","value","3","formControlName","rate"],["for","starreview3","title","text",1,"gray",3,"ngClass","click"],["type","radio","id","starreview2","name","rate","value","2","formControlName","rate"],["for","starreview2","title","text",1,"gray",3,"ngClass","click"],["type","radio","id","starreview1","name","rate","value","1","formControlName","rate"],["for","starreview1","title","text",1,"gray",3,"ngClass","click"]],template:function(t,r){1&t&&(u.YNc(0,TF,2,0,"h1",0),u.TgZ(1,"div",1),u.YNc(2,SF,11,4,"div",2),u.qZA(),u.YNc(3,xF,2,0,"h1",0),u.YNc(4,RF,19,5,"form",3)),2&t&&(u.Q6J("ngIf",r.reviews.length>0),u.xp6(2),u.Q6J("ngForOf",r.reviews),u.xp6(1),u.Q6J("ngIf",r.available),u.xp6(1),u.Q6J("ngIf",r.available))},dependencies:[Ht,dr,fn,La,Fo,il,Vo,Di,cg,lg,Hu,Va],styles:['[_nghost-%COMP%]{width:100%}*[_ngcontent-%COMP%]{margin:0;padding:0}h1[_ngcontent-%COMP%]{font-weight:300}.rate[_ngcontent-%COMP%]{float:left;height:auto;width:-moz-fit-content;width:fit-content}.rate[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.rate[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{float:right;width:1em;overflow:hidden;white-space:nowrap;cursor:pointer;font-size:30px}.rate[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]:before{content:"\\2605  "}.gray[_ngcontent-%COMP%]{color:#ccc}.black[_ngcontent-%COMP%]{color:#000}.yellow[_ngcontent-%COMP%], .checked[_ngcontent-%COMP%]{color:var(--color-yellow-darker)}.yellowish[_ngcontent-%COMP%]{color:olive}.star__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.reviews[_ngcontent-%COMP%]{width:100%}.review[_ngcontent-%COMP%]{width:100%;border-bottom:1px var(--color-outline) solid;padding:1rem;box-sizing:border-box}.review[_ngcontent-%COMP%]:nth-of-type(1){border-top:1px var(--color-outline) solid}.review__avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background-color:#747373;display:flex;justify-content:center;align-items:center;margin-right:1.5rem}.review__avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.review__avatar__container[_ngcontent-%COMP%]{display:flex;align-items:center}.review__comment[_ngcontent-%COMP%]{width:100%;overflow-wrap:break-word}.star[_ngcontent-%COMP%]{font-size:1.7rem}.smallImportance[_ngcontent-%COMP%]{color:#979797}.centered[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;margin-bottom:1rem}.review__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:0 1rem}.error[_ngcontent-%COMP%]{color:var(--color-red-darker)}textarea[_ngcontent-%COMP%]{width:600px;height:120px;border:3px solid #cccccc;padding:5px;border-radius:2px}.form__element[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:.5rem}.star__container[_ngcontent-%COMP%]{margin-top:.5rem}.form__element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;border:1px var(--color-outline) solid;padding:.5rem}.btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:1rem 2rem;background:var(--gradient-green);border-radius:10px;font-size:1.2rem;margin-top:2rem;cursor:pointer;border:none}']}),n})();const KO=function(n){return{hidden:n}},FF=function(n){return{lowTripsLeft:n}};function LF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",21)(1,"div",22)(2,"div",23),u.NdJ("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.subtractTrip())})("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.addToCart())}),u._uU(3,"-"),u.qZA()(),u.TgZ(4,"div",24),u._uU(5),u.qZA(),u.TgZ(6,"div",22)(7,"div",25),u.NdJ("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.addTrip())})("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.addToCart())}),u._uU(8,"+"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(2),u.Q6J("ngClass",u.VKq(4,KO,t.trip.amount<=0)),u.xp6(2),u.Q6J("ngClass",u.VKq(6,FF,t.tripsLeft()<=3)),u.xp6(1),u.Oqu(t.trip.amount),u.xp6(2),u.Q6J("ngClass",u.VKq(8,KO,t.trip.amount>=t.trip.availableTrips))}}function VF(n,e){1&n&&(u.TgZ(0,"div",21)(1,"div",26),u._uU(2,"Trip out of stock"),u.qZA()())}let UF=(()=>{class n{constructor(t,r,s,c){this.route=t,this._tripsService=r,this._cartService=s,this.router=c,this.trip={key:"",id:-1,name:"",destCountry:"",startDate:"",endDate:"",price:0,description:"",availableTrips:0,imgLink:[],reviews:[],amount:0},this.currSlide=0}ngOnInit(){this.tripId=this.route.snapshot.paramMap.get("id");try{if(this.tripId&&isNaN(Number(this.tripId)))throw new Error("Invalid id format");this._tripsService.getTrip(Number(this.tripId)).subscribe(t=>{if(this.trip=function IF(n,e,t){return n.map(r=>({...r.payload.doc.data(),key:r.payload.doc.id,amount:e.getAmountOfItem(r.payload.doc.data().id),reviews:[]}))}(t,this._cartService)[0],-1==this.trip.id)throw new Error("Trip not found");this._tripsService.getReviewsSingleTrip(this.trip.id).subscribe(r=>{this.trip.reviews=r.map(s=>s.payload.doc.data())})})}catch(t){t instanceof Error&&console.log(t.message),this.router.navigate(["/error-404"],{skipLocationChange:!0})}}tripsLeft(){return this.trip.availableTrips-this.trip.amount}addToCart(){this._cartService.addToCart(this.trip)}addTrip(){this.trip.amount<this.trip.availableTrips&&(this.trip.amount+=1)}subtractTrip(t=-1){this.trip.amount>0&&(this.trip.amount-=1)}nextSlide(){this.currSlide=(this.currSlide+1)%this.trip.imgLink.length}prevSlide(){this.currSlide=this.currSlide>0?this.currSlide-1:this.trip.imgLink.length-1}passTripId(){return Number(this.tripId)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Go),u.Y36(bh),u.Y36(jl),u.Y36(on))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trip-detail"]],decls:42,vars:25,consts:[[1,"trip__card"],[1,"trip__info","column","column--1"],["routerLink","/trips","routerLinkActive","active",1,"btn__back"],[1,"fa-solid","fa-arrow-left"],["routerLinkActive","active",1,"trip__image__container",3,"routerLink"],["alt","",1,"trip__image",3,"src"],[1,"arrow","arrow--left",3,"click"],[1,"fa-solid","fa-angle-left"],[1,"arrow","arrow--right",3,"click"],[1,"fa-solid","fa-chevron-right"],[1,"column","column--2"],[1,"trip__raiting__container"],[1,"trip__raiting"],[3,"reviews","tripId","showTotal"],[1,"line"],[1,"price"],["class","trip__reservation",4,"ngIf"],[1,"trip__description"],[1,"trip__desc"],[1,"trip__form"],[3,"tripId","reviews"],[1,"trip__reservation"],[1,"reservation__holder","noselect"],[1,"reservation__button","reservation__button--subtract",3,"ngClass","click"],[1,"reservation__number","noselect",3,"ngClass"],[1,"reservation__button","reservation__button--add",3,"ngClass","click"],[1,"reservation__number","noselect","nostock"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u._UZ(3,"i",3),u._uU(4,"Back"),u.qZA(),u.TgZ(5,"figure",4),u._UZ(6,"img",5),u.TgZ(7,"div",6),u.NdJ("click",function(){return r.prevSlide()}),u._UZ(8,"i",7),u.qZA(),u.TgZ(9,"div",8),u.NdJ("click",function(){return r.nextSlide()}),u._UZ(10,"i",9),u.qZA()()(),u.TgZ(11,"div",10)(12,"p"),u._uU(13),u.ALo(14,"uppercase"),u.qZA(),u.TgZ(15,"p"),u._uU(16),u.ALo(17,"uppercase"),u.qZA(),u.TgZ(18,"p"),u._uU(19),u.ALo(20,"date"),u.qZA(),u.TgZ(21,"p"),u._uU(22),u.ALo(23,"date"),u.qZA(),u.TgZ(24,"div",11)(25,"p"),u._uU(26,"Rating:"),u.qZA(),u.TgZ(27,"div",12),u._UZ(28,"app-trip-raiting",13),u.qZA()(),u._UZ(29,"hr",14),u.TgZ(30,"p",15),u._uU(31),u.ALo(32,"currency"),u.qZA(),u.YNc(33,LF,9,10,"div",16),u.YNc(34,VF,3,0,"div",16),u.qZA()(),u.TgZ(35,"div",17)(36,"h1"),u._uU(37,"Description"),u.qZA(),u.TgZ(38,"p",18),u._uU(39),u.qZA()(),u.TgZ(40,"div",19),u._UZ(41,"app-trip-review",20),u.qZA()),2&t&&(u.xp6(5),u.MGl("routerLink","/trips/",r.trip.id,""),u.xp6(1),u.Q6J("src",r.trip.imgLink[r.currSlide],u.LSH),u.xp6(7),u.hij("Name: ",u.lcZ(14,15,r.trip.name),""),u.xp6(3),u.hij("Country: ",u.lcZ(17,17,r.trip.destCountry),""),u.xp6(3),u.hij("Date of start: ",u.lcZ(20,19,r.trip.startDate),""),u.xp6(3),u.hij("Date of end: ",u.lcZ(23,21,r.trip.endDate),""),u.xp6(6),u.Q6J("reviews",r.trip.reviews)("tripId",r.trip.id)("showTotal",!0),u.xp6(3),u.Oqu(u.lcZ(32,23,r.trip.price)),u.xp6(2),u.Q6J("ngIf",r.trip.availableTrips>0),u.xp6(1),u.Q6J("ngIf",0==r.trip.availableTrips),u.xp6(5),u.Oqu(r.trip.description),u.xp6(2),u.Q6J("tripId",r.passTripId())("reviews",r.trip.reviews))},dependencies:[Ht,fn,di,Vi,WO,kF,ua,Ci,ql],styles:["[_nghost-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;position:relative;display:flex;flex-direction:column;--color-accent-gray: #ccc}.trip__card[_ngcontent-%COMP%]{display:flex;width:100%;padding:0;margin:0}.price[_ngcontent-%COMP%]{font-size:2rem}.column[_ngcontent-%COMP%]{width:75%;padding:0 2rem 0 0}.column--2[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:1rem}.column--2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], trip__raiting[_ngcontent-%COMP%]{margin:.4rem}.trip__image__container[_ngcontent-%COMP%]{width:100%;height:600px;background-color:#000;overflow:hidden;padding:0;margin:0;position:relative}.trip__image[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;object-fit:cover}.btn__back[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background:var(--gradient-green);z-index:1;padding:.5rem 1rem;border-radius:10px;cursor:pointer}.trip__reservation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;width:100%}.reservation__holder[_ngcontent-%COMP%]{width:30%;display:flex;justify-content:center;align-items:center}.reservation__number[_ngcontent-%COMP%]{padding:0 1rem;font-size:2rem}.reservation__holder[_ngcontent-%COMP%]{font-size:2rem}.reservation__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:5px;cursor:pointer}.reservation__button--subtract[_ngcontent-%COMP%]{background:var(--gradient-red)}.reservation__button--add[_ngcontent-%COMP%]{background:var(--gradient-green)}.hidden[_ngcontent-%COMP%]{display:none}.lowTripsLeft[_ngcontent-%COMP%]{color:var(--color-red-darker)}.trip__raiting__container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}trip__raiting[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.trip__delete[_ngcontent-%COMP%]{position:absolute;top:5px;right:15px;color:var(--color-red-darker);cursor:pointer;font-size:1.5rem}.line[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:96%;background-color:var(--color-accent-gray);height:1px}.nostock[_ngcontent-%COMP%]{font-size:1.5rem}.arrow[_ngcontent-%COMP%]{position:absolute;font-size:3rem;background:var(--gradient-green);width:50px;height:70px;display:flex;justify-content:center;align-items:center;border-radius:10px;cursor:pointer}.arrow--left[_ngcontent-%COMP%]{top:calc(300px - 1.5rem);left:1rem}.arrow--right[_ngcontent-%COMP%]{top:calc(300px - 1.5rem);right:1rem}.trip__description[_ngcontent-%COMP%], .trip__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1rem}h1[_ngcontent-%COMP%]{font-weight:300}"]}),n})();const YO=function(n){return{hidden:n}};function BF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",16),u.NdJ("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.subtractTrip())})("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.addToCart())}),u._uU(1,"-"),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("ngClass",u.VKq(1,YO,t.data.amount<=0))}}function jF(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",17),u.NdJ("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.addTrip())})("click",function(){u.CHM(t);const s=u.oxw(2);return u.KtG(s.addToCart())}),u._uU(1,"+"),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("ngClass",u.VKq(1,YO,t.data.amount>=t.data.availableTrips))}}const HF=function(n){return{lowTripsLeft:n}};function $F(n,e){if(1&n&&(u.TgZ(0,"div",11)(1,"div",12),u.YNc(2,BF,2,3,"div",13),u.qZA(),u.TgZ(3,"div",14),u._uU(4),u.qZA(),u.TgZ(5,"div",12),u.YNc(6,jF,2,3,"div",15),u.qZA()()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("ngIf",t.authService.isUser()),u.xp6(1),u.Q6J("ngClass",u.VKq(4,HF,t.tripsLeft()<=3)),u.xp6(1),u.Oqu(t.data.amount),u.xp6(2),u.Q6J("ngIf",t.authService.isUser())}}function ZF(n,e){1&n&&(u.TgZ(0,"div",11)(1,"div",18),u._uU(2,"Trip out of stock"),u.qZA()())}let qF=(()=>{class n{constructor(t,r){this.cartService=t,this.authService=r,this.removeTrip=new u.vpe,this.data={key:"",id:-1,name:"",destCountry:"",startDate:"",endDate:"",price:0,description:"",availableTrips:0,imgLink:[],reviews:[],amount:0}}ngOnInit(){}addTrip(){this.data.amount<this.data.availableTrips&&(this.data.amount+=1)}subtractTrip(t=-1){this.data.amount>0&&(this.data.amount-=1)}tripsLeft(){return this.data.availableTrips-this.data.amount}addToCart(){this.cartService.addToCart(this.data)}deleteTrip(){this.removeTrip.emit(this.data),this.subtractTrip(-this.data.amount),this.data.amount=0,this.addToCart()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(jl),u.Y36(Ns))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trip"]],inputs:{data:"data"},outputs:{removeTrip:"removeTrip"},decls:29,vars:22,consts:[[1,"trip__info","column","column--1"],["routerLinkActive","active",1,"trip__image__container",3,"routerLink"],["alt","",1,"trip__image",3,"src"],[1,"trip__desc"],[1,"column","column--2"],[1,"trip__raiting__container"],[1,"trip__raiting"],[3,"reviews","tripId"],[1,"line"],[1,"price"],["class","trip__reservation",4,"ngIf"],[1,"trip__reservation"],[1,"reservation__holder","noselect"],["class","reservation__button reservation__button--subtract",3,"ngClass","click",4,"ngIf"],[1,"reservation__number","noselect",3,"ngClass"],["class","reservation__button reservation__button--add",3,"ngClass","click",4,"ngIf"],[1,"reservation__button","reservation__button--subtract",3,"ngClass","click"],[1,"reservation__button","reservation__button--add",3,"ngClass","click"],[1,"reservation__number","noselect","nostock"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"figure",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"p",3),u._uU(4),u.qZA()(),u.TgZ(5,"div",4)(6,"p"),u._uU(7),u.ALo(8,"uppercase"),u.qZA(),u.TgZ(9,"p"),u._uU(10),u.ALo(11,"uppercase"),u.qZA(),u.TgZ(12,"p"),u._uU(13),u.ALo(14,"date"),u.qZA(),u.TgZ(15,"p"),u._uU(16),u.ALo(17,"date"),u.qZA(),u.TgZ(18,"div",5)(19,"p"),u._uU(20,"Rating:"),u.qZA(),u.TgZ(21,"div",6),u._UZ(22,"app-trip-raiting",7),u.qZA()(),u._UZ(23,"hr",8),u.TgZ(24,"p",9),u._uU(25),u.ALo(26,"currency"),u.qZA(),u.YNc(27,$F,7,6,"div",10),u.YNc(28,ZF,3,0,"div",10),u.qZA()),2&t&&(u.xp6(1),u.MGl("routerLink","/trips/",r.data.id,""),u.xp6(1),u.s9C("src",r.data.imgLink[0],u.LSH),u.xp6(2),u.Oqu(r.data.description),u.xp6(3),u.hij("Name: ",u.lcZ(8,12,r.data.name),""),u.xp6(3),u.hij("Country: ",u.lcZ(11,14,r.data.destCountry),""),u.xp6(3),u.hij("Date of start: ",u.lcZ(14,16,r.data.startDate),""),u.xp6(3),u.hij("Date of end: ",u.lcZ(17,18,r.data.endDate),""),u.xp6(6),u.Q6J("reviews",r.data.reviews)("tripId",r.data.id),u.xp6(3),u.Oqu(u.lcZ(26,20,r.data.price)),u.xp6(2),u.Q6J("ngIf",r.data.availableTrips>0),u.xp6(1),u.Q6J("ngIf",0==r.data.availableTrips))},dependencies:[Ht,fn,di,Vi,WO,ua,Ci,ql],styles:["[_nghost-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;padding:1rem;position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center;--color-accent-gray: #ccc}.price[_ngcontent-%COMP%]{font-size:2rem}.column[_ngcontent-%COMP%]{width:75%;padding:0 2rem 0 0}.column--2[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:1rem}.column--2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], trip__raiting[_ngcontent-%COMP%]{margin:.4rem}.trip__image__container[_ngcontent-%COMP%]{width:40%;aspect-ratio:1/1;border-radius:50%;shape-outside:circle(50%);background-color:#000;overflow:hidden;padding:0;float:left}.trip__image[_ngcontent-%COMP%]{margin:0;width:100%;height:100%;object-fit:cover}.trip__reservation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;width:100%}.reservation__holder[_ngcontent-%COMP%]{width:30%;display:flex;justify-content:center;align-items:center}.reservation__number[_ngcontent-%COMP%]{padding:0 1rem;font-size:2rem}.reservation__holder[_ngcontent-%COMP%]{font-size:2rem}.reservation__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:5px;cursor:pointer}.reservation__button--subtract[_ngcontent-%COMP%]{background:var(--gradient-red)}.reservation__button--add[_ngcontent-%COMP%]{background:var(--gradient-green)}.hidden[_ngcontent-%COMP%]{display:none}.lowTripsLeft[_ngcontent-%COMP%]{color:var(--color-red-darker)}.trip__raiting__container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}trip__raiting[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.trip__delete[_ngcontent-%COMP%]{position:absolute;top:5px;right:15px;color:var(--color-red-darker);cursor:pointer;font-size:1.5rem}.line[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:96%;background-color:var(--color-accent-gray);height:1px}.nostock[_ngcontent-%COMP%]{font-size:1.5rem}@media screen and (max-width: 1250px){.column[_ngcontent-%COMP%]{width:55%}.column--2[_ngcontent-%COMP%]{width:45%}}@media screen and (max-width: 800px){.column[_ngcontent-%COMP%]{font-size:.8rem}.reservation__holder[_ngcontent-%COMP%], .reservation__number[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]{font-size:1.5rem}.trip__raiting__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.trip__image__container[_ngcontent-%COMP%]{width:70%;float:none}}"]}),n})(),GF=(()=>{class n{constructor(t,r,s,c,d){this.formBuilder=t,this.countryPipe=r,this.pricePipe=s,this.datePipe=c,this.raitingPipe=d,this.filteredTrips=new u.vpe,this.trips=[],this.searchArgs={destCountry:"",minPrice:"",maxPrice:"",startDate:"",endDate:"",raiting:[]}}ngOnInit(){this.filterForm=this.formBuilder.group({destCountry:[""],minPrice:[""],maxPrice:[""],startDate:[""],endDate:[""],"raiting--1":"","raiting--2":"","raiting--3":"","raiting--4":"","raiting--5":"","raiting--0":""}),this.subscribeFilterFields()}emitFilteredTrips(){this.filteredTrips.emit(this.filterTrips(this.trips,this.searchArgs))}ngOnChanges(t){this.emitFilteredTrips()}subscribeFilterFields(){this.filterForm.get("destCountry")?.valueChanges.subscribe(t=>{this.searchArgs.destCountry=t,this.emitFilteredTrips()}),this.filterForm.get("minPrice")?.valueChanges.subscribe(t=>{this.searchArgs.minPrice=t,this.emitFilteredTrips()}),this.filterForm.get("maxPrice")?.valueChanges.subscribe(t=>{this.searchArgs.maxPrice=t,this.emitFilteredTrips()}),this.filterForm.get("startDate")?.valueChanges.subscribe(t=>{this.searchArgs.startDate=t,this.emitFilteredTrips()}),this.filterForm.get("endDate")?.valueChanges.subscribe(t=>{this.searchArgs.endDate=t,this.emitFilteredTrips()}),this.filterForm.get("raiting--0")?.valueChanges.subscribe(t=>{this.checkboxHandler(t,"0"),this.emitFilteredTrips()}),this.filterForm.get("raiting--1")?.valueChanges.subscribe(t=>{this.checkboxHandler(t,"1"),this.emitFilteredTrips()}),this.filterForm.get("raiting--2")?.valueChanges.subscribe(t=>{this.checkboxHandler(t,"2"),this.emitFilteredTrips()}),this.filterForm.get("raiting--3")?.valueChanges.subscribe(t=>{this.checkboxHandler(t,"3"),this.emitFilteredTrips()}),this.filterForm.get("raiting--4")?.valueChanges.subscribe(t=>{this.checkboxHandler(t,"4"),this.emitFilteredTrips()}),this.filterForm.get("raiting--5")?.valueChanges.subscribe(t=>{this.checkboxHandler(t,"5"),this.emitFilteredTrips()})}checkboxHandler(t,r){this.searchArgs.raiting=t?[...this.searchArgs.raiting,r]:this.searchArgs.raiting.filter(s=>s!=r)}filterTrips(t,r){let s=t;return s=this.countryPipe.transform(s,r.destCountry),s=this.pricePipe.transform(s,r.minPrice,r.maxPrice),s=this.datePipe.transform(s,r.startDate,r.endDate),s=this.raitingPipe.transform(s,r.raiting),s}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qu),u.Y36($O),u.Y36(ZO),u.Y36(qO),u.Y36(GO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trip-filter"]],inputs:{trips:"trips"},outputs:{filteredTrips:"filteredTrips"},features:[u._Bn([$O,ZO,GO,qO]),u.TTD],decls:66,vars:1,consts:[[1,"header"],[3,"formGroup"],[1,"form__element","form__element--destCountry"],["for","destCountry"],["id","destCountry","type","text","formControlName","destCountry",1,"single-input"],[1,"form__element","form__element--price"],[1,"price__label"],[1,"form_input_container--price"],["id","minPrice","type","text","formControlName","minPrice",1,"dual-input"],[1,"period"],["id","maxPrice","type","text","formControlName","maxPrice",1,"dual-input"],[1,"form__element","form__element--date"],[1,"form_input_container--date"],["id","startDate","type","date","formControlName","startDate",1,"dual-input"],["id","endDate","type","date","formControlName","endDate",1,"dual-input"],[1,"form__element","form__element--rating"],["for","rating"],[1,"rating"],["type","checkbox","value","0","id","radio--0","name","raiting","formControlName","raiting--0"],["for","radio--0"],[1,"gray"],["type","checkbox","value","1","id","radio--1","name","raiting","formControlName","raiting--1"],["for","radio--1"],[1,"black"],["type","checkbox","value","2","id","radio--2","name","raiting","formControlName","raiting--2"],["for","radio--2"],["type","checkbox","value","3","id","radio--3","name","raiting","formControlName","raiting--3"],["for","radio--3"],["type","checkbox","value","4","id","radio--4","name","raiting","formControlName","raiting--4"],["for","radio--4"],["type","checkbox","value","5","id","radio--5","name","raiting","formControlName","raiting--5"],["for","radio--5"]],template:function(t,r){1&t&&(u.TgZ(0,"p",0),u._uU(1,"Filter"),u.qZA(),u.TgZ(2,"form",1)(3,"div",2)(4,"label",3),u._uU(5,"Localization: "),u.qZA(),u._UZ(6,"input",4),u.qZA(),u.TgZ(7,"div",5)(8,"label",6),u._uU(9,"Price:"),u.qZA(),u.TgZ(10,"div",7),u._UZ(11,"input",8),u.TgZ(12,"span",9),u._uU(13,"-"),u.qZA(),u._UZ(14,"input",10),u.qZA()(),u.TgZ(15,"div",11)(16,"label"),u._uU(17,"Date:"),u.qZA(),u.TgZ(18,"div",12),u._UZ(19,"input",13),u.TgZ(20,"span",9),u._uU(21,"-"),u.qZA(),u._UZ(22,"input",14),u.qZA()(),u.TgZ(23,"div",15)(24,"label",16),u._uU(25,"Rating:"),u.qZA(),u.TgZ(26,"div",17)(27,"div"),u._UZ(28,"input",18),u.TgZ(29,"label",19)(30,"span",20),u._uU(31,"\u2605\u2605\u2605\u2605\u2605"),u.qZA()()(),u.TgZ(32,"div"),u._UZ(33,"input",21),u.TgZ(34,"label",22)(35,"span",20)(36,"span",23),u._uU(37,"\u2605"),u.qZA(),u._uU(38,"\u2605\u2605\u2605\u2605"),u.qZA()()(),u.TgZ(39,"div"),u._UZ(40,"input",24),u.TgZ(41,"label",25)(42,"span",20)(43,"span",23),u._uU(44,"\u2605\u2605"),u.qZA(),u._uU(45,"\u2605\u2605\u2605"),u.qZA()()(),u.TgZ(46,"div"),u._UZ(47,"input",26),u.TgZ(48,"label",27)(49,"span",20)(50,"span",23),u._uU(51,"\u2605\u2605\u2605"),u.qZA(),u._uU(52,"\u2605\u2605"),u.qZA()()(),u.TgZ(53,"div"),u._UZ(54,"input",28),u.TgZ(55,"label",29)(56,"span",20)(57,"span",23),u._uU(58,"\u2605\u2605\u2605\u2605"),u.qZA(),u._uU(59,"\u2605"),u.qZA()()(),u.TgZ(60,"div"),u._UZ(61,"input",30),u.TgZ(62,"label",31)(63,"span",20)(64,"span",23),u._uU(65,"\u2605\u2605\u2605\u2605\u2605"),u.qZA()()()()()()()),2&t&&(u.xp6(2),u.Q6J("formGroup",r.filterForm))},dependencies:[La,Fo,Ru,Vo,Di,Hu,Va],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content;padding:1rem}.header[_ngcontent-%COMP%]{font-size:2rem;margin:0}.form__element[_ngcontent-%COMP%]{margin-bottom:1rem}.form__element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:1.2rem}input[_ngcontent-%COMP%]{border-radius:5px;border:1px var(--color-outline) solid;padding:.5rem;box-sizing:border-box}.dual-input[_ngcontent-%COMP%]{width:calc(50% - 5px - .15rem)}.period[_ngcontent-%COMP%]{display:inline-block;width:10px;margin:0 .15rem;text-align:center}.single-input[_ngcontent-%COMP%]{width:100%}.rating[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}input[type=checkbox][_ngcontent-%COMP%]{border:none;padding:1rem}"]}),n})();const zF=function(n,e){return{sumAmountRed:n,sumAmountGreen:e}};function WF(n,e){if(1&n&&(u.TgZ(0,"div",7),u._uU(1,"Trips addeed to cart: "),u.TgZ(2,"span",8),u._uU(3),u.qZA()()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("ngClass",u.WLB(2,zF,t.sumAmount<=10,t.sumAmount>10)),u.xp6(1),u.Oqu(t.sumAmount)}}const KF=function(n,e){return{minPrice:n,maxPrice:e}};function YF(n,e){if(1&n&&u._UZ(0,"app-trip",9),2&n){const t=e.$implicit,r=u.oxw();u.Q6J("data",t)("ngClass",u.WLB(2,KF,t.price==r.getMinPrice(r.filteredTrips),t.price==r.getMaxPrice(r.filteredTrips)))}}const QF=[{path:"home",component:Kk},{path:"login",component:Jk,canActivate:[HO]},{path:"register",component:bF,canActivate:[HO]},{path:"trips",component:(()=>{class n{constructor(t,r,s){this._tripsService=t,this._cartService=r,this.authService=s,this.trips=[],this.sumAmount=0,this.formShown=0,this.filteredTrips=[],console.log("const")}ngOnInit(){this._tripsService.getData().subscribe(t=>{this.trips=t.map(r=>({...r.payload.doc.data(),key:r.payload.doc.id,amount:this._cartService.getAmountOfItem(r.payload.doc.data().id),reviews:this._tripsService.getReview(Number(r.payload.doc.data().id))})),this.filteredTrips=this.trips}),this._cartService.getSumOfQuantity2().subscribe(t=>this.sumAmount=t),console.log("init")}filterTrips(t){this.filteredTrips=t}getMaxPrice(t=this.trips){let r=0;return t.forEach(s=>{r=Math.max(s.price,r)}),r}getMinPrice(t=this.trips){let r=9999999;return t.forEach(s=>{r=Math.min(s.price,r)}),r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(bh),u.Y36(jl),u.Y36(Ns))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trips-container"]],features:[u._Bn([])],decls:7,vars:3,consts:[["class","trips__sum",4,"ngIf"],[1,"main__container"],[1,"filter__container"],[3,"trips","filteredTrips"],[1,"trips__container"],[3,"data","ngClass",4,"ngFor","ngForOf"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"],[1,"trips__sum"],[1,"trips__sum--digit",3,"ngClass"],[3,"data","ngClass"]],template:function(t,r){1&t&&(u.YNc(0,WF,4,5,"div",0),u.TgZ(1,"div",1)(2,"div",2)(3,"app-trip-filter",3),u.NdJ("filteredTrips",function(c){return r.filterTrips(c)}),u.qZA()(),u.TgZ(4,"div",4),u.YNc(5,YF,1,5,"app-trip",5),u._UZ(6,"link",6),u.qZA()()),2&t&&(u.Q6J("ngIf",r.authService.isLoggedIn()),u.xp6(3),u.Q6J("trips",r.trips),u.xp6(2),u.Q6J("ngForOf",r.filteredTrips))},dependencies:[Ht,dr,fn,qF,GF],styles:[".trips__container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;align-items:center;width:80%}app-trip[_ngcontent-%COMP%]{margin-bottom:.5rem;width:95%;border-radius:2px;border:1px var(--color-outline) solid}.minPrice[_ngcontent-%COMP%]{border:2px var(--color-red-darker) solid}.maxPrice[_ngcontent-%COMP%]{border:2px var(--color-green-darker) solid}.sumAmountGreen[_ngcontent-%COMP%]{background:var(--gradient-green)}.sumAmountRed[_ngcontent-%COMP%]{background:var(--gradient-red)}.filter__container[_ngcontent-%COMP%]{width:20%;border:1px var(--color-outline) solid;height:-moz-fit-content;height:fit-content}.form__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1rem}.form--btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:1rem;background:var(--gradient-green);border-radius:10px;font-size:1.2rem;cursor:pointer}.main__container[_ngcontent-%COMP%]{display:flex}.trips__sum[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;font-size:2rem;line-height:1.3;font-weight:500;position:sticky;top:0;padding:1rem 0;background-color:var(--color-background);z-index:1}.trips__sum--digit[_ngcontent-%COMP%]{width:50px;height:50px;display:inline-block;border-radius:10px;display:flex;justify-content:center;align-items:center;margin-left:1rem}.hidden[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 700px){.main__container[_ngcontent-%COMP%]{flex-direction:column}.filter__container[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.trips__container[_ngcontent-%COMP%]{width:100%}}"]}),n})()},{path:"trips/:id",component:UF,canActivate:[tw]},{path:"edit/:id",component:zO,canActivate:[tw]},{path:"admin",component:Bk,canActivate:[jO]},{path:"admin/:id",component:yF,canActivate:[jO]},{path:"manage",component:mF,canActivate:[tw]},{path:"cart",component:Zk,canActivate:[tw]},{path:"history",component:Wk,canActivate:[tw]},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"error-404",component:_F},{path:"**",redirectTo:"/error-404"}];let JF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Py.forRoot(QF,{scrollPositionRestoration:"enabled"}),Py]}),n})();const QO_firebaseConfig={apiKey:"AIzaSyDTUEREW2djg-iFBic2pQbJHtyT19Jty-s",authDomain:"trips-fb3a6.firebaseapp.com",projectId:"trips-fb3a6",storageBucket:"trips-fb3a6.appspot.com",messagingSenderId:"457484134800",appId:"1:457484134800:web:d20373e1072aad7397eb15",measurementId:"G-LZYL1GBKCR"};function XF(n,e){if(1&n&&(u.TgZ(0,"div",6)(1,"p",7),u._uU(2),u.qZA(),u.TgZ(3,"p",8),u._uU(4),u.qZA(),u.TgZ(5,"p",9),u._uU(6),u.ALo(7,"currency"),u.qZA()()),2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.amount),u.xp6(2),u.Oqu(u.lcZ(7,3,t.price))}}function eL(n,e){if(1&n&&(u.TgZ(0,"div",5)(1,"div",6)(2,"p",7),u._uU(3,"Nazwa"),u.qZA(),u.TgZ(4,"p",8),u._uU(5,"Ilo\u015b\u0107"),u.qZA(),u.TgZ(6,"p",9),u._uU(7,"Cena"),u.qZA()(),u._UZ(8,"hr"),u.YNc(9,XF,8,5,"div",10),u._UZ(10,"hr"),u.TgZ(11,"div",11)(12,"p",7),u._uU(13,"Suma:"),u.qZA(),u.TgZ(14,"p",8),u._uU(15),u.qZA(),u.TgZ(16,"p",9),u._uU(17),u.ALo(18,"currency"),u.qZA()()()),2&n){const t=u.oxw();u.xp6(9),u.Q6J("ngForOf",t.items),u.xp6(6),u.Oqu(t.countOrder()),u.xp6(2),u.Oqu(u.lcZ(18,3,t.sumOrder()))}}function tL(n,e){1&n&&(u.TgZ(0,"div",12)(1,"p"),u._uU(2,"Cart is Empty :("),u.qZA()())}let nL=(()=>{class n{constructor(t){this.cartService=t,this.items=this.cartService.getItems()}ngOnInit(){}sumOrder(){return this.items.reduce((t,r)=>r.amount*r.price+t,0)}countOrder(){return this.items.reduce((t,r)=>r.amount+t,0)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(jl))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-cart"]],decls:5,vars:2,consts:[[1,"cartBtn"],[1,"cartExpand"],["class","cartNotEmpty",4,"ngIf"],["class","cartEmpty",4,"ngIf"],[1,"fa-solid","fa-cart-shopping"],[1,"cartNotEmpty"],[1,"cartExpand__element"],[1,"name"],[1,"amount"],[1,"price"],["class","cartExpand__element",4,"ngFor","ngForOf"],[1,"summary"],[1,"cartEmpty"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,eL,19,5,"div",2),u.YNc(3,tL,3,0,"div",3),u.qZA(),u._UZ(4,"i",4),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngIf",r.items.length>0),u.xp6(1),u.Q6J("ngIf",r.items.length<=0))},dependencies:[dr,fn,Ci],styles:["[_nghost-%COMP%]{position:relative}.cartBtn[_ngcontent-%COMP%]{background:var(--gradient-green);display:flex;align-items:center;justify-content:center;height:50px;width:50px;border-radius:10px}.cartExpand[_ngcontent-%COMP%]{position:absolute;top:50px;right:0;width:500px;height:-moz-fit-content;height:fit-content;background-color:#fff;z-index:2;display:none;padding:1rem}.cartBtn[_ngcontent-%COMP%]:hover   .cartExpand[_ngcontent-%COMP%]{display:block}.summary[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.cartExpand__element[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.cartExpand__element[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left}.name[_ngcontent-%COMP%]{width:60%}.amount[_ngcontent-%COMP%]{width:15%}.price[_ngcontent-%COMP%]{width:25%}.cartEmpty[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-size:1.5rem;color:gray}"]}),n})();function rL(n,e){1&n&&(u.TgZ(0,"div",22),u._uU(1,"Manage"),u.qZA())}function iL(n,e){1&n&&(u.TgZ(0,"div",23),u._uU(1,"Admin"),u.qZA())}function sL(n,e){1&n&&(u.TgZ(0,"div",24),u._uU(1,"Manage"),u.qZA())}function oL(n,e){1&n&&(u.TgZ(0,"div",23),u._uU(1,"Admin"),u.qZA())}function aL(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",25)(1,"div",26)(2,"div",27),u._uU(3),u.qZA(),u.TgZ(4,"div",28),u._uU(5,"Purchase history"),u.qZA(),u.TgZ(6,"div",29),u.NdJ("click",function(){u.CHM(t);const s=u.oxw();return u.KtG(s.logout())}),u._uU(7,"Logout"),u.qZA()(),u._UZ(8,"i",30),u.qZA()}if(2&n){const t=u.oxw();u.xp6(3),u.hij("Welcome back ",null==t.userData?null:t.userData.name,"")}}function uL(n,e){1&n&&(u.TgZ(0,"div",31),u._UZ(1,"i",32),u.qZA())}function cL(n,e){1&n&&u._UZ(0,"app-cart",33)}function lL(n,e){1&n&&(u.TgZ(0,"div",34),u._uU(1,"Login"),u.qZA())}function dL(n,e){1&n&&(u.TgZ(0,"div",35),u._uU(1,"Register"),u.qZA())}let hL=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.checked=!1,this.userData=null,this.authService.getUserData().subscribe(s=>this.userData=s)}ngOnInit(){}changeCheckState(){this.checked=!this.checked}logout(){this.authService.signOut(),this.router.navigate(["/home"])}logUser(){console.log(this.authService.isLoggedIn()),console.log(this.userData)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ns),u.Y36(on))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-nav"]],decls:30,vars:10,consts:[[1,"nav__container"],["routerLink","/home","routerLinkActive","active",1,"nav__logo"],[1,"nav__control"],["routerLink","/home","routerLinkActive","active",1,"nav__control__element"],["routerLink","/trips","routerLinkActive","active",1,"nav__control__element"],["class","nav__control__element","routerLink","/manage","routerLinkActive","active",4,"ngIf"],["class","nav__control__element","routerLink","/admin","routerLinkActive","active",4,"ngIf"],[1,"lines"],["type","checkbox",1,"lines__button",3,"checked","click"],[1,"mobile-nav__container"],[1,"fake-header"],[1,"mobile-nav"],["routerLink","/home","routerLinkActive","active",1,"mobile-nav__element",3,"click"],["routerLink","/trips","routerLinkActive","active",1,"mobile-nav__element",3,"click"],["class","mobile-nav__element","routerLink","/manage","routerLinkActive","active",4,"ngIf"],[1,"lines__element"],[1,"nav__btns"],["class","btn btn--user",4,"ngIf"],["class","btn btn--notification",4,"ngIf"],["routerLink","/cart","class","btn--cart",4,"ngIf"],["class","btn btn--login","routerLink","/login","routerLinkActive","active",4,"ngIf"],["class","btn btn--register","routerLink","/register","routerLinkActive","active",4,"ngIf"],["routerLink","/manage","routerLinkActive","active",1,"nav__control__element"],["routerLink","/admin","routerLinkActive","active",1,"nav__control__element"],["routerLink","/manage","routerLinkActive","active",1,"mobile-nav__element"],[1,"btn","btn--user"],[1,"userExpand"],[1,"userExpand__element","special"],["routerLink","/history","routerLinkActive","active",1,"userExpand__element"],[1,"userExpand__element",3,"click"],[1,"fa-solid","fa-user"],[1,"btn","btn--notification"],[1,"fa-solid","fa-bell"],["routerLink","/cart",1,"btn--cart"],["routerLink","/login","routerLinkActive","active",1,"btn","btn--login"],["routerLink","/register","routerLinkActive","active",1,"btn","btn--register"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._uU(2," TripsShop "),u.qZA(),u.TgZ(3,"div",2)(4,"div",3),u._uU(5,"Home"),u.qZA(),u.TgZ(6,"div",4),u._uU(7,"Trips"),u.qZA(),u.YNc(8,rL,2,0,"div",5),u.YNc(9,iL,2,0,"div",6),u.TgZ(10,"div",7)(11,"input",8),u.NdJ("click",function(){return r.changeCheckState()}),u.qZA(),u.TgZ(12,"div",9),u._UZ(13,"div",10),u.TgZ(14,"nav",11)(15,"div",12),u.NdJ("click",function(){return r.changeCheckState()}),u._uU(16,"Home"),u.qZA(),u.TgZ(17,"div",13),u.NdJ("click",function(){return r.changeCheckState()}),u._uU(18,"Trips"),u.qZA(),u.YNc(19,sL,2,0,"div",14),u.YNc(20,oL,2,0,"div",6),u.qZA()(),u._UZ(21,"div",15)(22,"div",15)(23,"div",15),u.qZA()(),u.TgZ(24,"div",16),u.YNc(25,aL,9,1,"div",17),u.YNc(26,uL,2,0,"div",18),u.YNc(27,cL,1,0,"app-cart",19),u.YNc(28,lL,2,0,"div",20),u.YNc(29,dL,2,0,"div",21),u.qZA()()),2&t&&(u.xp6(8),u.Q6J("ngIf",r.authService.isManager()||r.authService.isAdmin()),u.xp6(1),u.Q6J("ngIf",r.authService.isAdmin()),u.xp6(2),u.Q6J("checked",r.checked),u.xp6(8),u.Q6J("ngIf",r.authService.isManager()||r.authService.isAdmin()),u.xp6(1),u.Q6J("ngIf",r.authService.isAdmin()),u.xp6(5),u.Q6J("ngIf",r.authService.isLoggedIn()),u.xp6(1),u.Q6J("ngIf",r.authService.isLoggedIn()),u.xp6(1),u.Q6J("ngIf",r.authService.isLoggedIn()),u.xp6(1),u.Q6J("ngIf",!r.authService.isLoggedIn()),u.xp6(1),u.Q6J("ngIf",!r.authService.isLoggedIn()))},dependencies:[fn,di,Vi,nL],styles:[".nav__container[_ngcontent-%COMP%]{width:100%;height:80px;display:flex;justify-content:space-between;align-items:center;padding:0 1rem;box-sizing:border-box}.btn[_ngcontent-%COMP%]{width:100px;height:100%;display:flex;align-items:center;justify-content:center;margin-right:.5rem}.nav__control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:300px}.nav__control__element[_ngcontent-%COMP%]{width:70px;text-align:center}.btn--user[_ngcontent-%COMP%], .btn--notification[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px;width:50px;border-radius:10px;color:var(--green-darker)}.nav__btns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;width:30%}.nav__logo[_ngcontent-%COMP%]{width:30%}.nav__control__element[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .nav__logo[_ngcontent-%COMP%]{cursor:pointer}.btn--user[_ngcontent-%COMP%]{position:relative}.userExpand[_ngcontent-%COMP%]{position:absolute;top:50px;right:0;width:200px;height:-moz-fit-content;height:fit-content;background-color:#fff;z-index:2;display:none;padding:1rem}.btn--user[_ngcontent-%COMP%]:hover   .userExpand[_ngcontent-%COMP%]{display:block}.userExpand__element[_ngcontent-%COMP%]{padding:.5rem;border-bottom:1px var(--color-outline) solid}.special[_ngcontent-%COMP%]{text-align:center;cursor:default;font-weight:600}.userExpand__element[_ngcontent-%COMP%]:nth-last-of-type(1){border-bottom:none}.lines[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;justify-content:center;align-items:center;position:relative}.lines__element[_ngcontent-%COMP%]{display:none;width:40px;height:5px;background-color:#000;border-radius:10px;margin-bottom:5px;z-index:2}.lines__button[_ngcontent-%COMP%]{width:100%;height:90%;position:absolute;opacity:0;cursor:pointer;z-index:3}.mobile-nav__container[_ngcontent-%COMP%]{position:fixed;top:-100%;left:0;width:100%;height:100%;z-index:2;background-color:#fff}.btn--login[_ngcontent-%COMP%], .btn--register[_ngcontent-%COMP%]{border-radius:10px;border:2px var(--color-green) solid}.btn--login[_ngcontent-%COMP%]{border:2px var(--color-green) solid}.btn--register[_ngcontent-%COMP%]{background:var(--color-green)}.btn--register[_ngcontent-%COMP%]:hover{background:none}.btn--login[_ngcontent-%COMP%]:hover{background:var(--color-green)}@media screen and (max-width: 800px){.header__logo[_ngcontent-%COMP%]{font-size:1.5rem}.mobile-nav__container[_ngcontent-%COMP%]{display:block;height:100vh;transition:transform .6s ease-in-out;font-size:2rem}.mobile-nav__container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.nav__control__element[_ngcontent-%COMP%]{display:none}.lines__element[_ngcontent-%COMP%]{display:block;transition:all .6s ease-in}.lines__button[_ngcontent-%COMP%]:checked + .mobile-nav__container[_ngcontent-%COMP%]{transform:translateY(100%)}.lines__button[_ngcontent-%COMP%]:checked ~ .lines__element[_ngcontent-%COMP%]:nth-of-type(3){opacity:0}.lines__button[_ngcontent-%COMP%]:checked ~ .lines__element[_ngcontent-%COMP%]:nth-of-type(2){transform:translateY(12px) rotate(45deg)}.lines__button[_ngcontent-%COMP%]:checked ~ .lines__element[_ngcontent-%COMP%]:nth-of-type(4){transform:translateY(-8px) rotate(-45deg)}.mobile-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.mobile-nav__element[_ngcontent-%COMP%]{height:25%;align-self:center;cursor:pointer}.mobile-nav__element[_ngcontent-%COMP%]:nth-of-type(1){margin-top:70px}}"]}),n})(),fL=(()=>{class n{constructor(){this.title="tripsShop"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&u._UZ(0,"app-nav")(1,"router-outlet")},dependencies:[Tg,hL],styles:["[_nghost-%COMP%]{padding:0;margin:0}"]}),n})(),pL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[fL]}),n.\u0275inj=u.cJS({providers:[bh,jl,Ns],imports:[Vc,Ro,Zu,JF,Ss.hO.initializeApp(QO_firebaseConfig),Vk]}),n})();(0,u.G48)(),Tu().bootstrapModule(pL).catch(n=>console.error(n))},5867:(ot,De,k)=>{k.d(De,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=k(9681);(0,u.registerVersion)("firebase","9.14.0","app")},127:(ot,De,k)=>{k.d(De,{Z:()=>u.Z});var u=k(3942);u.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(ot,De,k)=>{k.r(De);var u=k(5861),J=k(3942),N=k(2090),se=k(9681),re=k(1877),le=k(655),ue=k(4859);const we=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new re.Yd("@firebase/auth");function nt(_,...f){Ke.logLevel<=re.in.ERROR&&Ke.error(`Auth (${se.SDK_VERSION}): ${_}`,...f)}function Ae(_,...f){throw Be(_,...f)}function ye(_,...f){return Be(_,...f)}function Ce(_,f,g){const v=Object.assign(Object.assign({},Xe()),{[f]:g});return new N.LL("auth","Firebase",v).create(f,{appName:_.name})}function Ue(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ae(_,"argument-error"),Ce(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(_,...f){if("string"!=typeof _){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=_.name),_._errorFactory.create(g,...v)}return ge.create(_,...f)}function U(_,f,...g){if(!_)throw Be(f,...g)}function pe(_){const f="INTERNAL ASSERTION FAILED: "+_;throw nt(f),new Error(f)}function G(_,f){_||pe(f)}const Q=new Map;function ne(_){G(_ instanceof Function,"Expected a class definition");let f=Q.get(_);return f?(G(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Q.set(_,f),f)}function Re(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function at(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class sn{constructor(f,g){this.shortDelay=f,this.longDelay=g,G(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Vt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _n(_,f){G(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class zt{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sr=new sn(3e4,6e4);function Ot(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function un(_,f,g,v){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,u.Z)(function*(_,f,g,v,A={}){return yi(_,A,(0,u.Z)(function*(){let O={},Z={};v&&("GET"===f?Z=v:O={body:JSON.stringify(v)});const ae=(0,N.xO)(Object.assign({key:_.config.apiKey},Z)).slice(1),Le=yield _._getAdditionalHeaders();return Le["Content-Type"]="application/json",_.languageCode&&(Le["X-Firebase-Locale"]=_.languageCode),zt.fetch()(vi(_,_.config.apiHost,g,ae),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function yi(_,f,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,u.Z)(function*(_,f,g){_._canInitEmulator=!1;const v=Object.assign(Object.assign({},Yt),f);try{const A=new ii(_),O=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const Z=yield O.json();if("needConfirmation"in Z)throw si(_,"account-exists-with-different-credential",Z);if(O.ok&&!("errorMessage"in Z))return Z;{const ae=O.ok?Z.errorMessage:Z.error.message,[Le,Qe]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw si(_,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw si(_,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw si(_,"user-disabled",Z);const vt=v[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ce(_,vt,Qe);Ae(_,vt)}}catch(A){if(A instanceof N.ZR)throw A;Ae(_,"network-request-failed")}})).apply(this,arguments)}function jr(_,f,g,v){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,u.Z)(function*(_,f,g,v,A={}){const O=yield un(_,f,g,v,A);return"mfaPendingCredential"in O&&Ae(_,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function vi(_,f,g,v){const A=`${f}${g}?${v}`;return _.config.emulator?_n(_.config,A):`${_.config.apiScheme}://${A}`}class ii{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),Sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function si(_,f,g){const v={appName:_.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const A=ye(_,f,v);return A.customData._tokenResponse=g,A}function We(){return(We=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function _r(_,f){return cs.apply(this,arguments)}function cs(){return(cs=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zn(_,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Ai(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function hn(){return(hn=(0,u.Z)(function*(_,f=!1){const g=(0,N.m9)(_),v=yield g.getIdToken(f),A=it(v);U(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,Z=O?.sign_in_provider;return{claims:A,token:v,authTime:Ai(ht(A.auth_time)),issuedAtTime:Ai(ht(A.iat)),expirationTime:Ai(ht(A.exp)),signInProvider:Z||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(_){return 1e3*Number(_)}function it(_){var f;const[g,v,A]=_.split(".");if(void 0===g||void 0===v||void 0===A)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,N.tV)(v);return O?JSON.parse(O):(nt("Failed to decode base64 JWT payload"),null)}catch(O){return nt("Caught error parsing JWT payload as JSON",null===(f=O)||void 0===f?void 0:f.toString()),null}}function cr(_,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,u.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof N.ZR&&Hr(v)&&_.auth.currentUser===_&&(yield _.auth.signOut()),v}})).apply(this,arguments)}function Hr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Dt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,u.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===(null===(g=v)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class ls{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ai(this.lastLoginAt),this.creationTime=Ai(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jt(_){return Si.apply(this,arguments)}function Si(){return(Si=(0,u.Z)(function*(_){var f;const g=_.auth,v=yield _.getIdToken(),A=yield cr(_,zn(g,{idToken:v}));U(A?.users.length,g,"internal-error");const O=A.users[0];_._notifyReloadListener(O);const Z=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?Je(O.providerUserInfo):[],ae=Mr(_.providerData,Z),vt=!!_.isAnonymous&&!(_.email&&O.passwordHash||ae?.length),ft={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ae,metadata:new ls(O.createdAt,O.lastLoginAt),isAnonymous:vt};Object.assign(_,ft)})).apply(this,arguments)}function Wn(){return(Wn=(0,u.Z)(function*(_){const f=(0,N.m9)(_);yield Jt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Mr(_,f){return[..._.filter(v=>!f.some(A=>A.providerId===v.providerId)),...f]}function Je(_){return _.map(f=>{var{providerId:g}=f,v=(0,le._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Ye(){return(Ye=(0,u.Z)(function*(_,f){const g=yield yi(_,{},(0,u.Z)(function*(){const v=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:O}=_.config,Z=vi(_,A,"/v1/token",`key=${O}`),ae=yield _._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",zt.fetch()(Z,{method:"POST",headers:ae,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function nn(_){const f=it(_);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,u.Z)(function*(){return U(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,u.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:Z}=yield function be(_,f){return Ye.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(A,O,Number(Z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:A,expirationTime:O}=g,Z=new yt;return v&&(U("string"==typeof v,"internal-error",{appName:f}),Z.refreshToken=v),A&&(U("string"==typeof A,"internal-error",{appName:f}),Z.accessToken=A),O&&(U("number"==typeof O,"internal-error",{appName:f}),Z.expirationTime=O),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new yt,this.toJSON())}_performRefresh(){return pe("not implemented")}}function mt(_,f){U("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class kt{constructor(f){var{uid:g,auth:v,stsTokenManager:A}=f,O=(0,le._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new ls(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,u.Z)(function*(){const v=yield cr(g,g.stsTokenManager.getToken(g.auth,f));return U(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function Vn(_){return hn.apply(this,arguments)}(this,f)}reload(){return function Xt(_){return Wn.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new kt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,u.Z)(function*(){let A=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield Jt(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,u.Z)(function*(){const g=yield f.getIdToken();return yield cr(f,function ia(_,f){return We.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,A,O,Z,ae,Le,Qe,vt;const ft=null!==(v=g.displayName)&&void 0!==v?v:void 0,gr=null!==(A=g.email)&&void 0!==A?A:void 0,mr=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,so=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,rg=null!==(ae=g.tenantId)&&void 0!==ae?ae:void 0,ef=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,ig=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,La=null!==(vt=g.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:sg,emailVerified:tf,isAnonymous:nf,providerData:og,stsTokenManager:rf}=g;U(sg&&rf,f,"internal-error");const P_=yt.fromJSON(this.name,rf);U("string"==typeof sg,f,"internal-error"),mt(ft,f.name),mt(gr,f.name),U("boolean"==typeof tf,f,"internal-error"),U("boolean"==typeof nf,f,"internal-error"),mt(mr,f.name),mt(so,f.name),mt(rg,f.name),mt(ef,f.name),mt(ig,f.name),mt(La,f.name);const il=new kt({uid:sg,auth:f,email:gr,emailVerified:tf,displayName:ft,isAnonymous:nf,photoURL:so,phoneNumber:mr,tenantId:rg,stsTokenManager:P_,createdAt:ig,lastLoginAt:La});return og&&Array.isArray(og)&&(il.providerData=og.map(sf=>Object.assign({},sf))),ef&&(il._redirectEventId=ef),il}static _fromIdTokenResponse(f,g,v=!1){return(0,u.Z)(function*(){const A=new yt;A.updateFromServerResponse(g);const O=new kt({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:v});return yield Jt(O),O})()}}const L=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,v){var A=this;return(0,u.Z)(function*(){A.storage[g]=v})()}_get(g){var v=this;return(0,u.Z)(function*(){const A=v.storage[g];return void 0===A?null:A})()}_remove(g){var v=this;return(0,u.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return _.type="NONE",_})();function z(_,f,g){return`firebase:${_}:${f}:${g}`}class ve{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:A,name:O}=this.auth;this.fullUserKey=z(this.userKey,A.apiKey,O),this.fullPersistenceKey=z("persistence",A.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,u.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?kt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,u.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,u.Z)(function*(){if(!g.length)return new ve(ne(L),f,v);const A=(yield Promise.all(g.map(function(){var Qe=(0,u.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let O=A[0]||ne(L);const Z=z(v,f.config.apiKey,f.name);let ae=null;for(const Qe of g)try{const vt=yield Qe._get(Z);if(vt){const ft=kt._fromJSON(f,vt);Qe!==O&&(ae=ft),O=Qe;break}}catch{}const Le=A.filter(Qe=>Qe._shouldAllowMigration);return O._shouldAllowMigration&&Le.length?(O=Le[0],ae&&(yield O._set(Z,ae.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,u.Z)(function*(vt){if(vt!==O)try{yield vt._remove(Z)}catch{}});return function(vt){return Qe.apply(this,arguments)}}())),new ve(O,f,v)):new ve(O,f,v)})()}}function Y(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(dn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if($e(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ve(f))return"Blackberry";if(He(f))return"Webos";if(ut(f))return"Safari";if((f.includes("chrome/")||Wt(f))&&!f.includes("edge/"))return"Chrome";if(qt(f))return"Android";{const v=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function $e(_=(0,N.z$)()){return/firefox\//i.test(_)}function ut(_=(0,N.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Wt(_=(0,N.z$)()){return/crios\//i.test(_)}function dn(_=(0,N.z$)()){return/iemobile/i.test(_)}function qt(_=(0,N.z$)()){return/android/i.test(_)}function Ve(_=(0,N.z$)()){return/blackberry/i.test(_)}function He(_=(0,N.z$)()){return/webos/i.test(_)}function Lt(_=(0,N.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function ks(_=(0,N.z$)()){return Lt(_)||qt(_)||He(_)||Ve(_)||/windows phone/i.test(_)||dn(_)}function ds(_,f=[]){let g;switch(_){case"Browser":g=Y((0,N.z$)());break;case"Worker":g=`${Y((0,N.z$)())}-${_}`;break;default:g=_}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${v}`}class go{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=O=>new Promise((Z,ae)=>{try{Z(f(O))}catch(Le){ae(Le)}});v.onAbort=g,this.queue.push(v);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,u.Z)(function*(){var v;if(g.auth.currentUser===f)return;const A=[];try{for(const O of g.queue)yield O(f),O.onAbort&&A.push(O.onAbort)}catch(O){A.reverse();for(const Z of A)try{Z()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(v=O)||void 0===v?void 0:v.message})}})()}}class Pt{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fs(this),this.idTokenSubscription=new Fs(this),this.beforeStateQueue=new go(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var A,O;if(!v._deleted&&(v.persistenceManager=yield ve.create(v,f),!v._deleted)){if(null!==(A=v._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(O=v.currentUser)||void 0===O?void 0:O.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,u.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,u.Z)(function*(){var v;const A=yield g.assertedPersistence.getCurrentUser();let O=A,Z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ae=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Le=O?._redirectEventId,Qe=yield g.tryRedirectSignIn(f);(!ae||ae===Le)&&Qe?.user&&(O=Qe.user,Z=!0)}if(!O)return g.directlySetCurrentUser(null);if(!O._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(O)}catch(ae){O=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ae))}return O?g.reloadAndSetCurrentUserOrClear(O):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===O._redirectEventId?g.directlySetCurrentUser(O):g.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var g=this;return(0,u.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,u.Z)(function*(){var v;try{yield Jt(f)}catch(A){if("auth/network-request-failed"!==(null===(v=A)||void 0===v?void 0:v.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,u.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,u.Z)(function*(){const v=f?(0,N.m9)(f):null;return v&&U(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,u.Z)(function*(){if(!v._deleted)return f&&U(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,u.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,u.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,u.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&ne(f)||g._popupRedirectResolver;U(v,g,"argument-error"),g.redirectPersistenceManager=yield ve.create(g,[ne(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,u.Z)(function*(){var v,A;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,u.Z)(function*(){if(f===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,A){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(Z,this,"internal-error"),Z.then(()=>O(this.currentUser)),"function"==typeof g?f.addObserver(g,v,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ds(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,u.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function wn(_){return(0,N.m9)(_)}class Fs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xi(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function hs(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class lr{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return pe("not implemented")}_getIdTokenResponse(f){return pe("not implemented")}_linkToIdToken(f,g){return pe("not implemented")}_getReauthenticationResolver(f){return pe("not implemented")}}function jn(_,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:resetPassword",Ot(_,f))})).apply(this,arguments)}function Ht(_,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function _c(_,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",Ot(_,f))})).apply(this,arguments)}function dr(){return(dr=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signInWithPassword",Ot(_,f))})).apply(this,arguments)}function ps(_,f){return wi.apply(this,arguments)}function wi(){return(wi=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:sendOobCode",Ot(_,f))})).apply(this,arguments)}function fn(_,f){return yc.apply(this,arguments)}function yc(){return(yc=(0,u.Z)(function*(_,f){return ps(_,f)})).apply(this,arguments)}function ir(_,f){return Or.apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(_,f){return ps(_,f)})).apply(this,arguments)}function eu(_,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,u.Z)(function*(_,f){return ps(_,f)})).apply(this,arguments)}function vc(_,f){return yr.apply(this,arguments)}function yr(){return(yr=(0,u.Z)(function*(_,f){return ps(_,f)})).apply(this,arguments)}function Hl(){return(Hl=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signInWithEmailLink",Ot(_,f))})).apply(this,arguments)}function wc(){return(wc=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signInWithEmailLink",Ot(_,f))})).apply(this,arguments)}class Cc extends lr{constructor(f,g,v,A=null){super("password",v),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new Cc(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new Cc(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,u.Z)(function*(){switch(g.signInMethod){case"password":return function oa(_,f){return dr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ih(_,f){return Hl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,u.Z)(function*(){switch(v.signInMethod){case"password":return Ht(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Dh(_,f){return wc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Yn(_,f){return $l.apply(this,arguments)}function $l(){return($l=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signInWithIdp",Ot(_,f))})).apply(this,arguments)}class ji extends lr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ji(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ae("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A}=g,O=(0,le._T)(g,["providerId","signInMethod"]);if(!v||!A)return null;const Z=new ji(v,A);return Z.idToken=O.idToken||void 0,Z.accessToken=O.accessToken||void 0,Z.secret=O.secret,Z.nonce=O.nonce,Z.pendingToken=O.pendingToken||null,Z}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Yn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Yn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,N.xO)(g)}return f}}function xp(_,f){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:sendVerificationCode",Ot(_,f))})).apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ot(_,f))})).apply(this,arguments)}function ua(){return(ua=(0,u.Z)(function*(_,f){const g=yield jr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ot(_,f));if(g.temporaryProof)throw si(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Op={USER_NOT_FOUND:"user-not-found"};function Gl(){return(Gl=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ot(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Op)})).apply(this,arguments)}class ms extends lr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new ms({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new ms({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Ec(_,f){return gs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Mp(_,f){return ua.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ql(_,f){return Gl.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:O}=f;return v||g||A||O?new ms({verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:O}):null}}class tu{constructor(f){var g,v,A,O,Z,ae;const Le=(0,N.zd)((0,N.pd)(f)),Qe=null!==(g=Le.apiKey)&&void 0!==g?g:null,vt=null!==(v=Le.oobCode)&&void 0!==v?v:null,ft=function zl(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);U(Qe&&vt&&ft,"argument-error"),this.apiKey=Qe,this.operation=ft,this.code=vt,this.continueUrl=null!==(O=Le.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ae=Le.tenantId)&&void 0!==ae?ae:null}static parseLink(f){const g=function Wl(_){const f=(0,N.zd)((0,N.pd)(_)).link,g=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,v=(0,N.zd)((0,N.pd)(_)).deep_link_id;return(v?(0,N.zd)((0,N.pd)(v)).link:null)||v||g||f||_}(f);try{return new tu(g)}catch{return null}}}let Mi=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,v){return Cc._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const A=tu.parseLink(v);return U(A,"argument-error"),Cc._fromEmailAndCode(g,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Hi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class $i extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ci extends $i{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return U("providerId"in g&&"signInMethod"in g,"argument-error"),ji._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),ji._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ci.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ci.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:O,nonce:Z,providerId:ae}=f;if(!v&&!A&&!g&&!O||!ae)return null;try{return new Ci(ae)._credential({idToken:g,accessToken:v,nonce:Z,pendingToken:O})}catch{return null}}}let ca=(()=>{class _ extends $i{constructor(){super("facebook.com")}static credential(g){return ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),nu=(()=>{class _ extends $i{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A}=g;if(!v&&!A)return null;try{return _.credential(v,A)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),bc=(()=>{class _ extends $i{constructor(){super("github.com")}static credential(g){return ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class la extends lr{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Yn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Yn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A,pendingToken:O}=g;return v&&A&&O&&v===A?new la(v,O):null}static _create(f,g){return new la(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ai extends Hi{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ai.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ai.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=la.fromJSON(f);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return la._create(v,g)}catch{return null}}}let Zr=(()=>{class _ extends $i{constructor(){super("twitter.com")}static credential(g,v){return ji._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=g;if(!v||!A)return null;try{return _.credential(v,A)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function mo(_,f){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signUp",Ot(_,f))})).apply(this,arguments)}class hr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,A=!1){return(0,u.Z)(function*(){const O=yield kt._fromIdTokenResponse(f,v,A),Z=Sh(v);return new hr({user:O,providerId:Z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,u.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const A=Sh(v);return new hr({user:f,providerId:A,_tokenResponse:v,operationType:g})})()}}function Sh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Tn(){return(Tn=(0,u.Z)(function*(_){var f;const g=wn(_);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new hr({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield mo(g,{returnSecureToken:!0}),A=yield hr._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class ru extends N.ZR{constructor(f,g,v,A){var O;super(g.code,g.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,ru.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,A){return new ru(f,g,v,A)}}function Mh(_,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?ru._fromErrorAndOperation(_,O,f,v):O})}function ui(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function iu(){return(iu=(0,u.Z)(function*(_,f){const g=(0,N.m9)(_);yield Gt(!0,g,f);const{providerUserInfo:v}=yield _r(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=ui(v||[]);return g.providerData=g.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Vs(_,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,u.Z)(function*(_,f,g=!1){const v=yield cr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return hr._forOperation(_,"link",v)})).apply(this,arguments)}function Gt(_,f,g){return su.apply(this,arguments)}function su(){return(su=(0,u.Z)(function*(_,f,g){yield Jt(f);const A=!1===_?"provider-already-linked":"no-such-provider";U(ui(f.providerData).has(g)===_,f.auth,A)})).apply(this,arguments)}function Us(_,f){return ou.apply(this,arguments)}function ou(){return(ou=(0,u.Z)(function*(_,f,g=!1){var v;const{auth:A}=_,O="reauthenticate";try{const Z=yield cr(_,Mh(A,O,f,_),g);U(Z.idToken,A,"internal-error");const ae=it(Z.idToken);U(ae,A,"internal-error");const{sub:Le}=ae;return U(_.uid===Le,A,"user-mismatch"),hr._forOperation(_,O,Z)}catch(Z){throw"auth/user-not-found"===(null===(v=Z)||void 0===v?void 0:v.code)&&Ae(A,"user-mismatch"),Z}})).apply(this,arguments)}function Ei(_,f){return au.apply(this,arguments)}function au(){return(au=(0,u.Z)(function*(_,f,g=!1){const v="signIn",A=yield Mh(_,v,f),O=yield hr._fromIdTokenResponse(_,v,A);return g||(yield _._updateCurrentUser(O.user)),O})).apply(this,arguments)}function bn(_,f){return bt.apply(this,arguments)}function bt(){return(bt=(0,u.Z)(function*(_,f){return Ei(wn(_),f)})).apply(this,arguments)}function uu(_,f){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,u.Z)(function*(_,f){const g=(0,N.m9)(_);return yield Gt(!1,g,f.providerId),Vs(g,f)})).apply(this,arguments)}function cu(_,f){return lu.apply(this,arguments)}function lu(){return(lu=(0,u.Z)(function*(_,f){return Us((0,N.m9)(_),f)})).apply(this,arguments)}function Ic(_,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,u.Z)(function*(_,f){return jr(_,"POST","/v1/accounts:signInWithCustomToken",Ot(_,f))})).apply(this,arguments)}function da(){return(da=(0,u.Z)(function*(_,f){const g=wn(_),v=yield Ic(g,{token:f,returnSecureToken:!0}),A=yield hr._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ee{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Ut._fromServerResponse(f,g):Ae(f,"internal-error")}}class Ut extends Ee{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Ut(g)}}function du(_,f,g){var v;U((null===(v=g.url)||void 0===v?void 0:v.length)>0,_,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function An(){return(An=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_),A={requestType:"PASSWORD_RESET",email:f};g&&du(v,A,g),yield ir(v,A)})).apply(this,arguments)}function _o(){return(_o=(0,u.Z)(function*(_,f,g){yield jn((0,N.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function ha(){return(ha=(0,u.Z)(function*(_,f){yield _c((0,N.m9)(_),{oobCode:f})})).apply(this,arguments)}function fa(_,f){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,u.Z)(function*(_,f){const g=(0,N.m9)(_),v=yield jn(g,{oobCode:f}),A=v.requestType;switch(U(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(v.mfaInfo,g,"internal-error");default:U(v.email,g,"internal-error")}let O=null;return v.mfaInfo&&(O=Ee._fromServerResponse(wn(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function Yl(){return(Yl=(0,u.Z)(function*(_,f){const{data:g}=yield fa((0,N.m9)(_),f);return g.email})).apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(_,f,g){const v=wn(_),A=yield mo(v,{returnSecureToken:!0,email:f,password:g}),O=yield hr._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}function Bs(){return(Bs=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_),A={requestType:"EMAIL_SIGNIN",email:f};U(g.handleCodeInApp,v,"argument-error"),g&&du(v,A,g),yield eu(v,A)})).apply(this,arguments)}function ga(){return(ga=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_),A=Mi.credentialWithLink(f,g||Re());return U(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),bn(v,A)})).apply(this,arguments)}function Np(_,f){return xc.apply(this,arguments)}function xc(){return(xc=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:createAuthUri",Ot(_,f))})).apply(this,arguments)}function ma(){return(ma=(0,u.Z)(function*(_,f){const v={identifier:f,continueUri:at()?Re():"http://localhost"},{signinMethods:A}=yield Np((0,N.m9)(_),v);return A||[]})).apply(this,arguments)}function _a(){return(_a=(0,u.Z)(function*(_,f){const g=(0,N.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&du(g.auth,A,f);const{email:O}=yield fn(g.auth,A);O!==_.email&&(yield _.reload())})).apply(this,arguments)}function gu(){return(gu=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&du(v.auth,O,g);const{email:Z}=yield vc(v.auth,O);Z!==_.email&&(yield _.reload())})).apply(this,arguments)}function mu(_,f){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,u.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Rc(){return(Rc=(0,u.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,N.m9)(_),O={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Z=yield cr(v,mu(v.auth,O));v.displayName=Z.displayName||null,v.photoURL=Z.photoUrl||null;const ae=v.providerData.find(({providerId:Le})=>"password"===Le);ae&&(ae.displayName=v.displayName,ae.photoURL=v.photoURL),yield v._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Hs(_,f,g){return _u.apply(this,arguments)}function _u(){return(_u=(0,u.Z)(function*(_,f,g){const{auth:v}=_,O={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(O.email=f),g&&(O.password=g);const Z=yield cr(_,Ht(v,O));yield _._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class qr{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class pn extends qr{constructor(f,g,v,A){super(f,g,v),this.username=A}}class Jl extends qr{constructor(f,g){super(f,"facebook.com",g)}}class kc extends pn{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Ph extends qr{constructor(f,g){super(f,"google.com",g)}}class Fc extends pn{constructor(f,g,v){super(f,"twitter.com",g,v)}}function yu(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Qn(_){var f,g;if(!_)return null;const{providerId:v}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},O=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!v&&_?.idToken){const Z=null===(g=null===(f=it(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new qr(O,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!v)return null;switch(v){case"facebook.com":return new Jl(O,A);case"github.com":return new kc(O,A);case"google.com":return new Ph(O,A);case"twitter.com":return new Fc(O,A,_.screenName||null);case"custom":case"anonymous":return new qr(O,null);default:return new qr(O,v,A)}}(g)}class Zs{constructor(f,g,v){this.type=f,this.credential=g,this.auth=v}static _fromIdtoken(f,g){return new Zs("enroll",f,g)}static _fromMfaPendingCredential(f){return new Zs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Zs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(v=f.multiFactorSession)&&void 0!==v&&v.idToken)return Zs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class wu{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=wn(f),A=g.customData._serverResponse,O=(A.mfaInfo||[]).map(ae=>Ee._fromServerResponse(v,ae));U(A.mfaPendingCredential,v,"internal-error");const Z=Zs._fromMfaPendingCredential(A.mfaPendingCredential);return new wu(Z,O,function(){var ae=(0,u.Z)(function*(Le){const Qe=yield Le._process(v,Z);delete A.mfaInfo,delete A.mfaPendingCredential;const vt=Object.assign(Object.assign({},A),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const ft=yield hr._fromIdTokenResponse(v,g.operationType,vt);return yield v._updateCurrentUser(ft.user),ft;case"reauthenticate":return U(g.user,v,"internal-error"),hr._forOperation(g.user,g.operationType,vt);default:Ae(v,"internal-error")}});return function(Le){return ae.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,u.Z)(function*(){return g.signInResolver(f)})()}}function Cu(_,f){return un(_,"POST","/v2/accounts/mfaEnrollment:start",Ot(_,f))}class Nh{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>Ee._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Nh(f)}getSession(){var f=this;return(0,u.Z)(function*(){return Zs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var v=this;return(0,u.Z)(function*(){const A=f,O=yield v.getSession(),Z=yield cr(v.user,A._process(v.user.auth,O,g));return yield v.user._updateTokensIfNecessary(Z),v.user.reload()})()}unenroll(f){var g=this;return(0,u.Z)(function*(){var v;const A="string"==typeof f?f:f.uid,O=yield g.user.getIdToken(),Z=yield cr(g.user,function nd(_,f){return un(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(_,f))}(g.user.auth,{idToken:O,mfaEnrollmentId:A}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ae})=>ae!==A),yield g.user._updateTokensIfNecessary(Z);try{yield g.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(v=ae)||void 0===v?void 0:v.code))throw ae}})()}}const wo=new WeakMap,qs="__sak";class bu{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(qs,"1"),this.storage.removeItem(qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const va=(()=>{class _ extends bu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ya(){const _=(0,N.z$)();return ut(_)||Lt(_)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ks(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),O=this.localCache[v];A!==O&&g(v,O,A)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((ae,Le,Qe)=>{this.notifyListeners(ae,Qe)});const A=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(A);if(g.newValue!==ae)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!v)return}const O=()=>{const ae=this.storage.getItem(A);!v&&this.localCache[A]===ae||this.notifyListeners(A,ae)},Z=this.storage.getItem(A);!function Kn(){return(0,N.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const O of Array.from(A))O(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var A=()=>super._set,O=this;return(0,u.Z)(function*(){yield A().call(O,g,v),O.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,A=this;return(0,u.Z)(function*(){const O=yield v().call(A,g);return A.localCache[g]=JSON.stringify(O),O})()}_remove(g){var v=()=>super._remove,A=this;return(0,u.Z)(function*(){yield v().call(A,g),delete A.localCache[g]})()}}return _.type="LOCAL",_})(),Pi=(()=>{class _ extends bu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return _.type="SESSION",_})();let sd=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(O=>O.isListeningto(g));if(v)return v;const A=new _(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,u.Z)(function*(){const A=g,{eventId:O,eventType:Z,data:ae}=A.data,Le=v.handlersMap[Z];if(!Le?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:Z});const Qe=Array.from(Le).map(function(){var ft=(0,u.Z)(function*(gr){return gr(A.origin,ae)});return function(gr){return ft.apply(this,arguments)}}()),vt=yield function Ca(_){return Promise.all(_.map(function(){var f=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Qe);A.ports[0].postMessage({status:"done",eventId:O,eventType:Z,response:vt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Ea(_="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return _+g}class Lc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var A=this;return(0,u.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Z,ae;return new Promise((Le,Qe)=>{const vt=Ea("",20);O.port1.start();const ft=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);ae={messageChannel:O,onMessage(gr){const mr=gr;if(mr.data.eventId===vt)switch(mr.data.status){case"ack":clearTimeout(ft),Z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(mr.data.response);break;default:clearTimeout(ft),clearTimeout(Z),Qe(new Error("invalid_response"))}}},A.handlers.add(ae),O.port1.addEventListener("message",ae.onMessage),A.target.postMessage({eventType:f,eventId:vt,data:g},[O.port2])}).finally(()=>{ae&&A.removeMessageHandler(ae)})})()}}function Pn(){return window}function Iu(){return typeof Pn().WorkerGlobalScope<"u"&&"function"==typeof Pn().importScripts}function ba(){return(ba=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const vs="firebaseLocalStorageDb",ws="firebaseLocalStorage",Vc="fbase_key";class zs{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ia(_,f){return _.transaction([ws],f?"readwrite":"readonly").objectStore(ws)}function Eo(){const _=indexedDB.open(vs,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const v=_.result;try{v.createObjectStore(ws,{keyPath:Vc})}catch(A){g(A)}}),_.addEventListener("success",(0,u.Z)(function*(){const v=_.result;v.objectStoreNames.contains(ws)?f(v):(v.close(),yield function ad(){const _=indexedDB.deleteDatabase(vs);return new zs(_).toPromise()}(),f(yield Eo()))}))})}function Wi(_,f,g){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,u.Z)(function*(_,f,g){const v=Ia(_,!0).put({[Vc]:f,value:g});return new zs(v).toPromise()})).apply(this,arguments)}function Da(){return(Da=(0,u.Z)(function*(_,f){const g=Ia(_,!1).get(f),v=yield new zs(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ws(_,f){const g=Ia(_,!0).delete(f);return new zs(g).toPromise()}const bo=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield Eo()),g.db})()}_withRetries(g){var v=this;return(0,u.Z)(function*(){let A=0;for(;;)try{const O=yield v._openDb();return yield g(O)}catch(O){if(A++>3)throw O;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return Iu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=sd._getInstance(function Tu(){return Iu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,u.Z)(function*(A,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(A,O){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,u.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var v,A;if(g.activeServiceWorker=yield function Gs(){return ba.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Lc(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);!O||(null===(v=O[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,u.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Du(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Eo();return yield Wi(g,qs,"1"),yield Ws(g,qs),!0}catch{}return!1})()}_withPendingWrite(g){var v=this;return(0,u.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(O=>Wi(O,g,v)),A.localCache[g]=v,A.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,u.Z)(function*(){const A=yield v._withRetries(O=>function Au(_,f){return Da.apply(this,arguments)}(O,g));return v.localCache[g]=A,A})()}_remove(g){var v=this;return(0,u.Z)(function*(){return v._withPendingWrite((0,u.Z)(function*(){return yield v._withRetries(A=>Ws(A,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const v=yield g._withRetries(Z=>{const ae=Ia(Z,!1).getAll();return new zs(ae).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:Z,value:ae}of v)O.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(ae)&&(g.notifyListeners(Z,ae),A.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!O.has(Z)&&(g.notifyListeners(Z,null),A.push(Z));return A})()}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const O of Array.from(A))O(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Io(_,f){return un(_,"POST","/v2/accounts/mfaSignIn:start",Ot(_,f))}function Cs(){return(Cs=(0,u.Z)(function*(_){return(yield un(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function To(_){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",_),v.onload=f,v.onerror=A=>{const O=ye("internal-error");O.customData=A,g(O)},v.type="text/javascript",v.charset="UTF-8",function Do(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(v)})}function Mu(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ta=1e12;class gn{constructor(f){this.auth=f,this.counter=Ta,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new Rp(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||Ta;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ta))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,u.Z)(function*(){var v;return null===(v=g._widgets.get(f||Ta))||void 0===v||v.execute(),""})()}}class Rp{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;U(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function p_(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<_;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kp=Mu("rcb"),g_=new sn(3e4,6e4);class Rh{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Pn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return U(function iw(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Pn().grecaptcha):new Promise((v,A)=>{const O=Pn().setTimeout(()=>{A(ye(f,"network-request-failed"))},g_.get());Pn()[kp]=()=>{Pn().clearTimeout(O),delete Pn()[kp];const ae=Pn().grecaptcha;if(!ae)return void A(ye(f,"internal-error"));const Le=ae.render;ae.render=(Qe,vt)=>{const ft=Le(Qe,vt);return this.counter++,ft},this.hostLanguage=g,v(ae)},To(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:kp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),A(ye(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Pn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jc{load(f){return(0,u.Z)(function*(){return new gn(f)})()}clearedOneInstance(){}}const __="recaptcha",y_={theme:"light",type:"image"};class or{constructor(f,g=Object.assign({},y_),v){this.parameters=g,this.type=__,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(v),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;U(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jc:new Rh,this.validateStartingState()}verify(){var f=this;return(0,u.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(O=>{const Z=ae=>{!ae||(f.tokenChangeListeners.delete(Z),O(ae))};f.tokenChangeListeners.add(Z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=Pn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,u.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,u.Z)(function*(){U(at()&&!Iu(),f.auth,"internal-error"),yield function Es(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Gr(_){return Cs.apply(this,arguments)}(f.auth);U(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class en{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=ms._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function zr(){return(zr=(0,u.Z)(function*(_,f,g){const v=wn(_),A=yield Cn(v,f,(0,N.m9)(g));return new en(A,O=>bn(v,O))})).apply(this,arguments)}function Wr(){return(Wr=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_);yield Gt(!1,v,"phone");const A=yield Cn(v.auth,f,(0,N.m9)(g));return new en(A,O=>uu(v,O))})).apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_),A=yield Cn(v.auth,f,(0,N.m9)(g));return new en(A,O=>cu(v,O))})).apply(this,arguments)}function Cn(_,f,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,u.Z)(function*(_,f,g){var v;const A=yield g.verify();try{let O;if(U("string"==typeof A,_,"argument-error"),U(g.type===__,_,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const Z=O.session;if("phoneNumber"in O)return U("enroll"===Z.type,_,"internal-error"),(yield Cu(_,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{U("signin"===Z.type,_,"internal-error");const ae=(null===(v=O.multiFactorHint)||void 0===v?void 0:v.uid)||O.multiFactorUid;return U(ae,_,"missing-multi-factor-info"),(yield Io(_,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield xp(_,{phoneNumber:O.phoneNumber,recaptchaToken:A});return Z}}finally{g._reset()}})).apply(this,arguments)}function Ou(){return(Ou=(0,u.Z)(function*(_,f){yield Vs((0,N.m9)(_),f)})).apply(this,arguments)}let Aa=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=wn(g)}verifyPhoneNumber(g,v){return Cn(this.auth,g,(0,N.m9)(v))}static credential(g,v){return ms._fromVerification(g,v)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:A}=g;return v&&A?ms._fromTokenResponse(v,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Pr(_,f){return f?ne(f):(U(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Hc extends lr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Yn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Yn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Yn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Kr(_){return Ei(_.auth,new Hc(_),_.bypassAuthState)}function Sa(_){const{auth:f,user:g}=_;return U(g,f,"internal-error"),Us(g,new Hc(_),_.bypassAuthState)}function bs(_){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,u.Z)(function*(_){const{auth:f,user:g}=_;return U(g,f,"internal-error"),Vs(g,new Hc(_),_.bypassAuthState)})).apply(this,arguments)}class So{constructor(f,g,v,A,O=!1){this.auth=f,this.resolver=v,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,u.Z)(function*(v,A){f.pendingPromise={resolve:v,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(v,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,u.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:O,tenantId:Z,error:ae,type:Le}=f;if(ae)return void g.reject(ae);const Qe={auth:g.auth,requestUri:v,sessionId:A,tenantId:Z||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Qe))}catch(vt){g.reject(vt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Kr;case"linkViaPopup":case"linkViaRedirect":return bs;case"reauthViaPopup":case"reauthViaRedirect":return Sa;default:Ae(this.auth,"internal-error")}}resolve(f){G(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){G(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xo=new sn(2e3,1e4);function Nu(){return(Nu=(0,u.Z)(function*(_,f,g){const v=wn(_);Ue(_,f,Hi);const A=Pr(v,g);return new Ys(v,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function ud(){return(ud=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_);Ue(v.auth,f,Hi);const A=Pr(v.auth,g);return new Ys(v.auth,"reauthViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}function Mo(){return(Mo=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_);Ue(v.auth,f,Hi);const A=Pr(v.auth,g);return new Ys(v.auth,"linkViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}let Ys=(()=>{class _ extends So{constructor(g,v,A,O,Z){super(g,v,O,Z),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const v=yield g.execute();return U(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,u.Z)(function*(){G(1===g.filter.length,"Popup operations only handle one event");const v=Ea();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(ye(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,A;this.pollId=null!==(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,xo.get())};g()}}return _.currentPopupAction=null,_})();const Nr=new Map;class In extends So{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,u.Z)(function*(){let v=Nr.get(g.auth._key());if(!v){try{const O=(yield function Oo(_,f){return Ii.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(O)}catch(A){v=()=>Promise.reject(A)}Nr.set(g.auth._key(),v)}return g.bypassAuthState||Nr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,u.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const A=yield v.auth._redirectUserForId(f.eventId);if(A)return v.user=A,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Ii(){return(Ii=(0,u.Z)(function*(_,f){const g=Zc(f),v=Qi(_);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(g));return yield v._remove(g),A})).apply(this,arguments)}function Po(_,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(function*(_,f){return Qi(_)._set(Zc(f),"true")})).apply(this,arguments)}function Qs(_,f){Nr.set(_._key(),f)}function Qi(_){return ne(_._redirectPersistence)}function Zc(_){return z("pendingRedirect",_.config.apiKey,_.name)}function I(){return(I=(0,u.Z)(function*(_,f,g){const v=wn(_);Ue(_,f,Hi);const A=Pr(v,g);return yield Po(A,v),A._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_);Ue(v.auth,f,Hi);const A=Pr(v.auth,g);yield Po(A,v.auth);const O=yield lt(v);return A._openRedirect(v.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function Ie(){return(Ie=(0,u.Z)(function*(_,f,g){const v=(0,N.m9)(_);Ue(v.auth,f,Hi);const A=Pr(v.auth,g);yield Gt(!1,v,f.providerId),yield Po(A,v.auth);const O=yield lt(v);return A._openRedirect(v.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function dt(){return(dt=(0,u.Z)(function*(_,f){return yield wn(_)._initializationPromise,_t(_,f,!1)})).apply(this,arguments)}function _t(_,f){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(_,f,g=!1){const v=wn(_),A=Pr(v,f),Z=yield new In(v,A,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield v._persistUserIfCurrent(Z.user),yield v._setRedirectUser(null,f)),Z})).apply(this,arguments)}function lt(_){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(_){const f=Ea(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class No{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ma(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Js(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Js(f)){const A=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ye(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Is(f))}saveEventToCache(f){this.cachedEventUids.add(Is(f)),this.lastProcessedEventTime=Date.now()}}function Is(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Js({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function Xs(_){return eo.apply(this,arguments)}function eo(){return(eo=(0,u.Z)(function*(_,f={}){return un(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ko=/^https?/;function Vp(){return(Vp=(0,u.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Xs(_);for(const g of f)try{if(v_(g))return}catch{}Ae(_,"unauthorized-domain")})).apply(this,arguments)}function v_(_){const f=Re(),{protocol:g,hostname:v}=new URL(f);if(_.startsWith("chrome-extension://")){const Z=new URL(_);return""===Z.hostname&&""===v?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===v}if(!ko.test(g))return!1;if(Ro.test(_))return v===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const w_=new sn(3e4,6e4);function Up(){const _=Pn().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let Gc=null;function cd(_){return Gc=Gc||function qc(_){return new Promise((f,g)=>{var v,A,O;function Z(){Up(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Up(),g(ye(_,"network-request-failed"))},timeout:w_.get()})}if(null!==(A=null===(v=Pn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(O=Pn().gapi)||void 0===O||!O.load){const ae=Mu("iframefcb");return Pn()[ae]=()=>{gapi.load?Z():g(ye(_,"network-request-failed"))},To(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Le=>g(Le))}Z()}}).catch(f=>{throw Gc=null,f})}(_),Gc}const Bp=new sn(5e3,15e3),C_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jp(_){const f=_.config;U(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?_n(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:_.name,v:se.SDK_VERSION},A=E_.get(_.config.apiHost);A&&(v.eid=A);const O=_._getFrameworks();return O.length&&(v.fw=O.join(",")),`${g}?${(0,N.xO)(v).slice(1)}`}function Ji(){return Ji=(0,u.Z)(function*(_){const f=yield cd(_),g=Pn().gapi;return U(g,_,"internal-error"),f.open({where:document.body,url:jp(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C_,dontclear:!0},v=>new Promise(function(){var A=(0,u.Z)(function*(O,Z){yield v.restyle({setHideOnLeave:!1});const ae=ye(_,"network-request-failed"),Le=Pn().setTimeout(()=>{Z(ae)},Bp.get());function Qe(){Pn().clearTimeout(Le),O(v)}v.ping(Qe).then(Qe,()=>{Z(ae)})});return function(O,Z){return A.apply(this,arguments)}}()))}),Ji.apply(this,arguments)}const ow={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fo{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xi(_,f,g,v,A,O){U(_.config.authDomain,_,"auth-domain-config-required"),U(_.config.apiKey,_,"invalid-api-key");const Z={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:v,v:se.SDK_VERSION,eventId:A};if(f instanceof Hi){f.setDefaultLanguage(_.languageCode),Z.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Qe]of Object.entries(O||{}))Z[Le]=Qe}if(f instanceof $i){const Le=f.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(Z.scopes=Le.join(","))}_.tenantId&&(Z.tid=_.tenantId);const ae=Z;for(const Le of Object.keys(ae))void 0===ae[Le]&&delete ae[Le];return`${function Hp({config:_}){return _.emulator?_n(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,N.xO)(ae).slice(1)}`}const kn="webStorageSupport";class ld extends class $p{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ld(f)}_finalizeEnroll(f,g,v){return function Eu(_,f){return un(_,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(_,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function xu(_,f){return un(_,"POST","/v2/accounts/mfaSignIn:finalize",Ot(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bh=(()=>{class _{constructor(){}static assertion(g){return ld._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var zc="@firebase/auth",jh="0.20.11";class Zp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var A;f((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ds(){return window}function Fu(){return(Fu=(0,u.Z)(function*(_,f,g){var v;const{BuildInfo:A}=Ds();G(f.sessionId,"AuthEvent did not contain a session ID");const O=yield Gh(f.sessionId),Z={};return Lt()?Z.ibi=A.packageName:qt()?Z.apn=A.packageName:Ae(_,"operation-not-supported-in-this-environment"),A.displayName&&(Z.appDisplayName=A.displayName),Z.sessionId=O,Xi(_,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,Z)})).apply(this,arguments)}function hd(){return(hd=(0,u.Z)(function*(_){const{BuildInfo:f}=Ds(),g={};Lt()?g.iosBundleId=f.packageName:qt()?g.androidPackageName=f.packageName:Ae(_,"operation-not-supported-in-this-environment"),yield Xs(_,g)})).apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(_,f,g){const{cordova:v}=Ds();let A=()=>{};try{yield new Promise((O,Z)=>{let ae=null;function Le(){var ft;O();const gr=null===(ft=v.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof gr&&gr(),"function"==typeof g?.close&&g.close()}function Qe(){ae||(ae=window.setTimeout(()=>{Z(ye(_,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Qe()}f.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),qt()&&document.addEventListener("visibilitychange",vt,!1),A=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",vt,!1),ae&&window.clearTimeout(ae)}})}finally{A()}})).apply(this,arguments)}function Gh(_){return fd.apply(this,arguments)}function fd(){return(fd=(0,u.Z)(function*(_){const f=Yr(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Yr(_){if(G(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let v=0;v<_.length;v++)g[v]=_.charCodeAt(v);return g}(0,N.Pz)("authIdTokenMaxAge"),function Hh(_){(0,se._registerComponent)(new ue.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:O,authDomain:Z}=v.options;return((ae,Le)=>{U(O&&!O.includes(":"),"invalid-api-key",{appName:ae.name}),U(!Z?.includes(":"),"argument-error",{appName:ae.name});const Qe={apiKey:O,authDomain:Z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ds(_)},vt=new Pt(ae,Le,Qe);return function ke(_,f){const g=f?.persistence||[],v=(Array.isArray(g)?g:[g]).map(ne);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(v,f?.popupRedirectResolver)}(vt,g),vt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ue.wA("auth-internal",f=>{const g=wn(f.getProvider("auth").getImmediate());return new Zp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(zc,jh,function dd(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,se.registerVersion)(zc,jh,"esm2017")}("Browser");class pd extends No{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,u.Z)(function*(){yield f.initPromise})()}}function Vo(_){return Di.apply(this,arguments)}function Di(){return(Di=(0,u.Z)(function*(_){const f=yield Wc()._get(Pa(_));return f&&(yield Wc()._remove(Pa(_))),f})).apply(this,arguments)}function gd(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);_.push(f.charAt(v))}return _.join("")}function Wc(){return ne(va)}function Pa(_){return z("authEvent",_.config.apiKey,_.name)}function Uo(_){if(!_?.includes("?"))return{};const[f,...g]=_.split("?");return(0,N.zd)(g.join("?"))}function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Kc(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function Yc(_=(0,N.z$)()){return!("file:"!==Kc()&&"ionic:"!==Kc()&&"capacitor:"!==Kc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function md(){try{const _=self.localStorage,f=Ea();if(_)return _.setItem(f,"1"),_.removeItem(f),!function Jc(_=(0,N.z$)()){return function Qc(){return(0,N.w1)()&&11===document?.documentMode}()||function Bo(_=(0,N.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,N.hl)()}catch{return Xc()&&(0,N.hl)()}return!1}function Xc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Lu(){return(function A_(){return"http:"===Kc()||"https:"===Kc()}()||(0,N.ru)()||Yc())&&!function Na(){return(0,N.b$)()||(0,N.UG)()}()&&md()&&!Xc()}function no(){return Yc()&&typeof document<"u"}function tl(){return(tl=(0,u.Z)(function*(){return!!no()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Qr={LOCAL:"local",NONE:"none",SESSION:"session"},ki=U,S_="persistence";function nl(_){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,u.Z)(function*(_){yield _._initializationPromise;const f=Ra(),g=z(S_,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function Ra(){var _;try{return(null===(_=function Xp(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const ka=U;class li{constructor(){this.browserResolver=ne(class es{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pi,this._completeRedirectFn=_t,this._overrideRedirectResult=Qs}_openPopup(f,g,v,A){var O=this;return(0,u.Z)(function*(){var Z;G(null===(Z=O.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ae=Xi(f,g,v,Re(),A);return function lw(_,f,g,v=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),Z=Math.max((window.screen.availWidth-v)/2,0).toString();let ae="";const Le=Object.assign(Object.assign({},ow),{width:v.toString(),height:A.toString(),top:O,left:Z}),Qe=(0,N.z$)().toLowerCase();g&&(ae=Wt(Qe)?"_blank":g),$e(Qe)&&(f=f||"http://localhost",Le.scrollbars="yes");const vt=Object.entries(Le).reduce((gr,[mr,so])=>`${gr}${mr}=${so},`,"");if(function $r(_=(0,N.z$)()){var f;return Lt(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Qe)&&"_self"!==ae)return function Lo(_,f){const g=document.createElement("a");g.href=_,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",ae),new Fo(null);const ft=window.open(f||"",ae,vt);U(ft,_,"popup-blocked");try{ft.focus()}catch{}return new Fo(ft)}(f,ae,Ea())})()}_openRedirect(f,g,v,A){var O=this;return(0,u.Z)(function*(){return yield O._originValidation(f),function bi(_){Pn().location.href=_}(Xi(f,g,v,Re(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:O}=this.eventManagers[g];return A?Promise.resolve(A):(G(O,"If manager is not set, promise should be"),O)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,u.Z)(function*(){const v=yield function to(_){return Ji.apply(this,arguments)}(f),A=new No(f);return v.register("authEvent",O=>(U(O?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=v,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(kn,{type:kn},A=>{var O;const Z=null===(O=A?.[0])||void 0===O?void 0:O[kn];void 0!==Z&&g(!!Z),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Fh(_){return Vp.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ks()||ut()||Lt()}}),this.cordovaResolver=ne(class I_{constructor(){this._redirectPersistence=Pi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_t,this._overrideRedirectResult=Qs}_initialize(f){var g=this;return(0,u.Z)(function*(){const v=f._key();let A=g.eventManagers.get(v);return A||(A=new pd(f),g.eventManagers.set(v,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,A){var O=this;return(0,u.Z)(function*(){!function Kp(_){var f,g,v,A,O,Z,ae,Le,Qe,vt;const ft=Ds();U("function"==typeof(null===(f=ft?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=ft?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(O=null===(A=null===(v=ft?.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Le=null===(ae=null===(Z=ft?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Le?void 0:Le.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(vt=null===(Qe=ft?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===vt?void 0:vt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield O._initialize(f);yield Z.initialized(),Z.resetRedirect(),function $c(){Nr.clear()}(),yield O._originValidation(f);const ae=function dw(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:gd(),postBody:null,tenantId:_.tenantId,error:ye(_,"no-auth-event")}}(f,v,A);yield function b_(_,f){return Wc()._set(Pa(_),f)}(f,ae);const Le=yield function ku(_,f,g){return Fu.apply(this,arguments)}(f,ae,g),Qe=yield function Zh(_){const{cordova:f}=Ds();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let A=null;v?f.plugins.browsertab.openUrl(_):A=f.InAppBrowser.open(_,function rr(_=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(A)})})}(Le);return function qh(_,f,g){return Oa.apply(this,arguments)}(f,Z,Qe)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Wp(_){return hd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:A,BuildInfo:O}=Ds(),Z=setTimeout((0,u.Z)(function*(){yield Vo(f),g.onEvent(Wh())}),500),ae=function(){var vt=(0,u.Z)(function*(ft){clearTimeout(Z);const gr=yield Vo(f);let mr=null;gr&&ft?.url&&(mr=function zh(_,f){var g,v;const A=function mI(_){const f=Uo(_),g=f.link?decodeURIComponent(f.link):void 0,v=Uo(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Uo(A).link||A||v||g||_}(f);if(A.includes("/__/auth/callback")){const O=Uo(A),Z=O.firebaseError?function Yp(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ae=null===(v=null===(g=Z?.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Le=ae?ye(ae):null;return Le?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(gr,ft.url)),g.onEvent(mr||Wh())});return function(gr){return vt.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,ae);const Le=A,Qe=`${O.packageName.toLowerCase()}://`;Ds().handleOpenURL=function(){var vt=(0,u.Z)(function*(ft){if(ft.toLowerCase().startsWith(Qe)&&ae({url:ft}),"function"==typeof Le)try{Le(ft)}catch(gr){console.error(gr)}});return function(ft){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Pi,this._completeRedirectFn=_t,this._overrideRedirectResult=Qs}_initialize(f){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,A){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,g,v,A)})()}_openRedirect(f,g,v,A){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,g,v,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return no()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ka(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,u.Z)(function*(){if(f.underlyingResolver)return;const g=yield function el(){return tl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Yh(_){return _.unwrap()}function Uu(_){return Bu(_)}function Bu(_){const{_tokenResponse:f}=_ instanceof N.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Aa.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=nu;break;case"facebook.com":v=ca;break;case"github.com":v=bc;break;case"twitter.com":v=Zr;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:Z,pendingToken:ae,nonce:Le}=f;return O||Z||A||ae?ae?g.startsWith("saml.")?la._create(g,ae):ji._fromParams({providerId:g,signInMethod:g,pendingToken:ae,idToken:A,accessToken:O}):new Ci(g).credential({idToken:A,accessToken:O,rawNonce:Le}):null}return _ instanceof N.ZR?v.credentialFromError(_):v.credentialFromResult(_)}function Jr(_,f){return f.catch(g=>{throw g instanceof N.ZR&&function Qh(_,f){var g,v;const A=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(v=f)||void 0===v?void 0:v.code))f.resolver=new M_(_,function xn(_,f){var g;const v=(0,N.m9)(_),A=f;return U(f.customData.operationType,v,"argument-error"),U(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),wu._fromError(v,A)}(_,f));else if(A){const O=Bu(f),Z=f;O&&(Z.credential=O,Z.tenantId=A.tenantId||void 0,Z.email=A.email||void 0,Z.phoneNumber=A.phoneNumber||void 0)}}(_,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Uu(g),additionalUserInfo:yu(g),user:ro.getOrCreate(A)}})}function _d(_,f){return yd.apply(this,arguments)}function yd(){return(yd=(0,u.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>Jr(_,g.confirm(v))}})).apply(this,arguments)}class M_{constructor(f,g){this.resolver=g,this.auth=function rl(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Jr(Yh(this.auth),this.resolver.resolveSignIn(f))}}class ro{constructor(f){this._delegate=f,this.multiFactor=function Co(_){const f=(0,N.m9)(_);return wo.has(f)||wo.set(f,Nh._fromUser(f)),wo.get(f)}(f)}static getOrCreate(f){return ro.USER_MAP.has(f)||ro.USER_MAP.set(f,new ro(f)),ro.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,u.Z)(function*(){return Jr(g.auth,uu(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,u.Z)(function*(){return _d(v.auth,function cn(_,f,g){return Wr.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,u.Z)(function*(){return Jr(g.auth,function kh(_,f,g){return Mo.apply(this,arguments)}(g._delegate,f,li))})()}linkWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield nl(wn(g.auth)),function K(_,f,g){return function ie(_,f,g){return Ie.apply(this,arguments)}(_,f,g)}(g._delegate,f,li)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,u.Z)(function*(){return Jr(g.auth,cu(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return _d(this.auth,function Yi(_,f,g){return Nn.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Jr(this.auth,function Fp(_,f,g){return ud.apply(this,arguments)}(this._delegate,f,li))}reauthenticateWithRedirect(f){var g=this;return(0,u.Z)(function*(){return yield nl(wn(g.auth)),function D(_,f,g){return function x(_,f,g){return F.apply(this,arguments)}(_,f,g)}(g._delegate,f,li)})()}sendEmailVerification(f){return function Mc(_,f){return _a.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,u.Z)(function*(){return yield function vr(_,f){return iu.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Ql(_,f){return Hs((0,N.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function js(_,f){return Hs((0,N.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function pt(_,f){return Ou.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Nc(_,f){return Rc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Oc(_,f,g){return gu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ro.USER_MAP=new WeakMap;const Fa=U;let ju=(()=>{class _{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Fa(A,"invalid-api-key",{appName:g.name}),Fa(A,"invalid-api-key",{appName:g.name});const O=typeof window<"u"?li:void 0;this._delegate=v.initialize({options:{persistence:io(A,g.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Xa(_,f,g){const v=wn(_);U(v._canInitEmulator,v,"emulator-config-failed"),U(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const A=!!g?.disableWarnings,O=xi(f),{host:Z,port:ae}=function Bn(_){const f=xi(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const O=A[1];return{host:O,port:hs(v.substr(O.length+1))}}{const[O,Z]=v.split(":");return{host:O,port:hs(Z)}}}(f);v.config.emulator={url:`${O}//${Z}${null===ae?"":`:${ae}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:Z,port:ae,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function fs(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,v)}applyActionCode(g){return function ci(_,f){return ha.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return fa(this._delegate,g)}confirmPasswordReset(g,v){return function fu(_,f,g){return _o.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var A=this;return(0,u.Z)(function*(){return Jr(A._delegate,function pa(_,f,g){return Sn.apply(this,arguments)}(A._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function pu(_,f){return ma.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function zi(_,f){return"EMAIL_SIGNIN"===tu.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){Fa(Lu(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function je(_,f){return dt.apply(this,arguments)}(g._delegate,li);return v?Jr(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function fw(_,f){wn(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,A){const{next:O,error:Z,complete:ae}=Jh(g,v,A);return this._delegate.onAuthStateChanged(O,Z,ae)}onIdTokenChanged(g,v,A){const{next:O,error:Z,complete:ae}=Jh(g,v,A);return this._delegate.onIdTokenChanged(O,Z,ae)}sendSignInLinkToEmail(g,v){return function Sc(_,f,g){return Bs.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function hu(_,f,g){return An.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,u.Z)(function*(){let A;switch(function x_(_,f){ki(Object.values(Qr).includes(f),_,"invalid-persistence-type"),(0,N.b$)()?ki(f!==Qr.SESSION,_,"unsupported-persistence-type"):(0,N.UG)()?ki(f===Qr.NONE,_,"unsupported-persistence-type"):Xc()?ki(f===Qr.NONE||f===Qr.LOCAL&&(0,N.hl)(),_,"unsupported-persistence-type"):ki(f===Qr.NONE||md(),_,"unsupported-persistence-type")}(v._delegate,g),g){case Qr.SESSION:A=Pi;break;case Qr.LOCAL:A=(yield ne(bo)._isAvailable())?bo:va;break;case Qr.NONE:A=L;break;default:return Ae("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Jr(this._delegate,function xh(_){return Tn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Jr(this._delegate,bn(this._delegate,g))}signInWithCustomToken(g){return Jr(this._delegate,function Dc(_,f){return da.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Jr(this._delegate,function Oi(_,f,g){return bn((0,N.m9)(_),Mi.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Jr(this._delegate,function Pp(_,f,g){return ga.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return _d(this._delegate,function rt(_,f,g){return zr.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,u.Z)(function*(){return Fa(Lu(),v._delegate,"operation-not-supported-in-this-environment"),Jr(v._delegate,function Ni(_,f,g){return Nu.apply(this,arguments)}(v._delegate,g,li))})()}signInWithRedirect(g){var v=this;return(0,u.Z)(function*(){return Fa(Lu(),v._delegate,"operation-not-supported-in-this-environment"),yield nl(v._delegate),function Rn(_,f,g){return function Lp(_,f,g){return I.apply(this,arguments)}(_,f,g)}(v._delegate,g,li)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Ac(_,f){return Yl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Qr,_})();function Jh(_,f,g){let v=_;"function"!=typeof _&&({next:v,error:f,complete:g}=_);const A=v;return{next:Z=>A(Z&&ro.getOrCreate(Z)),error:f,complete:g}}function io(_,f){const g=function Vu(_,f){const g=Ra();if(!g)return[];const v=z(S_,_,f);switch(g.getItem(v)){case Qr.NONE:return[L];case Qr.LOCAL:return[bo,Pi];case Qr.SESSION:return[Pi];default:return[]}}(_,f);if(typeof self<"u"&&!g.includes(bo)&&g.push(bo),typeof window<"u")for(const v of[va,Pi])g.includes(v)||g.push(v);return g.includes(L)||g.push(L),g}class Xh{constructor(){this.providerId="phone",this._delegate=new Aa(Yh(J.Z.auth()))}static credential(f,g){return Aa.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Xh.PHONE_SIGN_IN_METHOD=Aa.PHONE_SIGN_IN_METHOD,Xh.PROVIDER_ID=Aa.PROVIDER_ID;const eg=U;class tg{constructor(f,g,v=J.Z.app()){var A;eg(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new or(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ng(_){_.INTERNAL.registerComponent(new ue.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new ju(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Mi,FacebookAuthProvider:ca,GithubAuthProvider:bc,GoogleAuthProvider:nu,OAuthProvider:Ci,SAMLAuthProvider:ai,PhoneAuthProvider:Xh,PhoneMultiFactorGenerator:Bh,RecaptchaVerifier:tg,TwitterAuthProvider:Zr,Auth:ju,AuthCredential:lr,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},9751:(ot,De,k)=>{k.d(De,{y:()=>de});var u=k(2961),J=k(727),N=k(8822),se=k(9635),re=k(2416),le=k(576),ue=k(2806);let de=(()=>{class W{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const we=new W;return we.source=this,we.operator=xe,we}subscribe(xe,we,Xe){const ge=function j(W){return W&&W instanceof u.Lv||function B(W){return W&&(0,le.m)(W.next)&&(0,le.m)(W.error)&&(0,le.m)(W.complete)}(W)&&(0,J.Nn)(W)}(xe)?xe:new u.Hp(xe,we,Xe);return(0,ue.x)(()=>{const{operator:fe,source:Ke}=this;ge.add(fe?fe.call(ge,Ke):Ke?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(xe){try{return this._subscribe(xe)}catch(we){xe.error(we)}}forEach(xe,we){return new(we=he(we))((Xe,ge)=>{const fe=new u.Hp({next:Ke=>{try{xe(Ke)}catch(nt){ge(nt),fe.unsubscribe()}},error:ge,complete:Xe});this.subscribe(fe)})}_subscribe(xe){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(xe)}[N.L](){return this}pipe(...xe){return(0,se.U)(xe)(this)}toPromise(xe){return new(xe=he(xe))((we,Xe)=>{let ge;this.subscribe(fe=>ge=fe,fe=>Xe(fe),()=>we(ge))})}}return W.create=Fe=>new W(Fe),W})();function he(W){var Fe;return null!==(Fe=W??re.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(ot,De,k)=>{k.d(De,{x:()=>ue});var u=k(9751),J=k(727);const se=(0,k(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),le=k(2806);let ue=(()=>{class he extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const W=new de(this,this);return W.operator=j,W}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(j)}})}error(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:W}=this;for(;W.length;)W.shift().error(j)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:W,isStopped:Fe,observers:xe}=this;return W||Fe?J.Lc:(this.currentObservers=null,xe.push(j),new J.w0(()=>{this.currentObservers=null,(0,re.P)(xe,j)}))}_checkFinalizedStatuses(j){const{hasError:W,thrownError:Fe,isStopped:xe}=this;W?j.error(Fe):xe&&j.complete()}asObservable(){const j=new u.y;return j.source=this,j}}return he.create=(B,j)=>new de(B,j),he})();class de extends ue{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===W||W.call(j,B)}error(B){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===W||W.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,W;return null!==(W=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==W?W:J.Lc}}},2961:(ot,De,k)=>{k.d(De,{Hp:()=>Xe,Lv:()=>W});var u=k(576),J=k(727),N=k(2416),se=k(7849);function re(){}const le=he("C",void 0,void 0);function he(Ae,ye,Ce){return{kind:Ae,value:ye,error:Ce}}var B=k(3410),j=k(2806);class W extends J.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,J.Nn)(ye)&&ye.add(this)):this.destination=nt}static create(ye,Ce,Ue){return new Xe(ye,Ce,Ue)}next(ye){this.isStopped?Ke(function de(Ae){return he("N",Ae,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ke(function ue(Ae){return he("E",void 0,Ae)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ke(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function xe(Ae,ye){return Fe.call(Ae,ye)}class we{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ye)}catch(Ue){ge(Ue)}}error(ye){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ye)}catch(Ue){ge(Ue)}else ge(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Ce){ge(Ce)}}}class Xe extends W{constructor(ye,Ce,Ue){let Be;if(super(),(0,u.m)(ye)||!ye)Be={next:ye??void 0,error:Ce??void 0,complete:Ue??void 0};else{let U;this&&N.v.useDeprecatedNextContext?(U=Object.create(ye),U.unsubscribe=()=>this.unsubscribe(),Be={next:ye.next&&xe(ye.next,U),error:ye.error&&xe(ye.error,U),complete:ye.complete&&xe(ye.complete,U)}):Be=ye}this.destination=new we(Be)}}function ge(Ae){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ae):(0,se.h)(Ae)}function Ke(Ae,ye){const{onStoppedNotification:Ce}=N.v;Ce&&B.z.setTimeout(()=>Ce(Ae,ye))}const nt={closed:!0,next:re,error:function fe(Ae){throw Ae},complete:re}},727:(ot,De,k)=>{k.d(De,{Lc:()=>le,w0:()=>re,Nn:()=>ue});var u=k(576);const N=(0,k(3888).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((W,Fe)=>`${Fe+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=k(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const xe of j)xe.remove(this);else j.remove(this);const{initialTeardown:W}=this;if((0,u.m)(W))try{W()}catch(xe){B=xe instanceof N?xe.errors:[xe]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const xe of Fe)try{de(xe)}catch(we){B=B??[],we instanceof N?B=[...B,...we.errors]:B.push(we)}}if(B)throw new N(B)}}add(B){var j;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,se.P)(j,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const le=re.EMPTY;function ue(he){return he instanceof re||he&&"closed"in he&&(0,u.m)(he.remove)&&(0,u.m)(he.add)&&(0,u.m)(he.unsubscribe)}function de(he){(0,u.m)(he)?he():he.unsubscribe()}},2416:(ot,De,k)=>{k.d(De,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,De,k)=>{k.d(De,{E:()=>J});const J=new(k(9751).y)(re=>re.complete())},8996:(ot,De,k)=>{k.d(De,{D:()=>ye});var u=k(8421),J=k(5363),N=k(9468),le=k(9751),de=k(2202),he=k(576),B=k(9672);function W(Ce,Ue){if(!Ce)throw new Error("Iterable cannot be null");return new le.y(Be=>{(0,B.f)(Be,Ue,()=>{const U=Ce[Symbol.asyncIterator]();(0,B.f)(Be,Ue,()=>{U.next().then(pe=>{pe.done?Be.complete():Be.next(pe.value)})},0,!0)})})}var Fe=k(3670),xe=k(8239),we=k(1144),Xe=k(6495),ge=k(2206),fe=k(4532),Ke=k(3260);function ye(Ce,Ue){return Ue?function Ae(Ce,Ue){if(null!=Ce){if((0,Fe.c)(Ce))return function se(Ce,Ue){return(0,u.Xf)(Ce).pipe((0,N.R)(Ue),(0,J.Q)(Ue))}(Ce,Ue);if((0,we.z)(Ce))return function ue(Ce,Ue){return new le.y(Be=>{let U=0;return Ue.schedule(function(){U===Ce.length?Be.complete():(Be.next(Ce[U++]),Be.closed||this.schedule())})})}(Ce,Ue);if((0,xe.t)(Ce))return function re(Ce,Ue){return(0,u.Xf)(Ce).pipe((0,N.R)(Ue),(0,J.Q)(Ue))}(Ce,Ue);if((0,ge.D)(Ce))return W(Ce,Ue);if((0,Xe.T)(Ce))return function j(Ce,Ue){return new le.y(Be=>{let U;return(0,B.f)(Be,Ue,()=>{U=Ce[de.h](),(0,B.f)(Be,Ue,()=>{let pe,G;try{({value:pe,done:G}=U.next())}catch(Q){return void Be.error(Q)}G?Be.complete():Be.next(pe)},0,!0)}),()=>(0,he.m)(U?.return)&&U.return()})}(Ce,Ue);if((0,Ke.L)(Ce))return function nt(Ce,Ue){return W((0,Ke.Q)(Ce),Ue)}(Ce,Ue)}throw(0,fe.z)(Ce)}(Ce,Ue):(0,u.Xf)(Ce)}},8421:(ot,De,k)=>{k.d(De,{Xf:()=>Fe});var u=k(655),J=k(1144),N=k(8239),se=k(9751),re=k(3670),le=k(2206),ue=k(4532),de=k(6495),he=k(3260),B=k(576),j=k(7849),W=k(8822);function Fe(Ae){if(Ae instanceof se.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function xe(Ae){return new se.y(ye=>{const Ce=Ae[W.L]();if((0,B.m)(Ce.subscribe))return Ce.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,J.z)(Ae))return function we(Ae){return new se.y(ye=>{for(let Ce=0;Ce<Ae.length&&!ye.closed;Ce++)ye.next(Ae[Ce]);ye.complete()})}(Ae);if((0,N.t)(Ae))return function Xe(Ae){return new se.y(ye=>{Ae.then(Ce=>{ye.closed||(ye.next(Ce),ye.complete())},Ce=>ye.error(Ce)).then(null,j.h)})}(Ae);if((0,le.D)(Ae))return fe(Ae);if((0,de.T)(Ae))return function ge(Ae){return new se.y(ye=>{for(const Ce of Ae)if(ye.next(Ce),ye.closed)return;ye.complete()})}(Ae);if((0,he.L)(Ae))return function Ke(Ae){return fe((0,he.Q)(Ae))}(Ae)}throw(0,ue.z)(Ae)}function fe(Ae){return new se.y(ye=>{(function nt(Ae,ye){var Ce,Ue,Be,U;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,u.KL)(Ae);!(Ue=yield Ce.next()).done;)if(ye.next(Ue.value),ye.closed)return}catch(pe){Be={error:pe}}finally{try{Ue&&!Ue.done&&(U=Ce.return)&&(yield U.call(Ce))}finally{if(Be)throw Be.error}}ye.complete()})})(Ae,ye).catch(Ce=>ye.error(Ce))})}},6451:(ot,De,k)=>{k.d(De,{T:()=>le});var u=k(8189),J=k(8421),N=k(515),se=k(7669),re=k(8996);function le(...ue){const de=(0,se.yG)(ue),he=(0,se._6)(ue,1/0),B=ue;return B.length?1===B.length?(0,J.Xf)(B[0]):(0,u.J)(he)((0,re.D)(B,de)):N.E}},5403:(ot,De,k)=>{k.d(De,{x:()=>J});var u=k(2961);function J(se,re,le,ue,de){return new N(se,re,le,ue,de)}class N extends u.Lv{constructor(re,le,ue,de,he,B){super(re),this.onFinalize=he,this.shouldUnsubscribe=B,this._next=le?function(j){try{le(j)}catch(W){re.error(W)}}:super._next,this._error=de?function(j){try{de(j)}catch(W){re.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ot,De,k)=>{k.d(De,{U:()=>N});var u=k(4482),J=k(5403);function N(se,re){return(0,u.e)((le,ue)=>{let de=0;le.subscribe((0,J.x)(ue,he=>{ue.next(se.call(re,he,de++))}))})}},8189:(ot,De,k)=>{k.d(De,{J:()=>N});var u=k(5577),J=k(4671);function N(se=1/0){return(0,u.z)(J.y,se)}},5577:(ot,De,k)=>{k.d(De,{z:()=>de});var u=k(4004),J=k(8421),N=k(4482),se=k(9672),re=k(5403),ue=k(576);function de(he,B,j=1/0){return(0,ue.m)(B)?de((W,Fe)=>(0,u.U)((xe,we)=>B(W,xe,Fe,we))((0,J.Xf)(he(W,Fe))),j):("number"==typeof B&&(j=B),(0,N.e)((W,Fe)=>function le(he,B,j,W,Fe,xe,we,Xe){const ge=[];let fe=0,Ke=0,nt=!1;const Ae=()=>{nt&&!ge.length&&!fe&&B.complete()},ye=Ue=>fe<W?Ce(Ue):ge.push(Ue),Ce=Ue=>{xe&&B.next(Ue),fe++;let Be=!1;(0,J.Xf)(j(Ue,Ke++)).subscribe((0,re.x)(B,U=>{Fe?.(U),xe?ye(U):B.next(U)},()=>{Be=!0},void 0,()=>{if(Be)try{for(fe--;ge.length&&fe<W;){const U=ge.shift();we?(0,se.f)(B,we,()=>Ce(U)):Ce(U)}Ae()}catch(U){B.error(U)}}))};return he.subscribe((0,re.x)(B,ye,()=>{nt=!0,Ae()})),()=>{Xe?.()}}(W,Fe,he,j)))}},5363:(ot,De,k)=>{k.d(De,{Q:()=>se});var u=k(9672),J=k(4482),N=k(5403);function se(re,le=0){return(0,J.e)((ue,de)=>{ue.subscribe((0,N.x)(de,he=>(0,u.f)(de,re,()=>de.next(he),le),()=>(0,u.f)(de,re,()=>de.complete(),le),he=>(0,u.f)(de,re,()=>de.error(he),le)))})}},3099:(ot,De,k)=>{k.d(De,{B:()=>re});var u=k(8421),J=k(7579),N=k(2961),se=k(4482);function re(ue={}){const{connector:de=(()=>new J.x),resetOnError:he=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=ue;return W=>{let Fe,xe,we,Xe=0,ge=!1,fe=!1;const Ke=()=>{xe?.unsubscribe(),xe=void 0},nt=()=>{Ke(),Fe=we=void 0,ge=fe=!1},Ae=()=>{const ye=Fe;nt(),ye?.unsubscribe()};return(0,se.e)((ye,Ce)=>{Xe++,!fe&&!ge&&Ke();const Ue=we=we??de();Ce.add(()=>{Xe--,0===Xe&&!fe&&!ge&&(xe=le(Ae,j))}),Ue.subscribe(Ce),!Fe&&Xe>0&&(Fe=new N.Hp({next:Be=>Ue.next(Be),error:Be=>{fe=!0,Ke(),xe=le(nt,he,Be),Ue.error(Be)},complete:()=>{ge=!0,Ke(),xe=le(nt,B),Ue.complete()}}),(0,u.Xf)(ye).subscribe(Fe))})(W)}}function le(ue,de,...he){if(!0===de)return void ue();if(!1===de)return;const B=new N.Hp({next:()=>{B.unsubscribe(),ue()}});return de(...he).subscribe(B)}},9468:(ot,De,k)=>{k.d(De,{R:()=>J});var u=k(4482);function J(N,se=0){return(0,u.e)((re,le)=>{le.add(N.schedule(()=>re.subscribe(le),se))})}},8505:(ot,De,k)=>{k.d(De,{b:()=>re});var u=k(576),J=k(4482),N=k(5403),se=k(4671);function re(le,ue,de){const he=(0,u.m)(le)||ue||de?{next:le,error:ue,complete:de}:le;return he?(0,J.e)((B,j)=>{var W;null===(W=he.subscribe)||void 0===W||W.call(he);let Fe=!0;B.subscribe((0,N.x)(j,xe=>{var we;null===(we=he.next)||void 0===we||we.call(he,xe),j.next(xe)},()=>{var xe;Fe=!1,null===(xe=he.complete)||void 0===xe||xe.call(he),j.complete()},xe=>{var we;Fe=!1,null===(we=he.error)||void 0===we||we.call(he,xe),j.error(xe)},()=>{var xe,we;Fe&&(null===(xe=he.unsubscribe)||void 0===xe||xe.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):se.y}},4408:(ot,De,k)=>{k.d(De,{o:()=>re});var u=k(727);class J extends u.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const N={setInterval(le,ue,...de){const{delegate:he}=N;return he?.setInterval?he.setInterval(le,ue,...de):setInterval(le,ue,...de)},clearInterval(le){const{delegate:ue}=N;return(ue?.clearInterval||clearInterval)(le)},delegate:void 0};var se=k(8737);class re extends J{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var he;if(this.closed)return this;this.state=ue;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(j,this.id,de),this}requestAsyncId(ue,de,he=0){return N.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&N.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let B,he=!1;try{this.work(ue)}catch(j){he=!0,B=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,De,k)=>{k.d(De,{v:()=>N});var u=k(6063);class J{constructor(re,le=J.now){this.schedulerActionCtor=re,this.now=le}schedule(re,le=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,le)}}J.now=u.l.now;class N extends J{constructor(re,le=J.now){super(re,le),this.actions=[],this._active=!1}flush(re){const{actions:le}=this;if(this._active)return void le.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=le.shift());if(this._active=!1,ue){for(;re=le.shift();)re.unsubscribe();throw ue}}}},4986:(ot,De,k)=>{k.d(De,{z:()=>N});var u=k(4408);const N=new(k(7565).v)(u.o)},6063:(ot,De,k)=>{k.d(De,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ot,De,k)=>{k.d(De,{z:()=>u});const u={setTimeout(J,N,...se){const{delegate:re}=u;return re?.setTimeout?re.setTimeout(J,N,...se):setTimeout(J,N,...se)},clearTimeout(J){const{delegate:N}=u;return(N?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(ot,De,k)=>{k.d(De,{h:()=>J});const J=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,De,k)=>{k.d(De,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,De,k)=>{k.d(De,{_6:()=>le,jO:()=>se,yG:()=>re});var u=k(576);function N(ue){return ue[ue.length-1]}function se(ue){return(0,u.m)(N(ue))?ue.pop():void 0}function re(ue){return function J(ue){return ue&&(0,u.m)(ue.schedule)}(N(ue))?ue.pop():void 0}function le(ue,de){return"number"==typeof N(ue)?ue.pop():de}},8737:(ot,De,k)=>{function u(J,N){if(J){const se=J.indexOf(N);0<=se&&J.splice(se,1)}}k.d(De,{P:()=>u})},3888:(ot,De,k)=>{function u(J){const se=J(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(De,{d:()=>u})},2806:(ot,De,k)=>{k.d(De,{O:()=>se,x:()=>N});var u=k(2416);let J=null;function N(re){if(u.v.useDeprecatedSynchronousErrorHandling){const le=!J;if(le&&(J={errorThrown:!1,error:null}),re(),le){const{errorThrown:ue,error:de}=J;if(J=null,ue)throw de}}else re()}function se(re){u.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(ot,De,k)=>{function u(J,N,se,re=0,le=!1){const ue=N.schedule(function(){se(),le?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ue),!le)return ue}k.d(De,{f:()=>u})},4671:(ot,De,k)=>{function u(J){return J}k.d(De,{y:()=>u})},1144:(ot,De,k)=>{k.d(De,{z:()=>u});const u=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(ot,De,k)=>{k.d(De,{D:()=>J});var u=k(576);function J(N){return Symbol.asyncIterator&&(0,u.m)(N?.[Symbol.asyncIterator])}},576:(ot,De,k)=>{function u(J){return"function"==typeof J}k.d(De,{m:()=>u})},3670:(ot,De,k)=>{k.d(De,{c:()=>N});var u=k(8822),J=k(576);function N(se){return(0,J.m)(se[u.L])}},6495:(ot,De,k)=>{k.d(De,{T:()=>N});var u=k(2202),J=k(576);function N(se){return(0,J.m)(se?.[u.h])}},8239:(ot,De,k)=>{k.d(De,{t:()=>J});var u=k(576);function J(N){return(0,u.m)(N?.then)}},3260:(ot,De,k)=>{k.d(De,{L:()=>se,Q:()=>N});var u=k(655),J=k(576);function N(re){return(0,u.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:de,done:he}=yield(0,u.qq)(ue.read());if(he)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(de)}}finally{ue.releaseLock()}})}function se(re){return(0,J.m)(re?.getReader)}},4482:(ot,De,k)=>{k.d(De,{A:()=>J,e:()=>N});var u=k(576);function J(se){return(0,u.m)(se?.lift)}function N(se){return re=>{if(J(re))return re.lift(function(le){try{return se(le,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ot,De,k)=>{k.d(De,{U:()=>N,z:()=>J});var u=k(4671);function J(...se){return N(se)}function N(se){return 0===se.length?u.y:1===se.length?se[0]:function(le){return se.reduce((ue,de)=>de(ue),le)}}},7849:(ot,De,k)=>{k.d(De,{h:()=>N});var u=k(2416),J=k(3410);function N(se){J.z.setTimeout(()=>{const{onUnhandledError:re}=u.v;if(!re)throw se;re(se)})}},4532:(ot,De,k)=>{function u(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(De,{z:()=>u})},655:(ot,De,k)=>{function se(G,Q){var ne={};for(var te in G)Object.prototype.hasOwnProperty.call(G,te)&&Q.indexOf(te)<0&&(ne[te]=G[te]);if(null!=G&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(te=Object.getOwnPropertySymbols(G);ke<te.length;ke++)Q.indexOf(te[ke])<0&&Object.prototype.propertyIsEnumerable.call(G,te[ke])&&(ne[te[ke]]=G[te[ke]])}return ne}function de(G,Q,ne,te){return new(ne||(ne=Promise))(function(Re,at){function Kt(sn){try{ze(te.next(sn))}catch(_n){at(_n)}}function Vt(sn){try{ze(te.throw(sn))}catch(_n){at(_n)}}function ze(sn){sn.done?Re(sn.value):function ke(Re){return Re instanceof ne?Re:new ne(function(at){at(Re)})}(sn.value).then(Kt,Vt)}ze((te=te.apply(G,Q||[])).next())})}function ge(G){return this instanceof ge?(this.v=G,this):new ge(G)}function fe(G,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,te=ne.apply(G,Q||[]),Re=[];return ke={},at("next"),at("throw"),at("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function at(zt){te[zt]&&(ke[zt]=function(Yt){return new Promise(function(Sr,Ot){Re.push([zt,Yt,Sr,Ot])>1||Kt(zt,Yt)})})}function Kt(zt,Yt){try{!function Vt(zt){zt.value instanceof ge?Promise.resolve(zt.value.v).then(ze,sn):_n(Re[0][2],zt)}(te[zt](Yt))}catch(Sr){_n(Re[0][3],Sr)}}function ze(zt){Kt("next",zt)}function sn(zt){Kt("throw",zt)}function _n(zt,Yt){zt(Yt),Re.shift(),Re.length&&Kt(Re[0][0],Re[0][1])}}function nt(G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=G[Symbol.asyncIterator];return Q?Q.call(G):(G=function W(G){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&G[Q],te=0;if(ne)return ne.call(G);if(G&&"number"==typeof G.length)return{next:function(){return G&&te>=G.length&&(G=void 0),{value:G&&G[te++],done:!G}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(G),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(Re){ne[Re]=G[Re]&&function(at){return new Promise(function(Kt,Vt){!function ke(Re,at,Kt,Vt){Promise.resolve(Vt).then(function(ze){Re({value:ze,done:Kt})},at)}(Kt,Vt,(at=G[Re](at)).done,at.value)})}}}k.d(De,{FC:()=>fe,KL:()=>nt,_T:()=>se,mG:()=>de,qq:()=>ge})},4650:(ot,De,k)=>{k.d(De,{$8M:()=>xu,$Z:()=>Zo,AFp:()=>r0,ALo:()=>Uv,AaK:()=>de,CHM:()=>du,CRH:()=>YE,CZH:()=>tc,CqO:()=>BC,D6c:()=>ac,EJc:()=>fb,EpF:()=>UC,F4k:()=>Py,FYo:()=>cf,FiY:()=>je,G48:()=>Eb,GfV:()=>Xr,Gpc:()=>j,JOm:()=>es,KtG:()=>hu,LFG:()=>Rn,LSH:()=>ug,Lbi:()=>Vm,Lck:()=>Tv,MGl:()=>Zg,MMx:()=>$f,NdJ:()=>Ny,OlP:()=>gn,Oqu:()=>Hy,PXZ:()=>yb,Q6J:()=>xf,QGY:()=>Oy,QP$:()=>Wt,Qsj:()=>Rw,R0b:()=>mn,RDi:()=>_,Rgc:()=>Dr,SBq:()=>Xn,Sil:()=>sh,Suo:()=>xm,TTD:()=>$i,TgZ:()=>Hg,VKq:()=>LE,WLB:()=>VE,X6Q:()=>op,XFs:()=>We,Xpm:()=>be,Xts:()=>L_,Y36:()=>gl,YKP:()=>Hf,YNc:()=>DD,Yjl:()=>ve,Yz7:()=>Yt,Z0I:()=>Bi,ZZ4:()=>C0,_Bn:()=>ME,_UZ:()=>xy,_Vd:()=>Ed,_c5:()=>ta,_uU:()=>YC,aQg:()=>Rl,c2e:()=>db,cJS:()=>Ot,cg1:()=>ev,dDg:()=>ZT,dqk:()=>nn,eFA:()=>Mt,ekj:()=>Kg,eoX:()=>Ge,f3M:()=>I,g9A:()=>o0,h0i:()=>Gd,hGG:()=>up,hij:()=>Jg,iGM:()=>Xd,ifc:()=>it,ip1:()=>n0,jDz:()=>ym,kEZ:()=>Rv,kL8:()=>nv,lG2:()=>z,lcZ:()=>HE,lqb:()=>Cd,lri:()=>et,n5z:()=>Ki,oAB:()=>kt,oxw:()=>SD,q4F:()=>Ba,qLn:()=>lf,qOj:()=>vy,qZA:()=>Mf,rWj:()=>Et,s9C:()=>ky,sBO:()=>bb,sIi:()=>Df,s_b:()=>Yd,soG:()=>ip,tb:()=>a0,tp0:()=>_t,uIk:()=>by,vHH:()=>we,vpe:()=>lo,wAp:()=>wt,xi3:()=>$E,xp6:()=>$w,z2F:()=>Ml,zSh:()=>Sw,zs3:()=>$o});var u=k(7579),J=k(727),N=k(9751),se=k(6451),re=k(3099);function le(i){for(let o in i)if(i[o]===le)return o;throw Error("Could not find renamed property on target object.")}function ue(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=le({__forward_ref__:le});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function W(i){return Fe(i)?i():i}function Fe(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class we extends Error{constructor(o,a){super(function Xe(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ye(i,o){throw new we(-201,!1)}function Vt(i,o){null==i&&function ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function un(i){return yi(i,vi)||yi(i,si)}function Bi(i){return null!==un(i)}function yi(i,o){return i.hasOwnProperty(o)?i[o]:null}function Rs(i){return i&&(i.hasOwnProperty(ii)||i.hasOwnProperty(ia))?i[ii]:null}const vi=le({\u0275prov:le}),ii=le({\u0275inj:le}),si=le({ngInjectableDef:le}),ia=le({ngInjectorDef:le});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let _r;function zn(i){const o=_r;return _r=i,o}function oi(i,o,a){const l=un(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&We.Optional?null:void 0!==o?o:void ye(de(i))}function On(i){return{toString:i}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),it=(()=>{return(i=it||(it={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",it;var i})();const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hr={},Dt=[],ls=le({\u0275cmp:le}),Jt=le({\u0275dir:le}),Si=le({\u0275pipe:le}),Xt=le({\u0275mod:le}),Wn=le({\u0275fac:le}),Mr=le({__NG_ELEMENT_ID__:le});let Je=0;function be(i){return On(()=>{const a=!0===i.standalone,l={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||it.Emulated,id:"c"+Je++,styles:i.styles||Dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,y=i.features;return h.inputs=L(i.inputs,l),h.outputs=L(i.outputs),y&&y.forEach(C=>C(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(yt).filter(mt):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(ut).filter(mt):null,h})}function yt(i){return Y(i)||$e(i)}function mt(i){return null!==i}function kt(i){return On(()=>({type:i.type,bootstrap:i.bootstrap||Dt,declarations:i.declarations||Dt,imports:i.imports||Dt,exports:i.exports||Dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,o){if(null==i)return Hr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=l,o&&(o[h]=p)}return a}const z=be;function ve(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Y(i){return i[ls]||null}function $e(i){return i[Jt]||null}function ut(i){return i[Si]||null}function Wt(i){const o=Y(i)||$e(i)||ut(i);return null!==o&&o.standalone}function dn(i,o){const a=i[Xt]||null;if(!a&&!0===o)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function ir(i){return Array.isArray(i)&&"object"==typeof i[1]}function Or(i){return Array.isArray(i)&&!0===i[1]}function eu(i){return 0!=(8&i.flags)}function aa(i){return 2==(2&i.flags)}function vc(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function Ih(i){return 0!=(256&i[2])}function Mi(i,o){return i.hasOwnProperty(Wn)?i[Wn]:null}class Hi{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function $i(){return Ci}function Ci(i){return i.type.prototype.ngOnChanges&&(i.setInput=nu),ca}function ca(){const i=Ah(this),o=i?.current;if(o){const a=i.previous;if(a===Hr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function nu(i,o,a,l){const h=Ah(i)||function la(i,o){return i[bc]=o}(i,{previous:Hr,current:null}),p=h.current||(h.current={}),y=h.previous,C=this.declaredInputs[a],E=y[C];p[C]=new Hi(E&&E.currentValue,o,y===Hr),i[l]=o}$i.ngInherit=!0;const bc="__ngSimpleChanges__";function Ah(i){return i[bc]||null}function Tn(i){for(;Array.isArray(i);)i=i[0];return i}function ui(i,o){return Tn(o[i])}function vr(i,o){return Tn(o[i.index])}function Vs(i,o){return i.data[o]}function qi(i,o){return i[o]}function Gt(i,o){const a=o[i];return ir(a)?a:a[0]}function Us(i){return 64==(64&i[2])}function Ei(i,o){return null==o?null:i[o]}function au(i){i[18]=0}function bn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const bt={lFrame:Nc(null),bindingsEnabled:!0};function Gi(){return bt.bindingsEnabled}function Ee(){return bt.lFrame.lView}function Ut(){return bt.lFrame.tView}function du(i){return bt.lFrame.contextLView=i,i[8]}function hu(i){return bt.lFrame.contextLView=null,i}function An(){let i=fu();for(;null!==i&&64===i.type;)i=i.parent;return i}function fu(){return bt.lFrame.currentTNode}function ci(i,o){const a=bt.lFrame;a.currentTNode=i,a.isParent=o}function ha(){return bt.lFrame.isParent}function Sn(){const i=bt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Bs(){return bt.lFrame.bindingIndex++}function Np(i,o){const a=bt.lFrame;a.bindingIndex=a.bindingRootIndex=i,pu(o)}function pu(i){bt.lFrame.currentDirectiveIndex=i}function Mc(){return bt.lFrame.currentQueryIndex}function _a(i){bt.lFrame.currentQueryIndex=i}function Oc(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function gu(i,o,a){if(a&We.SkipSelf){let h=o,p=i;for(;!(h=h.parent,null!==h||a&We.Host||(h=Oc(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,i=p}const l=bt.lFrame=Pc();return l.currentTNode=o,l.lView=i,!0}function mu(i){const o=Pc(),a=i[1];bt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Pc(){const i=bt.lFrame,o=null===i?null:i.child;return null===o?Nc(i):o}function Nc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Rc(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ql=Rc;function js(){const i=Rc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Qn(){return bt.lFrame.selectedIndex}function qr(i){bt.lFrame.selectedIndex=i}function pn(){const i=bt.lFrame;return Vs(i.tView,i.selectedIndex)}function vu(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=p;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),C&&((i.contentHooks||(i.contentHooks=[])).push(a,C),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,C)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function $s(i,o,a){vo(i,o,3,a)}function yo(i,o,a,l){(3&i[2])===a&&vo(i,o,a,l)}function ed(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function vo(i,o,a,l){const p=l??-1,y=o.length-1;let C=0;for(let E=void 0!==l?65535&i[18]:0;E<y;E++)if("number"==typeof o[E+1]){if(C=o[E],null!=l&&C>=l)break}else o[E]<0&&(i[18]+=65536),(C<p||-1==p)&&(td(i,a,o,E),i[18]=(4294901760&i[18])+E+2),E++}function td(i,o,a,l){const h=a[l]<0,p=a[l+1],C=i[h?-a[l]:a[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class ys{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Co(i,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const p=a[l++],y=a[l++],C=a[l++];i.setAttribute(o,y,C,p)}else{const p=h,y=a[++l];bu(p)?i.setProperty(o,p,y):i.setAttribute(o,p,y),l++}}return l}function qs(i){return 3===i||4===i||6===i}function bu(i){return 64===i.charCodeAt(0)}function ya(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||rd(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function rd(i,o,a,l,h){let p=0,y=i.length;if(-1===o)y=-1;else for(;p<i.length;){const C=i[p++];if("number"==typeof C){if(C===o){y=-1;break}if(C>o){y=p-1;break}}}for(;p<i.length;){const C=i[p];if("number"==typeof C)break;if(C===a){if(null===l)return void(null!==h&&(i[p+1]=h));if(l===i[p+1])return void(i[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==y&&(i.splice(y,0,o),p=y+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==h&&i.splice(p++,0,h)}function id(i){return-1!==i}function sr(i){return 32767&i}function wa(i,o){let a=function va(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Pi=!0;function Ca(i){const o=Pi;return Pi=i,o}let Pn=0;const bi={};function Gs(i,o){const a=Du(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,ba(l.data,i),ba(o,null),ba(l.blueprint,null));const h=Tu(i,o),p=i.injectorIndex;if(id(h)){const y=sr(h),C=wa(h,o),E=C[1].data;for(let T=0;T<8;T++)o[p+T]=C[y+T]|E[y+T]}return o[p+8]=h,p}function ba(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Du(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Tu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=Io(h),null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function vs(i,o,a){!function Iu(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Mr)&&(l=a[Mr]),null==l&&(l=a[Mr]=Pn++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function ws(i,o,a){if(a&We.Optional||void 0!==i)return i;ye()}function Vc(i,o,a,l){if(a&We.Optional&&void 0===l&&(l=null),0==(a&(We.Self|We.Host))){const h=i[9],p=zn(void 0);try{return h?h.get(o,l,a&We.Optional):oi(o,l,a&We.Optional)}finally{zn(p)}}return ws(l,0,a)}function zs(i,o,a,l=We.Default,h){if(null!==i){if(1024&o[2]){const y=function bo(i,o,a,l,h){let p=i,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const C=Ia(p,y,a,l|We.Self,bi);if(C!==bi)return C;let E=p.parent;if(!E){const T=y[21];if(T){const M=T.get(a,bi,l);if(M!==bi)return M}E=Io(y),y=y[15]}p=E}return h}(i,o,a,l,bi);if(y!==bi)return y}const p=Ia(i,o,a,l,bi);if(p!==bi)return p}return Vc(o,a,l,h)}function Ia(i,o,a,l,h){const p=function Uc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Mr)?i[Mr]:void 0;return"number"==typeof o?o>=0?255&o:Bc:o}(a);if("function"==typeof p){if(!gu(o,i,l))return l&We.Host?ws(h,0,l):Vc(o,a,l,h);try{const y=p(l);if(null!=y||l&We.Optional)return y;ye()}finally{Ql()}}else if("number"==typeof p){let y=null,C=Du(i,o),E=-1,T=l&We.Host?o[16][6]:null;for((-1===C||l&We.SkipSelf)&&(E=-1===C?Tu(i,o):o[C+8],-1!==E&&Da(l,!1)?(y=o[1],C=sr(E),o=wa(E,o)):C=-1);-1!==C;){const M=o[1];if(Au(p,C,M.data)){const R=ad(C,o,a,y,l,T);if(R!==bi)return R}E=o[C+8],-1!==E&&Da(l,o[1].data[C+8]===T)&&Au(p,C,o)?(y=M,C=sr(E),o=wa(E,o)):C=-1}}return h}function ad(i,o,a,l,h,p){const y=o[1],C=y.data[i+8],M=Eo(C,y,a,null==l?aa(C)&&Pi:l!=y&&0!=(3&C.type),h&We.Host&&p===C);return null!==M?Wi(o,y,M,C):bi}function Eo(i,o,a,l,h){const p=i.providerIndexes,y=o.data,C=1048575&p,E=i.directiveStart,M=p>>20,$=h?C+M:i.directiveEnd;for(let X=l?C:C+M;X<$;X++){const _e=y[X];if(X<E&&a===_e||X>=E&&_e.type===a)return X}if(h){const X=y[E];if(X&&yr(X)&&X.type===a)return E}return null}function Wi(i,o,a,l){let h=i[a];const p=o.data;if(function Zs(i){return i instanceof ys}(h)){const y=h;y.resolving&&function Ke(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(p[a]));const C=Ca(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?zn(y.injectImpl):null;gu(i,l,We.Default);try{h=i[a]=y.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Xl(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const y=Ci(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==E&&zn(E),Ca(C),y.resolving=!1,Ql()}}return h}function Au(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function Da(i,o){return!(i&We.Self||i&We.Host&&o)}class Ws{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return zs(this._tNode,this._lView,o,l,a)}}function Bc(){return new Ws(An(),Ee())}function Ki(i){return On(()=>{const o=i.prototype.constructor,a=o[Wn]||Su(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const p=h[Wn]||Su(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Su(i){return Fe(i)?()=>{const o=Su(W(i));return o&&o()}:Mi(i)}function Io(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function xu(i){return function od(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const p=a[h];if(qs(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(An(),i)}const Cs="__parameters__";function Ao(i,o,a){return On(()=>{const l=function Mu(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const y=new h(...p);return C.annotation=y,C;function C(E,T,M){const R=E.hasOwnProperty(Cs)?E[Cs]:Object.defineProperty(E,Cs,{value:[]})[Cs];for(;R.length<=M;)R.push(null);return(R[M]=R[M]||[]).push(y),E}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class gn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function cn(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),cn(l,o)):o!==i&&o.push(l)}return o}function Wr(i,o){i.forEach(a=>Array.isArray(a)?Wr(a,o):o(a))}function Yi(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Nn(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Kr(i,o,a){let l=bs(i,o);return l>=0?i[1|l]=a:(l=~l,function Ou(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Sa(i,o){const a=bs(i,o);if(a>=0)return i[1|a]}function bs(i,o){return function So(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const p=l+(h-l>>1),y=i[p<<a];if(o===y)return p<<a;y>o?h=p:l=p+1}return~(h<<a)}(i,o,1)}const Nr={},In="__NG_DI_FLAG__",Oo="ngTempTokenPath",Po=/\n/gm,$c="__source";let Qs;function Qi(i){const o=Qs;return Qs=i,o}function Zc(i,o=We.Default){if(void 0===Qs)throw new we(-203,!1);return null===Qs?oi(i,void 0,o):Qs.get(i,o&We.Optional?null:void 0,o)}function Rn(i,o=We.Default){return(function cs(){return _r}()||Zc)(W(i),o)}function I(i,o=We.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Rn(i,o)}function D(i){const o=[];for(let a=0;a<i.length;a++){const l=W(i[a]);if(Array.isArray(l)){if(0===l.length)throw new we(900,!1);let h,p=We.Default;for(let y=0;y<l.length;y++){const C=l[y],E=F(C);"number"==typeof E?-1===E?h=C.token:p|=E:h=C}o.push(Rn(h,p))}else o.push(Rn(l))}return o}function x(i,o){return i[In]=o,i.prototype[In]=o,i}function F(i){return i[In]}const je=x(Ao("Optional"),8),_t=x(Ao("SkipSelf"),4);var es=(()=>((es=es||{})[es.Important=1]="Important",es[es.DashCase=2]="DashCase",es))();const zc=new Map;let jh=0;const Ds="__ngContext__";function pr(i,o){ir(o)?(i[Ds]=o[20],function dd(i){zc.set(i[20],i)}(o)):i[Ds]=o}function pd(i,o){return undefined(i,o)}function Di(i){const o=i[3];return Or(o)?o[3]:o}function Wc(i){return Yp(i[13])}function Pa(i){return Yp(i[4])}function Yp(i){for(;null!==i&&!Or(i);)i=i[4];return i}function Uo(i,o,a,l,h){if(null!=l){let p,y=!1;Or(l)?p=l:ir(l)&&(y=!0,l=l[0]);const C=Tn(l);0===i&&null!==a?null==h?el(o,a,C):no(o,a,C,h||null,!0):1===i&&null!==a?no(o,a,C,h||null,!0):2===i?function Uu(i,o,a){const l=ki(i,o);l&&function Xp(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,C,y):3===i&&o.destroyNode(C),null!=p&&function yd(i,o,a,l,h){const p=a[7];p!==Tn(a)&&Uo(o,i,l,p,h);for(let C=10;C<a.length;C++){const E=a[C];Bu(E[1],E,i,o,l,p)}}(o,i,p,a,h)}}function Wh(i,o,a){return i.createElement(o,a)}function Yc(i,o){const a=i[9],l=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,bn(h,-1)),a.splice(l,1)}function Na(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const h=l[17];null!==h&&h!==i&&Yc(h,l),o>0&&(i[a-1][4]=l[4]);const p=Nn(i,10+o);!function fw(i,o){Bu(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=p[19];null!==y&&y.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Qc(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Bu(i,o,a,3,null,null),function T_(i){let o=i[13];if(!o)return Bo(i[1],i);for(;o;){let a=null;if(ir(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)ir(o)&&Bo(o[1],o),o=o[3];null===o&&(o=i),ir(o)&&Bo(o[1],o),a=o&&o[4]}o=a}}(o)}}function Bo(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function md(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof ys)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const C=h[p[y]],E=p[y+1];try{E.call(C)}finally{}}else try{p.call(h)}finally{}}}}(i,o),function Jc(i,o){const a=i.cleanup,l=o[7];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],C="function"==typeof y?y(o):Tn(o[y]),E=l[h=a[p+2]],T=a[p+3];"boolean"==typeof T?C.removeEventListener(a[p],E,T):T>=0?l[h=T]():l[h=-T].unsubscribe(),p+=2}else{const y=l[h=a[p+1]];a[p].call(y)}if(null!==l){for(let p=h+1;p<l.length;p++)(0,l[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Or(o[3])){a!==o[3]&&Yc(a,o);const l=o[19];null!==l&&l.detachView(i)}!function qp(i){zc.delete(i[20])}(o)}}function Xc(i,o,a){return function Lu(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===it.None||h===it.Emulated)return null}return vr(l,a)}(i,o.parent,a)}function no(i,o,a,l,h){i.insertBefore(o,a,l,h)}function el(i,o,a){i.appendChild(o,a)}function tl(i,o,a,l,h){null!==l?no(i,o,a,l,h):el(i,o,a)}function ki(i,o){return i.parentNode(o)}let ng,Kh=function nl(i,o,a){return 40&i.type?vr(i,a):null};function ka(i,o,a,l){const h=Xc(i,l,o),p=o[11],C=function x_(i,o,a){return Kh(i,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let E=0;E<a.length;E++)tl(p,h,a[E],C,!1);else tl(p,h,a,C,!1)}function li(i,o){if(null!==o){const a=o.type;if(3&a)return vr(o,i);if(4&a)return rl(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return li(i,l);{const h=i[o.index];return Or(h)?rl(-1,h):Tn(h)}}if(32&a)return pd(o,i)()||Tn(i[o.index]);{const l=Yh(i,o);return null!==l?Array.isArray(l)?l[0]:li(Di(i[16]),l):li(i,o.next)}}return null}function Yh(i,o){return null!==o?i[16][6].projection[o.projection]:null}function rl(i,o){const a=10+i+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return li(l,h)}return o[7]}function Qh(i,o,a,l,h,p,y){for(;null!=a;){const C=l[a.index],E=a.type;if(y&&0===o&&(C&&pr(Tn(C),l),a.flags|=4),64!=(64&a.flags))if(8&E)Qh(i,o,a.child,l,h,p,!1),Uo(o,i,h,C,p);else if(32&E){const T=pd(a,l);let M;for(;M=T();)Uo(o,i,h,M,p);Uo(o,i,h,C,p)}else 16&E?_d(i,o,l,a,h,p):Uo(o,i,h,C,p);a=y?a.projectionNext:a.next}}function Bu(i,o,a,l,h,p){Qh(a,l,i.firstChild,o,h,p,!1)}function _d(i,o,a,l,h,p){const y=a[16],E=y[6].projection[l.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Uo(o,i,h,E[T],p);else Qh(i,o,E,y[3],h,p,!0)}function ro(i,o,a){i.setAttribute(o,"style",a)}function Fa(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function _(i){ng=i}class ae{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function mr(i){return i instanceof ae?i.changingThisBreaksApplicationSecurity:i}const il=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function ug(i){const o=function wd(){const i=Ee();return i&&i[12]}();return o?o.sanitize(Jn.URL,i)||"":function so(i,o){const a=function rg(i){return i instanceof ae&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?mr(i):function sf(i){return(i=String(i)).match(il)?i:"unsafe:"+i}(ge(i))}const L_=new gn("ENVIRONMENT_INITIALIZER"),V_=new gn("INJECTOR",-1),Iw=new gn("INJECTOR_DEF_TYPES");class cg{get(o,a=Nr){if(a===Nr){const l=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw l.name="NullInjectorError",l}return a}}function II(...i){return{\u0275providers:lg(0,i)}}function lg(i,...o){const a=[],l=new Set;let h;return Wr(o,p=>{const y=p;dg(y,a,[],l)&&(h||(h=[]),h.push(y))}),void 0!==h&&Dw(h,a),a}function Dw(i,o){for(let a=0;a<i.length;a++){const{providers:h}=i[a];Wr(h,p=>{o.push(p)})}}function dg(i,o,a,l){if(!(i=W(i)))return!1;let h=null,p=Rs(i);const y=!p&&Y(i);if(p||y){if(y&&!y.standalone)return!1;h=i}else{const E=i.ngModule;if(p=Rs(E),!p)return!1;h=E}const C=l.has(h);if(y){if(C)return!1;if(l.add(h),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of E)dg(T,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let T;l.add(h);try{Wr(p.imports,M=>{dg(M,o,a,l)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Dw(T,o)}if(!C){const T=Mi(h)||(()=>new h);o.push({provide:h,useFactory:T,deps:Dt},{provide:Iw,useValue:h,multi:!0},{provide:L_,useValue:()=>Rn(h),multi:!0})}const E=p.providers;null==E||C||Wr(E,M=>{o.push(M)})}}return h!==i&&void 0!==i.providers}const ux=le({provide:String,useValue:le});function Tw(i){return null!==i&&"object"==typeof i&&ux in i}function Zu(i){return"function"==typeof i}const Sw=new gn("Set Injector scope."),B_={},xw={};let qu;function j_(){return void 0===qu&&(qu=new cg),qu}class Cd{}class TI extends Cd{constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ol(o,y=>this.processProvider(y)),this.records.set(V_,Ho(void 0,this)),h.has("environment")&&this.records.set(Cd,Ho(void 0,this));const p=this.records.get(Sw);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Iw.multi,Dt,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Qi(this),l=zn(void 0);try{return o()}finally{Qi(a),zn(l)}}get(o,a=Nr,l=We.Default){this.assertNotDestroyed();const h=Qi(this),p=zn(void 0);try{if(!(l&We.SkipSelf)){let C=this.records.get(o);if(void 0===C){const E=function xI(i){return"function"==typeof i||"object"==typeof i&&i instanceof gn}(o)&&un(o);C=E&&this.injectableDefInScope(E)?Ho(oo(o),B_):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(l&We.Self?j_():this.parent).get(o,a=l&We.Optional&&a===Nr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Oo]=y[Oo]||[]).unshift(de(o)),h)throw y;return function K(i,o,a,l){const h=i[Oo];throw o[$c]&&h.unshift(o[$c]),i.message=function ie(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=de(o);if(Array.isArray(o))h=o.map(de).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let C=o[y];p.push(y+":"+("string"==typeof C?JSON.stringify(C):de(C)))}h=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(Po,"\n  ")}`}("\n"+i.message,h,a,l),i.ngTokenPath=h,i[Oo]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{zn(p),Qi(h)}}resolveInjectorInitializers(){const o=Qi(this),a=zn(void 0);try{const l=this.get(L_.multi,Dt,We.Self);for(const h of l)h()}finally{Qi(o),zn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(de(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=Zu(o=W(o))?o:W(o&&o.provide);const l=function AI(i){return Tw(i)?Ho(void 0,i.useValue):Ho(af(i),B_)}(o);if(Zu(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Ho(void 0,B_,!0),h.factory=()=>D(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===B_&&(a.value=xw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Mw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function oo(i){const o=un(i),a=null!==o?o.factory:Mi(i);if(null!==a)return a;if(i instanceof gn)throw new we(204,!1);if(i instanceof Function)return function Ti(i){const o=i.length;if(o>0)throw function Cn(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new we(204,!1);const a=function xr(i){const o=i&&(i[vi]||i[si]);if(o){const a=function jr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function af(i,o,a){let l;if(Zu(i)){const h=W(i);return Mi(h)||oo(h)}if(Tw(i))l=()=>W(i.useValue);else if(function DI(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...D(i.deps||[]));else if(function Aw(i){return!(!i||!i.useExisting)}(i))l=()=>Rn(W(i.useExisting));else{const h=W(i&&(i.useClass||i.provide));if(!function SI(i){return!!i.deps}(i))return Mi(h)||oo(h);l=()=>new h(...D(i.deps))}return l}function Ho(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Ow(i){return!!i.\u0275providers}function ol(i,o){for(const a of i)Array.isArray(a)?ol(a,o):Ow(a)?ol(a.\u0275providers,o):o(a)}class hg{}class al{resolveComponentFactory(o){throw function Pw(i){const o=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Ed=(()=>{class i{}return i.NULL=new al,i})();function H_(){return ul(An(),Ee())}function ul(i,o){return new Xn(vr(i,o))}let Xn=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=H_,i})();function uf(i){return i instanceof Xn?i.nativeElement:i}class cf{}let Rw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function OI(){const i=Ee(),a=Gt(An().index,i);return(ir(a)?a:i)[11]}(),i})(),Ua=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class Xr{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ba=new Xr("14.2.12"),Z_={};function pg(i){return i.ngOriginalError}class lf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&pg(o);for(;a&&pg(a);)a=pg(a);return a||null}}function Rr(i){return i instanceof Function?i():i}function gg(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||i.charCodeAt(h+p)<=32)return h}a=h+1}}const Lw="ng-template";function Vw(i,o,a){let l=0;for(;l<i.length;){let h=i[l++];if(a&&"class"===h){if(h=i[l],-1!==gg(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function z_(i){return 4===i.type&&i.value!==Lw}function FI(i,o,a){return o===(4!==i.type||a?i.value:Lw)}function Uw(i,o,a){let l=4;const h=i.attrs||[],p=function dl(i){for(let o=0;o<i.length;o++)if(qs(i[o]))return o;return i.length}(h);let y=!1;for(let C=0;C<o.length;C++){const E=o[C];if("number"!=typeof E){if(!y)if(4&l){if(l=2|1&l,""!==E&&!FI(i,E,a)||""===E&&1===o.length){if(ao(l))return!1;y=!0}}else{const T=8&l?E:o[++C];if(8&l&&null!==i.attrs){if(!Vw(i.attrs,T,a)){if(ao(l))return!1;y=!0}continue}const R=Bw(8&l?"class":E,h,z_(i),a);if(-1===R){if(ao(l))return!1;y=!0;continue}if(""!==T){let $;$=R>p?"":h[R+1].toLowerCase();const X=8&l?$:null;if(X&&-1!==gg(X,T,0)||2&l&&T!==$){if(ao(l))return!1;y=!0}}}}else{if(!y&&!ao(l)&&!ao(E))return!1;if(y&&ao(E))continue;y=!1,l=E|1&l}}return ao(l)||y}function ao(i){return 0==(1&i)}function Bw(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let p=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function $t(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function W_(i,o,a=!1){for(let l=0;l<o.length;l++)if(Uw(i,o[l],a))return!0;return!1}function jw(i,o){return i?":not("+o.trim()+")":o}function hl(i){let o=i[0],a=1,l=2,h="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const C=i[++a];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!ao(y)&&(o+=jw(p,h),h=""),l=y,p=p||!ao(l);a++}return""!==h&&(o+=jw(p,h)),o}const St={};function $w(i){ff(Ut(),Ee(),Qn()+i,!1)}function ff(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&$s(o,p,a)}else{const p=i.preOrderHooks;null!==p&&yo(o,p,0,a)}qr(a)}function Ww(i,o=null,a=null,l){const h=Kw(i,o,a,l);return h.resolveInjectorInitializers(),h}function Kw(i,o=null,a=null,l,h=new Set){const p=[a||Dt,II(i)];return l=l||("object"==typeof i?void 0:de(i)),new TI(p,o||j_(),l||null,h)}let $o=(()=>{class i{static create(a,l){if(Array.isArray(a))return Ww({name:""},l,a,"");{const h=a.name??"";return Ww({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Nr,i.NULL=new cg,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>Rn(V_)}),i.__NG_ELEMENT_ID__=-1,i})();function gl(i,o=We.Default){const a=Ee();return null===a?Rn(i,o):zs(An(),a,W(i),o)}function Zo(){throw new Error("invalid")}function qo(i,o){return i<<17|o<<2}function Fi(i){return i>>17&32767}function ey(i){return 2|i}function ja(i){return(131068&i)>>2}function ty(i,o){return-131069&i|o<<2}function ny(i){return 1|i}function JI(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],p=a[l+1];if(-1!==p){const y=i.data[p];_a(h),y.contentQueries(2,o[p],p)}}}function Ag(i,o,a,l,h,p,y,C,E,T,M){const R=o.blueprint.slice();return R[0]=h,R[2]=76|l,(null!==M||i&&1024&i[2])&&(R[2]|=1024),au(R),R[3]=R[15]=i,R[8]=a,R[10]=y||i&&i[10],R[11]=C||i&&i[11],R[12]=E||i&&i[12]||null,R[9]=T||i&&i[9]||null,R[6]=p,R[20]=function Zp(){return jh++}(),R[21]=M,R[16]=2==o.type?i[16]:R,R}function Od(i,o,a,l,h){let p=i.data[o];if(null===p)p=function cy(i,o,a,l,h){const p=fu(),y=ha(),E=i.data[o]=function eD(i,o,a,l,h,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=E),null!==p&&(y?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}(i,o,a,l,h),function Pp(){return bt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=h;const y=function _o(){const i=bt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return ci(p,!0),p}function Wu(i,o,a,l){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function Li(i,o,a){mu(o);try{const l=i.viewQuery;null!==l&&kg(1,l,a);const h=i.template;null!==h&&Pd(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&JI(i,o),i.staticViewQueries&&kg(2,i.viewQuery,a);const p=i.components;null!==p&&function uy(i,o){for(let a=0;a<o.length;a++)hD(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,js()}}function vf(i,o,a,l){const h=o[2];if(128!=(128&h)){mu(o);try{au(o),function Sc(i){return bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Pd(i,o,a,2,l);const y=3==(3&h);if(y){const T=i.preOrderCheckHooks;null!==T&&$s(o,T,null)}else{const T=i.preOrderHooks;null!==T&&yo(o,T,0,null),ed(o,0)}if(function lD(i){for(let o=Wc(i);null!==o;o=Pa(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],p=h[3];0==(512&h[2])&&bn(p,1),h[2]|=512}}}(o),function Pg(i){for(let o=Wc(i);null!==o;o=Pa(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];Us(l)&&vf(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&JI(i,o),y){const T=i.contentCheckHooks;null!==T&&$s(o,T)}else{const T=i.contentHooks;null!==T&&yo(o,T,1),ed(o,1)}!function Cx(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)qr(~h);else{const p=h,y=a[++l],C=a[++l];Np(y,p),C(2,o[p])}}}finally{qr(-1)}}(i,o);const C=i.components;null!==C&&function Ex(i,o){for(let a=0;a<o.length;a++)dD(i,o[a])}(o,C);const E=i.viewQuery;if(null!==E&&kg(2,E,l),y){const T=i.viewCheckHooks;null!==T&&$s(o,T)}else{const T=i.viewHooks;null!==T&&yo(o,T,2),ed(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,bn(o[3],-1))}finally{js()}}}function Pd(i,o,a,l,h){const p=Qn(),y=2&l;try{qr(-1),y&&o.length>22&&ff(i,o,22,!1),a(l,h)}finally{qr(p)}}function ly(i,o,a){!Gi()||(function xg(i,o,a,l){const h=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Gs(a,o),pr(l,o);const y=a.initialInputs;for(let C=h;C<p;C++){const E=i.data[C],T=yr(E);T&&aD(o,a,E);const M=Wi(o,i,C,a);pr(M,o),null!==y&&uD(0,C-h,M,E,0,y),T&&(Gt(a.index,o)[8]=M)}}(i,o,a,vr(a,o)),128==(128&a.flags)&&function kd(i,o,a){const l=a.directiveStart,h=a.directiveEnd,p=a.index,y=function xc(){return bt.lFrame.currentDirectiveIndex}();try{qr(p);for(let C=l;C<h;C++){const E=i.data[C],T=o[C];pu(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&vC(E,T)}}finally{qr(-1),pu(y)}}(i,o,a))}function Sg(i,o,a=vr){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],C=-1===y?a(o,i):i[y];i[h++]=C}}}function wf(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=dy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function dy(i,o,a,l,h,p,y,C,E,T){const M=22+l,R=M+h,$=function XI(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:St);return a}(M,R),X="function"==typeof T?T():T;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:C,declTNode:o,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:X,incompleteFirstPass:!1}}function gC(i,o,a,l){const h=my(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&bC(i).push(l,h.length-1))}function Nd(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function Rd(i,o){const l=o.directiveEnd,h=i.data,p=o.attrs,y=[];let C=null,E=null;for(let T=o.directiveStart;T<l;T++){const M=h[T],R=M.inputs,$=null===p||z_(o)?null:fy(R,p);y.push($),C=Nd(R,T,C),E=Nd(M.outputs,T,E)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=C,o.outputs=E}function ts(i,o,a,l,h,p,y,C){const E=vr(o,a);let M,T=o.inputs;!C&&null!=T&&(M=T[l])?(_y(i,a,M,l,h),aa(o)&&mC(a,o.index)):3&o.type&&(l=function tD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=y?y(h,o.value||"",l):h,p.setProperty(E,l,h))}function mC(i,o){const a=Gt(o,i);16&a[2]||(a[2]|=32)}function _C(i,o,a,l){let h=!1;if(Gi()){const p=function iD(i,o,a){const l=i.directiveRegistry;let h=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];W_(a,y.selectors,!1)&&(h||(h=[]),vs(Gs(a,o),i,y.type),yr(y)?(wC(i,a),h.unshift(y)):h.push(y))}return h}(i,o,a),y=null===l?null:{"":-1};if(null!==p){h=!0,CC(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const R=p[M];R.providersResolver&&R.providersResolver(R)}let C=!1,E=!1,T=Wu(i,o,p.length,null);for(let M=0;M<p.length;M++){const R=p[M];a.mergedAttrs=ya(a.mergedAttrs,R.hostAttrs),EC(i,a,o,T,R),oD(T,R,y),null!==R.contentQueries&&(a.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=128);const $=R.type.prototype;!C&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),C=!0),!E&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}Rd(i,a)}y&&function sD(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new we(-301,!1);l.push(o[h],p)}}}(a,l,y)}return a.mergedAttrs=ya(a.mergedAttrs,a.attrs),h}function yC(i,o,a,l,h,p){const y=p.hostBindings;if(y){let C=i.hostBindingOpCodes;null===C&&(C=i.hostBindingOpCodes=[]);const E=~o.index;(function hy(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(C)!=E&&C.push(E),C.push(l,h,y)}}function vC(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function wC(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function oD(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;yr(o)&&(a[""]=i)}}function CC(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function EC(i,o,a,l,h){i.data[l]=h;const p=h.factory||(h.factory=Mi(h.type)),y=new ys(p,yr(h),gl);i.blueprint[l]=y,a[l]=y,yC(i,o,0,l,Wu(i,a,h.hostVars,St),h)}function aD(i,o,a){const l=vr(o,i),h=wf(a),p=i[10],y=bf(i,Ag(i,h,null,a.onPush?32:16,l,o,p,p.createRenderer(l,a),null,null,null));i[o.index]=y}function Wo(i,o,a,l,h,p){const y=vr(i,o);!function Mg(i,o,a,l,h,p,y){if(null==p)i.removeAttribute(o,h,a);else{const C=null==y?ge(p):y(p,l||"",h);i.setAttribute(o,h,C,a)}}(o[11],y,p,i.value,a,l,h)}function uD(i,o,a,l,h,p){const y=p[o];if(null!==y){const C=l.setInput;for(let E=0;E<y.length;){const T=y[E++],M=y[E++],R=y[E++];null!==C?l.setInput(a,R,T,M):a[M]=R}}}function fy(i,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Og(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function dD(i,o){const a=Gt(o,i);if(Us(a)){const l=a[1];48&a[2]?vf(l,a,l.template,a[8]):a[5]>0&&py(a)}}function py(i){for(let l=Wc(i);null!==l;l=Pa(l))for(let h=10;h<l.length;h++){const p=l[h];if(Us(p))if(512&p[2]){const y=p[1];vf(y,p,y.template,p[8])}else p[5]>0&&py(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=Gt(a[l],i);Us(h)&&h[5]>0&&py(h)}}function hD(i,o){const a=Gt(o,i),l=a[1];(function Ng(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Li(l,a,a[8])}function bf(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Rg(i){for(;i;){i[2]|=32;const o=Di(i);if(Ih(i)&&!o)return i;i=o}return null}function ml(i,o,a,l=!0){const h=o[10];h.begin&&h.begin();try{vf(i,o,i.template,a)}catch(y){throw l&&DC(o,y),y}finally{h.end&&h.end()}}function kg(i,o,a){_a(0),o(i,a)}function my(i){return i[7]||(i[7]=[])}function bC(i){return i.cleanup||(i.cleanup=[])}function DC(i,o){const a=i[9],l=a?a.get(lf,null):null;l&&l.handleError(o)}function _y(i,o,a,l,h){for(let p=0;p<a.length;){const y=a[p++],C=a[p++],E=o[y],T=i.data[y];null!==T.setInput?T.setInput(E,h,l,C):E[C]=h}}function _l(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?p=C:1==p?h=he(h,C):2==p&&(l=he(l,C+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}function Lg(i,o,a,l,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(Tn(p)),Or(p))for(let C=10;C<p.length;C++){const E=p[C],T=E[1].firstChild;null!==T&&Lg(E[1],E,T,l)}const y=a.type;if(8&y)Lg(i,o,a.child,l);else if(32&y){const C=pd(a,o);let E;for(;E=C();)l.push(E)}else if(16&y){const C=Yh(o,a);if(Array.isArray(C))l.push(...C);else{const E=Di(o[16]);Lg(E[1],E,C,l,!0)}}a=h?a.projectionNext:a.next}return l}class If{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Lg(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Or(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Na(o,l),Nn(a,l))}this._attachedToViewContainer=!1}Qc(this._lView[1],this._lView)}onDestroy(o){gC(this._lView[1],this._lView,null,o)}markForCheck(){Rg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ml(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Jp(i,o){Bu(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class fD extends If{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ml(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class yy extends Ed{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Y(o);return new Fd(a,this.ngModule)}}function TC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class gD{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const h=this.injector.get(o,Z_,l);return h!==Z_||a===Z_?h:this.parentInjector.get(o,a,l)}}class Fd extends hg{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function LI(i){return i.map(hl).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return TC(this.componentDef.inputs)}get outputs(){return TC(this.componentDef.outputs)}create(o,a,l,h){let p=(h=h||this.ngModule)instanceof Cd?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new gD(o,p):o,C=y.get(cf,null);if(null===C)throw new we(407,!1);const E=y.get(Ua,null),T=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=l?function Ef(i,o,a){return i.selectRootElement(o,a===it.ShadowDom)}(T,l,this.componentDef.encapsulation):Wh(T,M,function pD(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),$=this.componentDef.onPush?288:272,X=dy(0,null,null,1,0,null,null,null,null,null),_e=Ag(null,X,null,$,null,null,C,T,E,y,null);let Se,qe;mu(_e);try{const tt=function SC(i,o,a,l,h,p){const y=a[1];a[22]=i;const E=Od(y,22,2,"#host",null),T=E.mergedAttrs=o.hostAttrs;null!==T&&(_l(E,T,!0),null!==i&&(Co(h,i,T),null!==E.classes&&Fa(h,i,E.classes),null!==E.styles&&ro(h,i,E.styles)));const M=l.createRenderer(i,o),R=Ag(a,wf(o),null,o.onPush?32:16,a[22],E,l,M,p||null,null,null);return y.firstCreatePass&&(vs(Gs(E,a),y,o.type),wC(y,E),CC(E,a.length,1)),bf(a,R),a[22]=R}(R,this.componentDef,_e,C,T);if(R)if(l)Co(T,R,["ng-version",Ba.full]);else{const{attrs:gt,classes:Te}=function Hw(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===h?""!==p&&o.push(p,i[++l]):8===h&&a.push(p);else{if(!ao(h))break;h=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);gt&&Co(T,R,gt),Te&&Te.length>0&&Fa(T,R,Te.join(" "))}if(qe=Vs(X,22),void 0!==a){const gt=qe.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const It=a[Te];gt.push(null!=It?Array.from(It):null)}}Se=function xC(i,o,a,l){const h=a[1],p=function rD(i,o,a){const l=An();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),EC(i,l,o,Wu(i,o,1,null),a),Rd(i,l));const h=Wi(o,i,l.directiveStart,l);pr(h,o);const p=vr(l,o);return p&&pr(p,o),h}(h,a,o);if(i[8]=a[8]=p,null!==l)for(const C of l)C(p,o);if(o.contentQueries){const C=An();o.contentQueries(1,p,C.directiveStart)}const y=An();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(qr(y.index),yC(a[1],y,0,y.directiveStart,y.directiveEnd,o),vC(o,p)),p}(tt,this.componentDef,_e,[vD]),Li(X,_e,null)}finally{js()}return new AC(this.componentType,Se,ul(qe,_e),_e,qe)}}class AC extends class MI{}{constructor(o,a,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new fD(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const p=this._rootLView;_y(p[1],p,h,o,a),mC(p,this._tNode.index)}}get injector(){return new Ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function vD(){const i=An();vu(Ee()[1],i)}function vy(i){let o=function MC(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if(yr(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const y=i;y.inputs=wy(i.inputs),y.declaredInputs=wy(i.declaredInputs),y.outputs=wy(i.outputs);const C=h.hostBindings;C&&Cy(i,C);const E=h.viewQuery,T=h.contentQueries;if(E&&CD(i,E),T&&OC(i,T),ue(i.inputs,h.inputs),ue(i.declaredInputs,h.declaredInputs),ue(i.outputs,h.outputs),yr(h)&&h.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const C=p[y];C&&C.ngInherit&&C(i),C===vy&&(a=!1)}}o=Object.getPrototypeOf(o)}!function wD(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=ya(h.hostAttrs,a=ya(a,h.hostAttrs))}}(l)}function wy(i){return i===Hr?{}:i===Dt?[]:i}function CD(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function OC(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,p)=>{o(l,h,p),a(l,h,p)}:o}function Cy(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let Vg=null;function yl(){if(!Vg){const i=nn.Symbol;if(i&&i.iterator)Vg=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Vg=l)}}}return Vg}function Df(i){return!!Tf(i)&&(Array.isArray(i)||!(i instanceof Map)&&yl()in i)}function Tf(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ko(i,o,a){return i[o]=a}function Er(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function vl(i,o,a,l){const h=Er(i,o,a);return Er(i,o+1,l)||h}function by(i,o,a,l){const h=Ee();return Er(h,Bs(),o)&&(Ut(),Wo(pn(),h,i,o,a,l)),by}function wl(i,o,a,l){return Er(i,Bs(),a)?o+ge(a)+l:St}function DD(i,o,a,l,h,p,y,C){const E=Ee(),T=Ut(),M=i+22,R=T.firstCreatePass?function Ay(i,o,a,l,h,p,y,C,E){const T=o.consts,M=Od(o,i,4,y||null,Ei(T,C));_C(o,a,M,Ei(T,E)),vu(o,M);const R=M.tViews=dy(2,M,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),R.queries=o.queries.embeddedTView(M)),M}(M,T,E,o,a,l,h,p,y):T.data[M];ci(R,!1);const $=E[11].createComment("");ka(T,E,$,R),pr($,E),bf(E,E[M]=Og($,E,$,R)),vc(R)&&ly(T,E,R),null!=y&&Sg(E,R,C)}function xf(i,o,a){const l=Ee();return Er(l,Bs(),o)&&ts(Ut(),pn(),l,i,o,l[11],a,!1),xf}function Sy(i,o,a,l,h){const y=h?"class":"style";_y(i,a,o.inputs[y],y,l)}function Hg(i,o,a,l){const h=Ee(),p=Ut(),y=22+i,C=h[11],E=h[y]=Wh(C,o,function yu(){return bt.lFrame.currentNamespace}()),T=p.firstCreatePass?function TD(i,o,a,l,h,p,y){const C=o.consts,T=Od(o,i,2,h,Ei(C,p));return _C(o,a,T,Ei(C,y)),null!==T.attrs&&_l(T,T.attrs,!1),null!==T.mergedAttrs&&_l(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,p,h,0,o,a,l):p.data[y];ci(T,!0);const M=T.mergedAttrs;null!==M&&Co(C,E,M);const R=T.classes;null!==R&&Fa(C,E,R);const $=T.styles;return null!==$&&ro(C,E,$),64!=(64&T.flags)&&ka(p,h,E,T),0===function cu(){return bt.lFrame.elementDepthCount}()&&pr(E,h),function lu(){bt.lFrame.elementDepthCount++}(),vc(T)&&(ly(p,h,T),function pC(i,o,a){if(eu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=i.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}(p,T,h)),null!==l&&Sg(h,T),Hg}function Mf(){let i=An();ha()?function fa(){bt.lFrame.isParent=!1}():(i=i.parent,ci(i,!1));const o=i;!function Ic(){bt.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(vu(a,i),eu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Eu(i){return 0!=(16&i.flags)}(o)&&Sy(a,o,Ee(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function nd(i){return 0!=(32&i.flags)}(o)&&Sy(a,o,Ee(),o.stylesWithoutHost,!1),Mf}function xy(i,o,a,l){return Hg(i,o,a,l),Mf(),xy}function UC(){return Ee()}function Oy(i){return!!i&&"function"==typeof i.then}function Py(i){return!!i&&"function"==typeof i.subscribe}const BC=Py;function Ny(i,o,a,l){const h=Ee(),p=Ut(),y=An();return function HC(i,o,a,l,h,p,y,C){const E=vc(l),M=i.firstCreatePass&&bC(i),R=o[8],$=my(o);let X=!0;if(3&l.type||C){const qe=vr(l,o),tt=C?C(qe):qe,gt=$.length,Te=C?ln=>C(Tn(ln[l.index])):l.index;let It=null;if(!C&&E&&(It=function AD(i,o,a,l){const h=i.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===a&&h[p+1]===l){const C=o[7],E=h[p+2];return C.length>E?C[E]:null}"string"==typeof y&&(p+=2)}return null}(i,o,h,l.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=p,It.__ngLastListenerFn__=p,X=!1;else{p=$C(l,o,R,p,!1);const ln=a.listen(tt,h,p);$.push(p,ln),M&&M.push(h,Te,gt,gt+1)}}else p=$C(l,o,R,p,!1);const _e=l.outputs;let Se;if(X&&null!==_e&&(Se=_e[h])){const qe=Se.length;if(qe)for(let tt=0;tt<qe;tt+=2){const Ln=o[Se[tt]][Se[tt+1]].subscribe(p),kl=$.length;$.push(p,Ln),M&&M.push(h,l.index,kl,-(kl+1))}}}(p,h,h[11],y,i,o,0,l),Ny}function Ry(i,o,a,l){try{return!1!==a(l)}catch(h){return DC(i,h),!1}}function $C(i,o,a,l,h){return function p(y){if(y===Function)return l;Rg(2&i.flags?Gt(i.index,o):o);let E=Ry(o,0,l,y),T=p.__ngNextListenerFn__;for(;T;)E=Ry(o,0,T,y)&&E,T=T.__ngNextListenerFn__;return h&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function SD(i=1){return function Hs(i){return(bt.lFrame.contextLView=function _u(i,o){for(;i>0;)o=o[15],i--;return o}(i,bt.lFrame.contextLView))[8]}(i)}function ky(i,o,a){return Zg(i,"",o,"",a),ky}function Zg(i,o,a,l,h){const p=Ee(),y=wl(p,o,a,l);return y!==St&&ts(Ut(),pn(),p,i,y,p[11],h,!1),Zg}function Gg(i,o,a,l,h){const p=i[a+1],y=null===o;let C=l?Fi(p):ja(p),E=!1;for(;0!==C&&(!1===E||y);){const M=i[C+1];xx(i[C],o)&&(E=!0,i[C+1]=l?ny(M):ey(M)),C=l?Fi(M):ja(M)}E&&(i[a+1]=l?ey(p):ny(p))}function xx(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&bs(i,o)>=0}function Kg(i,o){return function rs(i,o,a,l){const h=Ee(),p=Ut(),y=function zi(i){const o=bt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function zC(i,o,a,l){const h=i.data;if(null===h[a+1]){const p=h[Qn()],y=function GC(i,o){return o>=i.expandoStartIndex}(i,a);(function KC(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!y&&(o=!1),o=function WC(i,o,a,l){const h=function ma(i){const o=bt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=br(a=Uy(null,i,o,a,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=Uy(h,i,o,a,l),null===p){let E=function FD(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==ja(l))return i[Fi(l)]}(i,o,l);void 0!==E&&Array.isArray(E)&&(E=Uy(null,i,o,E[1],l),E=br(E,o.attrs,l),function LD(i,o,a,l){i[Fi(a?o.classBindings:o.styleBindings)]=l}(i,o,l,E))}else p=function VD(i,o,a){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=br(l,i[p].hostAttrs,a);return br(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,l),function Sx(i,o,a,l,h,p){let y=p?o.classBindings:o.styleBindings,C=Fi(y),E=ja(y);i[l]=a;let M,T=!1;if(Array.isArray(a)){const R=a;M=R[1],(null===M||bs(R,M)>0)&&(T=!0)}else M=a;if(h)if(0!==E){const $=Fi(i[C+1]);i[l+1]=qo($,C),0!==$&&(i[$+1]=ty(i[$+1],l)),i[C+1]=function qI(i,o){return 131071&i|o<<17}(i[C+1],l)}else i[l+1]=qo(C,0),0!==C&&(i[C+1]=ty(i[C+1],l)),C=l;else i[l+1]=qo(E,0),0===C?C=l:i[E+1]=ty(i[E+1],l),E=l;T&&(i[l+1]=ey(i[l+1])),Gg(i,M,l,!0),Gg(i,M,l,!1),function MD(i,o,a,l,h){const p=h?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&bs(p,o)>=0&&(a[l+1]=ny(a[l+1]))}(o,M,i,l,p),y=qo(C,E),p?o.classBindings=y:o.styleBindings=y}(h,p,o,a,y,l)}}(p,i,y,l),o!==St&&Er(h,y,o)&&function Nf(i,o,a,l,h,p,y,C){if(!(3&o.type))return;const E=i.data,T=E[C+1];Hd(function sC(i){return 1==(1&i)}(T)?Qg(E,o,a,h,ja(T),y):void 0)||(Hd(p)||function X_(i){return 2==(2&i)}(T)&&(p=Qg(E,null,a,h,C,y)),function M_(i,o,a,l,h){if(o)h?i.addClass(a,l):i.removeClass(a,l);else{let p=-1===l.indexOf("-")?void 0:es.DashCase;null==h?i.removeStyle(a,l,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=es.Important),i.setStyle(a,l,h,p))}}(l,y,ui(Qn(),a),h,p))}(p,p.data[Qn()],h,h[11],i,h[y+1]=function UD(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=de(mr(i)))),i}(o,a),l,y)}(i,o,null,!0),Kg}function Uy(i,o,a,l,h){let p=null;const y=a.directiveEnd;let C=a.directiveStylingLast;for(-1===C?C=a.directiveStart:C++;C<y&&(p=o[C],l=br(l,p.hostAttrs,h),p!==i);)C++;return null!==i&&(a.directiveStylingLast=C),l}function br(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Kr(i,y,!!a||o[++p]))}return void 0===i?null:i}function Qg(i,o,a,l,h,p){const y=null===o;let C;for(;h>0;){const E=i[h],T=Array.isArray(E),M=T?E[1]:E,R=null===M;let $=a[h+1];$===St&&($=R?Dt:void 0);let X=R?Sa($,l):M===l?$:void 0;if(T&&!Hd(X)&&(X=Sa(E,l)),Hd(X)&&(C=X,y))return C;const _e=i[h+1];h=y?Fi(_e):ja(_e)}if(null!==o){let E=p?o.residualClasses:o.residualStyles;null!=E&&(C=Sa(E,l))}return C}function Hd(i){return void 0!==i}function YC(i,o=""){const a=Ee(),l=Ut(),h=i+22,p=l.firstCreatePass?Od(l,h,1,o,null):l.data[h],y=a[h]=function Qp(i,o){return i.createText(o)}(a[11],o);ka(l,a,y,p),ci(p,!1)}function Hy(i){return Jg("",i,""),Hy}function Jg(i,o,a){const l=Ee(),h=wl(l,i,o,a);return h!==St&&function Za(i,o,a){const l=ui(o,i);!function I_(i,o,a){i.setValue(o,a)}(i[11],l,a)}(l,Qn(),h),Jg}const Il=void 0;var GD=["en",[["a","p"],["AM","PM"],Il],[["AM","PM"],Il,Il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Il,"{1} 'at' {0}",Il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qD(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Zd={};function ev(i){const o=function zD(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=rv(o);if(a)return a;const l=o.split("-")[0];if(a=rv(l),a)return a;if("en"===l)return GD;throw new we(701,!1)}function nv(i){return ev(i)[wt.PluralCase]}function rv(i){return i in Zd||(Zd[i]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[i]),Zd[i]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Dl="en-US";let KD=Dl;function bv(i,o,a,l,h){if(i=W(i),Array.isArray(i))for(let p=0;p<i.length;p++)bv(i[p],o,a,l,h);else{const p=Ut(),y=Ee();let C=Zu(i)?i:W(i.provide),E=af(i);const T=An(),M=1048575&T.providerIndexes,R=T.directiveStart,$=T.providerIndexes>>20;if(Zu(i)||!i.multi){const X=new ys(E,h,gl),_e=gm(C,o,h?M:M+$,R);-1===_e?(vs(Gs(T,y),p,C),Iv(p,i,o.length),o.push(C),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(X),y.push(X)):(a[_e]=X,y[_e]=X)}else{const X=gm(C,o,M+$,R),_e=gm(C,o,M,M+$),Se=X>=0&&a[X],qe=_e>=0&&a[_e];if(h&&!qe||!h&&!Se){vs(Gs(T,y),p,C);const tt=function jf(i,o,a,l,h){const p=new ys(i,a,gl);return p.multi=[],p.index=o,p.componentProviders=0,pm(p,h,l&&!a),p}(h?Bf:pT,a.length,h,l,E);!h&&qe&&(a[_e].providerFactory=tt),Iv(p,i,o.length,0),o.push(C),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(tt),y.push(tt)}else Iv(p,i,X>-1?X:_e,pm(a[h?_e:X],E,!h&&l));!h&&l&&qe&&a[_e].componentProviders++}}}function Iv(i,o,a,l){const h=Zu(o),p=function U_(i){return!!i.useClass}(o);if(h||p){const E=(p?W(o.useClass):o).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,E]):T[M+1].push(l,E)}else T.push(a,E)}}}function pm(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function gm(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function pT(i,o,a,l){return Dv(this.multi,[])}function Bf(i,o,a,l){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=Wi(a,a[1],this.providerFactory.index,l);p=C.slice(0,y),Dv(h,p);for(let E=y;E<C.length;E++)p.push(C[E])}else p=[],Dv(h,p);return p}function Dv(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function ME(i,o=[]){return a=>{a.providersResolver=(l,h)=>function Ev(i,o,a){const l=Ut();if(l.firstCreatePass){const h=yr(i);bv(a,l.data,l.blueprint,h,!0),bv(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class Gd{}class Hf{}function Tv(i,o){return new Av(i,o??null)}class Av extends Gd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yy(this);const l=dn(o);this._bootstrapComponents=Rr(l.bootstrap),this._r3Injector=Kw(o,a,[{provide:Gd,useValue:this},{provide:Ed,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class mm extends Hf{constructor(o){super(),this.moduleType=o}create(o){return new Av(this.moduleType,o)}}class _m extends Gd{constructor(o,a,l){super(),this.componentFactoryResolver=new yy(this),this.instance=null;const h=new TI([...o,{provide:Gd,useValue:this},{provide:Ed,useValue:this.componentFactoryResolver}],a||j_(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function $f(i,o,a=null){return new _m(i,o,a).injector}let Sv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=lg(0,a.type),h=l.length>0?$f([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Yt({token:i,providedIn:"environment",factory:()=>new i(Rn(Cd))}),i})();function ym(i){i.getStandaloneInjector=o=>o.get(Sv).getOrCreateStandaloneInjector(i)}function LE(i,o,a,l){return Em(Ee(),Sn(),i,o,a,l)}function VE(i,o,a,l,h){return Lv(Ee(),Sn(),i,o,a,l,h)}function Rv(i,o,a,l,h,p){return function BE(i,o,a,l,h,p,y,C){const E=o+a;return function Bg(i,o,a,l,h){const p=vl(i,o,a,l);return Er(i,o+2,h)||p}(i,E,h,p,y)?Ko(i,E+3,C?l.call(C,h,p,y):l(h,p,y)):Tl(i,E+3)}(Ee(),Sn(),i,o,a,l,h,p)}function Tl(i,o){const a=i[o];return a===St?void 0:a}function Em(i,o,a,l,h,p){const y=o+a;return Er(i,y,h)?Ko(i,y+1,p?l.call(p,h):l(h)):Tl(i,y+1)}function Lv(i,o,a,l,h,p,y){const C=o+a;return vl(i,C,h,p)?Ko(i,C+2,y?l.call(y,h,p):l(h,p)):Tl(i,C+2)}function Uv(i,o){const a=Ut();let l;const h=i+22;a.firstCreatePass?(l=function jE(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const p=l.factory||(l.factory=Mi(l.type)),y=zn(gl);try{const C=Ca(!1),E=p();return Ca(C),function FC(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Ee(),h,E),E}finally{zn(y)}}function HE(i,o,a){const l=i+22,h=Ee(),p=qi(h,l);return co(h,l)?Em(h,Sn(),o,p.transform,a,p):p.transform(a)}function $E(i,o,a,l){const h=i+22,p=Ee(),y=qi(p,h);return co(p,h)?Lv(p,Sn(),o,y.transform,a,l,y):y.transform(a,l)}function co(i,o){return i[1].data[o].pure}function Kd(i){return o=>{setTimeout(i,void 0,o)}}const lo=class ZE extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,p=a||(()=>null),y=l;if(o&&"object"==typeof o){const E=o;h=E.next?.bind(E),p=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(p=Kd(p),h&&(h=Kd(h)),y&&(y=Kd(y)));const C=super.subscribe({next:h,error:p,complete:y});return o instanceof J.w0&&o.add(C),C}};function qf(){return this._results[yl()]()}class bm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=yl(),l=bm.prototype;l[a]||(l[a]=qf)}get changes(){return this._changes||(this._changes=new lo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=cn(o);(this._changesDetected=!function zr(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],p=o[l];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Dr=(()=>{class i{}return i.__NG_ELEMENT_ID__=Im,i})();const qE=Dr,Gf=class extends qE{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,h=Ag(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(l)),Li(l,h,o),new If(h)}};function Im(){return zf(An(),Ee())}function zf(i,o){return 4&i.type?new Gf(o,i,ul(i,o)):null}let Yd=(()=>{class i{}return i.__NG_ELEMENT_ID__=GE,i})();function GE(){return Tm(An(),Ee())}const zE=Yd,Qd=class extends zE{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return ul(this._hostTNode,this._hostLView)}get injector(){return new Ws(this._hostTNode,this._hostLView)}get parentInjector(){const o=Tu(this._hostTNode,this._hostLView);if(id(o)){const a=wa(o,this._hostLView),l=sr(o);return new Ws(a[1].data[l+8],a)}return new Ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Dm(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let h,p;"number"==typeof l?h=l:null!=l&&(h=l.index,p=l.injector);const y=o.createEmbeddedView(a||{},p);return this.insert(y,h),y}createComponent(o,a,l,h,p){const y=o&&!function en(i){return"function"==typeof i}(o);let C;if(y)C=a;else{const R=a||{};C=R.index,l=R.injector,h=R.projectableNodes,p=R.environmentInjector||R.ngModuleRef}const E=y?o:new Fd(Y(o)),T=l||this.parentInjector;if(!p&&null==E.ngModule){const $=(y?T:this.parentInjector).get(Cd,null);$&&(p=$)}const M=E.create(T,h,void 0,p);return this.insert(M.hostView,C),M}insert(o,a){const l=o._lView,h=l[1];if(function ou(i){return Or(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const R=l[3],$=new Qd(R,R[6],R[3]);$.detach($.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function Kc(i,o,a,l){const h=10+l,p=a.length;l>0&&(a[h-1][4]=o),l<p-10?(o[4]=a[h],Yi(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function A_(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(y,o);const C=o[19];null!==C&&C.insertView(i),o[2]|=64}(h,l,y,p);const C=rl(p,y),E=l[11],T=ki(E,y[7]);return null!==T&&function D_(i,o,a,l,h,p){l[0]=h,l[6]=o,Bu(i,l,a,1,h,p)}(h,y[6],E,l,T,C),o.attachToViewContainerRef(),Yi(Wf(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Dm(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Na(this._lContainer,a);l&&(Nn(Wf(this._lContainer),a),Qc(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Na(this._lContainer,a);return l&&null!=Nn(Wf(this._lContainer),a)?new If(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function Dm(i){return i[8]}function Wf(i){return i[8]||(i[8]=[])}function Tm(i,o){let a;const l=o[i.index];if(Or(l))a=l;else{let h;if(8&i.type)h=Tn(l);else{const p=o[11];h=p.createComment("");const y=vr(i,o);no(p,ki(p,y),h,function S_(i,o){return i.nextSibling(o)}(p,y),!1)}o[i.index]=a=Og(l,o,h,i),bf(o,a)}return new Qd(a,i,o)}class jv{constructor(o){this.queryList=o,this.matches=null}clone(){return new jv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yf{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<l;p++){const y=a.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new Yf(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Ju(o,a).matches&&this.queries[a].setDirty()}}class Qf{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Jf{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Jf(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Sm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Sm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,a,WE(a,p)),this.matchTNodeWithReadOption(o,a,Eo(a,o,p,!1,!1))}else l===Dr?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Eo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Xn||h===Yd||h===Dr&&4&a.type)this.addMatch(a.index,-2);else{const p=Eo(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function WE(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function IT(i,o,a,l){return-1===a?function KE(i,o){return 11&i.type?ul(i,o):4&i.type?zf(i,o):null}(o,i):-2===a?function Xf(i,o,a){return a===Xn?ul(o,i):a===Dr?zf(o,i):a===Yd?Tm(o,i):void 0}(i,o,l):Wi(i,i[1],a,o)}function Hv(i,o,a,l){const h=o[19].queries[l];if(null===h.matches){const p=i.data,y=a.matches,C=[];for(let E=0;E<y.length;E+=2){const T=y[E];C.push(T<0?null:IT(o,p[T],y[E+1],a.metadata.read))}h.matches=C}return h.matches}function Jd(i,o,a,l){const h=i.queries.getByIndex(a),p=h.matches;if(null!==p){const y=Hv(i,o,h,a);for(let C=0;C<p.length;C+=2){const E=p[C];if(E>0)l.push(y[C/2]);else{const T=p[C+1],M=o[-E];for(let R=10;R<M.length;R++){const $=M[R];$[17]===$[3]&&Jd($[1],$,T,l)}if(null!==M[9]){const R=M[9];for(let $=0;$<R.length;$++){const X=R[$];Jd(X[1],X,T,l)}}}}}return l}function Xd(i){const o=Ee(),a=Ut(),l=Mc();_a(l+1);const h=Ju(a,l);if(i.dirty&&function su(i){return 4==(4&i[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const p=h.crossesNgTemplate?Jd(a,o,l,[]):Hv(a,o,h,l);i.reset(p,uf),i.notifyOnChanges()}return!0}return!1}function xm(i,o,a,l){const h=Ut();if(h.firstCreatePass){const p=An();(function Zv(i,o,a){null===i.queries&&(i.queries=new Jf),i.queries.track(new Sm(o,a))})(h,new Qf(o,a,l),p.index),function TT(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function $v(i,o,a){const l=new bm(4==(4&a));gC(i,o,l,l.destroy),null===o[19]&&(o[19]=new Yf),o[19].queries.push(new jv(l))}(h,Ee(),a)}function YE(){return function DT(i,o){return i[19].queries[o].queryList}(Ee(),Mc())}function Ju(i,o){return i.queries.getByIndex(o)}function xl(...i){}const n0=new gn("Application Initializer");let tc=(()=>{class i{constructor(a){this.appInits=a,this.resolve=xl,this.reject=xl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Oy(p))a.push(p);else if(BC(p)){const y=new Promise((C,E)=>{p.subscribe({complete:C,error:E})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Rn(n0,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const r0=new gn("AppId",{providedIn:"root",factory:function s0(){return`${rp()}${rp()}${rp()}`}});function rp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const o0=new gn("Platform Initializer"),Vm=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),a0=new gn("appBootstrapListener");let db=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ip=new gn("LocaleId",{providedIn:"root",factory:()=>I(ip,We.Optional|We.SkipSelf)||function hb(){return typeof $localize<"u"&&$localize.locale||Dl}()}),fb=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class pb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let sh=(()=>{class i{compileModuleSync(a){return new mm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Rr(dn(a).declarations).reduce((y,C)=>{const E=Y(C);return E&&y.push(new Fd(E)),y},[]);return new pb(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Um=(()=>Promise.resolve(0))();function l0(i){typeof Zone>"u"?Um.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class mn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lo(!1),this.onMicrotaskEmpty=new lo(!1),this.onStable=new lo(!1),this.onError=new lo(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function _b(){let i=nn.requestAnimationFrame,o=nn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function $T(i){const o=()=>{!function d0(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(nn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ne(i),i.isCheckStableRunning=!0,Xo(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ne(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,p,y,C)=>{try{return tr(i),a.invokeTask(h,p,y,C)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),nc(i)}},onInvoke:(a,l,h,p,y,C,E)=>{try{return tr(i),a.invoke(h,p,y,C,E)}finally{i.shouldCoalesceRunChangeDetection&&o(),nc(i)}},onHasTask:(a,l,h,p)=>{a.hasTask(h,p),l===h&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Ne(i),Xo(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,h,p)=>(a.handleError(h,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mn.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(mn.isInAngularZone())throw new we(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,oh,xl,xl);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const oh={};function Xo(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ne(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function tr(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function nc(i){i._nesting--,Xo(i)}class h0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lo,this.onMicrotaskEmpty=new lo,this.onStable=new lo,this.onError=new lo}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const et=new gn(""),Et=new gn("");let Me,ZT=(()=>{class i{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Me||(function ce(i){Me=i}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mn.assertNotInAngularZone(),l0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())l0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Rn(mn),Rn(Ge),Rn(Et))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),Ge=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Me?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Dn=null;const f0=new gn("AllowMultipleToken"),p0=new gn("PlatformDestroyListeners");class yb{constructor(o,a){this.name=o,this.token=a}}function Mt(i,o,a=[]){const l=`Platform: ${o}`,h=new gn(l);return(p=[])=>{let y=Ct();if(!y||y.injector.get(f0,!1)){const C=[...a,...p,{provide:h,useValue:!0}];i?i(C):function zT(i){if(Dn&&!Dn.get(f0,!1))throw new we(400,!1);Dn=i;const o=i.get(uh);(function vb(i){const o=i.get(o0,null);o&&o.forEach(a=>a())})(i)}(function g0(i=[],o){return $o.create({name:o,providers:[{provide:Sw,useValue:"platform"},{provide:p0,useValue:new Set([()=>Dn=null])},...i]})}(C,l))}return function ah(i){const o=Ct();if(!o)throw new we(401,!1);return o}()}}function Ct(){return Dn?.get(uh)??null}let uh=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function wb(i,o){let a;return a="noop"===i?new h0:("zone.js"===i?void 0:i)||new mn(o),a}(l?.ngZone,function Qt(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:mn,useValue:h}];return h.run(()=>{const y=$o.create({providers:p,parent:this.injector,name:a.moduleType.name}),C=a.create(y),E=C.injector.get(lf,null);if(!E)throw new we(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:M=>{E.handleError(M)}});C.onDestroy(()=>{ch(this._modules,C),T.unsubscribe()})}),function $n(i,o,a){try{const l=a();return Oy(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(E,h,()=>{const T=C.injector.get(tc);return T.runInitializers(),T.donePromise.then(()=>(function YD(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(KD=i.toLowerCase().replace(/_/g,"-"))}(C.injector.get(ip,Dl)||Dl),this._moduleDoBootstrap(C),C))})})}bootstrapModule(a,l=[]){const h=Ze({},l);return function qT(i,o,a){const l=new mm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const l=a.injector.get(Ml);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(p0,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Rn($o))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Ze(i,o){return Array.isArray(o)?o.reduce(Ze,i):{...i,...o}}let Ml=(()=>{class i{constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new N.y(C=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{mn.assertNotInAngularZone(),l0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(p,y.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const h=a instanceof hg;if(!this._injector.get(tc).done)throw!h&&Wt(a),new we(405,false);let y;y=h?a:this._injector.get(Ed).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const C=function GT(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Gd),T=y.create($o.NULL,[],l||y.selector,C),M=T.location.nativeElement,R=T.injector.get(et,null);return R?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),ch(this.components,T),R?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;ch(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(a0,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ch(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Rn(mn),Rn(Cd),Rn(lf))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ch(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let sp=!0,Cb=!1;function op(){return Cb=!0,sp}function Eb(){if(Cb)throw new Error("Cannot enable prod mode after platform setup.");sp=!1}let bb=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ib,i})();function Ib(i){return function ic(i,o,a){if(aa(i)&&!a){const l=Gt(i.index,o);return new If(l,l)}return 47&i.type?new If(o[16],o):null}(An(),Ee(),16==(16&i))}class Pl{constructor(){}supports(o){return Df(o)}create(o){return new XT(o)}}const is=(i,o)=>o;class XT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||is}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<Zn(l,h,p)?a:l,C=Zn(y,h,p),E=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{p||(p=[]);const T=C-h,M=E-h;if(T!=M){for(let $=0;$<T;$++){const X=$<p.length?p[$]:p[$]=0,_e=X+$;M<=_e&&_e<T&&(p[$]=X+1)}p[y.previousIndex]=M-T}}C!==E&&o(y,C,E)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Df(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],y=this._trackByFn(C,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,C)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,C),l=!0),a=a._next}else h=0,function RC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[yl()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,C=>{y=this._trackByFn(h,C),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,C,y,h)),Object.is(a.item,C)||this._addIdentityChange(a,C)):(a=this._mismatch(a,C,y,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new Tr(a,l),p,h),o}_verifyReinsertion(o,a,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ja),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ja),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Tr{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Ja{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new eA,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zn(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class sc{constructor(){}supports(o){return o instanceof Map||Tf(o)}create(){return new w0}}class w0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Tf(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const l=new Sb(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Sb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lh(){return new C0([new Pl])}let C0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||lh()),deps:[[i,new _t,new je]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new we(901,!1)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:lh}),i})();function dh(){return new Rl([new sc])}let Rl=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||dh()),deps:[[i,new _t,new je]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new we(901,!1)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:dh}),i})();const ta=Mt(null,"core",[]);let up=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Rn(Ml))},i.\u0275mod=kt({type:i}),i.\u0275inj=Ot({}),i})();function ac(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,De,k)=>{k.d(De,{Z:()=>we});var u=k(2090),J=k(4859),N=k(9681),se=k(1877);class re{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,N._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ge,fe=N._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(ge);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ke=nt.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,N._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,N._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function he(){const Xe=function de(Xe){const ge={},fe={__esModule:!0,initializeApp:function Ae(Be,U={}){const pe=N.initializeApp(Be,U);if((0,u.r3)(ge,pe.name))return ge[pe.name];const G=new Xe(pe,fe);return ge[pe.name]=G,G},app:nt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Be){const U=Be.name,pe=U.replace("-compat","");if(N._registerComponent(Be)&&"PUBLIC"===Be.type){const G=(Q=nt())=>{if("function"!=typeof Q[pe])throw ue.create("invalid-app-argument",{appName:U});return Q[pe]()};void 0!==Be.serviceProps&&(0,u.ZB)(G,Be.serviceProps),fe[pe]=G,Xe.prototype[pe]=function(...Q){return this._getService.bind(this,U).apply(this,Be.multipleInstances?Q:[])}}return"PUBLIC"===Be.type?fe[pe]:null},removeApp:function Ke(Be){delete ge[Be]},useAsService:function Ue(Be,U){return"serverAuth"===U?null:U},modularAPIs:N}};function nt(Be){if(!(0,u.r3)(ge,Be=Be||N._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Be});return ge[Be]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ye(){return Object.keys(ge).map(Be=>ge[Be])}}),nt.App=Xe,fe}(re);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,u.ZB)(Xe,fe)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Xe}(),j=new se.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function xe(Xe){(0,N.registerVersion)("@firebase/app-compat","0.1.39",Xe)}()},9681:(ot,De,k)=>{k.r(De),k.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Rs,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>zt,_addOrOverwriteComponent:()=>Yt,_apps:()=>sn,_clearComponents:()=>Bi,_components:()=>_n,_getProvider:()=>Ot,_registerComponent:()=>Sr,_removeServiceInstance:()=>un,deleteApp:()=>ia,getApp:()=>ii,getApps:()=>si,initializeApp:()=>vi,onLog:()=>cs,registerVersion:()=>_r,setLogLevel:()=>zn});var u=k(5861),J=k(4859),N=k(1877),se=k(2090),re=k(8766);class le{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function ue(Je){return"VERSION"===Je.getComponent()?.type}(Ye)){const yt=Ye.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Ye=>Ye).join(" ")}}const de="@firebase/app",B=new N.Yd("@firebase/app"),Vt="[DEFAULT]",ze={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,_n=new Map;function zt(Je,be){try{Je.container.addComponent(be)}catch(Ye){B.debug(`Component ${be.name} failed to register with FirebaseApp ${Je.name}`,Ye)}}function Yt(Je,be){Je.container.addOrOverwriteComponent(be)}function Sr(Je){const be=Je.name;if(_n.has(be))return B.debug(`There were multiple attempts to register component ${be}.`),!1;_n.set(be,Je);for(const Ye of sn.values())zt(Ye,Je);return!0}function Ot(Je,be){const Ye=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),Je.container.getProvider(be)}function un(Je,be,Ye=Vt){Ot(Je,be).clearInstance(Ye)}function Bi(){_n.clear()}const xr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class jr{constructor(be,Ye,yt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}const Rs="9.14.0";function vi(Je,be={}){let Ye=Je;"object"!=typeof be&&(be={name:be});const yt=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},be),mt=yt.name;if("string"!=typeof mt||!mt)throw xr.create("bad-app-name",{appName:String(mt)});if(Ye||(Ye=(0,se.aH)()),!Ye)throw xr.create("no-options");const kt=sn.get(mt);if(kt){if((0,se.vZ)(Ye,kt.options)&&(0,se.vZ)(yt,kt.config))return kt;throw xr.create("duplicate-app",{appName:mt})}const H=new J.H0(mt);for(const z of _n.values())H.addComponent(z);const L=new jr(Ye,yt,H);return sn.set(mt,L),L}function ii(Je=Vt){const be=sn.get(Je);if(!be&&Je===Vt)return vi();if(!be)throw xr.create("no-app",{appName:Je});return be}function si(){return Array.from(sn.values())}function ia(Je){return We.apply(this,arguments)}function We(){return(We=(0,u.Z)(function*(Je){const be=Je.name;sn.has(be)&&(sn.delete(be),yield Promise.all(Je.container.getProviders().map(Ye=>Ye.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function _r(Je,be,Ye){var yt;let mt=null!==(yt=ze[Je])&&void 0!==yt?yt:Je;Ye&&(mt+=`-${Ye}`);const kt=mt.match(/\s|\//),H=be.match(/\s|\//);if(kt||H){const L=[`Unable to register library "${mt}" with version "${be}":`];return kt&&L.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),kt&&H&&L.push("and"),H&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void B.warn(L.join(" "))}Sr(new J.wA(`${mt}-version`,()=>({library:mt,version:be}),"VERSION"))}function cs(Je,be){if(null!==Je&&"function"!=typeof Je)throw xr.create("invalid-log-argument");(0,N.Am)(Je,be)}function zn(Je){(0,N.Ub)(Je)}const On="firebase-heartbeat-store";let Vn=null;function hn(){return Vn||(Vn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Je,be)=>{0===be&&Je.createObjectStore(On)}}).catch(Je=>{throw xr.create("idb-open",{originalErrorMessage:Je.message})})),Vn}function it(){return(it=(0,u.Z)(function*(Je){var be;try{return(yield hn()).transaction(On).objectStore(On).get(Un(Je))}catch(Ye){if(Ye instanceof se.ZR)B.warn(Ye.message);else{const yt=xr.create("idb-get",{originalErrorMessage:null===(be=Ye)||void 0===be?void 0:be.message});B.warn(yt.message)}}})).apply(this,arguments)}function nn(Je,be){return cr.apply(this,arguments)}function cr(){return(cr=(0,u.Z)(function*(Je,be){var Ye;try{const mt=(yield hn()).transaction(On,"readwrite");return yield mt.objectStore(On).put(be,Un(Je)),mt.done}catch(yt){if(yt instanceof se.ZR)B.warn(yt.message);else{const mt=xr.create("idb-set",{originalErrorMessage:null===(Ye=yt)||void 0===Ye?void 0:Ye.message});B.warn(mt.message)}}})).apply(this,arguments)}function Un(Je){return`${Je.name}!${Je.options.appId}`}class ls{constructor(be){this.container=be,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new Xt(Ye),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var be=this;return(0,u.Z)(function*(){const yt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=Jt();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==mt&&!be._heartbeatsCache.heartbeats.some(kt=>kt.date===mt))return be._heartbeatsCache.heartbeats.push({date:mt,agent:yt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(kt=>{const H=new Date(kt.date).valueOf();return Date.now()-H<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,u.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ye=Jt(),{heartbeatsToSend:yt,unsentEntries:mt}=function Si(Je,be=1024){const Ye=[];let yt=Je.slice();for(const mt of Je){const kt=Ye.find(H=>H.agent===mt.agent);if(kt){if(kt.dates.push(mt.date),Wn(Ye)>be){kt.dates.pop();break}}else if(Ye.push({agent:mt.agent,dates:[mt.date]}),Wn(Ye)>be){Ye.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:yt}}(be._heartbeatsCache.heartbeats),kt=(0,se.L)(JSON.stringify({version:2,heartbeats:yt}));return be._heartbeatsCache.lastSentHeartbeatDate=Ye,mt.length>0?(be._heartbeatsCache.heartbeats=mt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),kt})()}}function Jt(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,u.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function ht(Je){return it.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ye=this;return(0,u.Z)(function*(){var yt;if(yield Ye._canUseIndexedDBPromise){const kt=yield Ye.read();return nn(Ye.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:kt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ye=this;return(0,u.Z)(function*(){var yt;if(yield Ye._canUseIndexedDBPromise){const kt=yield Ye.read();return nn(Ye.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...be.heartbeats]})}})()}}function Wn(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Mr(Je){Sr(new J.wA("platform-logger",be=>new le(be),"PRIVATE")),Sr(new J.wA("heartbeat",be=>new ls(be),"PRIVATE")),_r(de,"0.8.4",Je),_r(de,"0.8.4","esm2017"),_r("fire-js","")}("")},4859:(ot,De,k)=>{k.d(De,{H0:()=>de,wA:()=>N});var u=k(5861),J=k(2090);class N{constructor(B,j,W){this.name=B,this.instanceFactory=j,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class re{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const W=new J.BH;if(this.instancesDeferred.set(j,W),this.isInitialized(j)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:j});Fe&&W.resolve(Fe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const W=this.normalizeInstanceIdentifier(B?.identifier),Fe=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(xe){if(Fe)return null;throw xe}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,W]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(j);try{const xe=this.getOrInitializeService({instanceIdentifier:Fe});W.resolve(xe)}catch{}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,u.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...j.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,W=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:W,options:j});for(const[xe,we]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(xe)&&we.resolve(Fe);return Fe}onInit(B,j){var W;const Fe=this.normalizeInstanceIdentifier(j),xe=null!==(W=this.onInitCallbacks.get(Fe))&&void 0!==W?W:new Set;xe.add(B),this.onInitCallbacks.set(Fe,xe);const we=this.instances.get(Fe);return we&&B(we,Fe),()=>{xe.delete(B)}}invokeOnInitCallbacks(B,j){const W=this.onInitCallbacks.get(j);if(W)for(const Fe of W)try{Fe(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let W=this.instances.get(B);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(he=B,he===se?void 0:he),options:j}),this.instances.set(B,W),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(W,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,W)}catch{}var he;return W||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new re(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,De,k)=>{k.d(De,{Am:()=>he,Ub:()=>de,Yd:()=>ue,in:()=>J});const u=[];var J=(()=>{return(B=J||(J={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",J;var B})();const N={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},se=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},le=(B,j,...W)=>{if(j<B.logLevel)return;const Fe=(new Date).toISOString(),xe=re[j];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[xe](`[${Fe}]  ${B.name}:`,...W)};class ue{constructor(j){this.name=j,this._logLevel=se,this._logHandler=le,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in J))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...j),this._logHandler(this,J.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...j),this._logHandler(this,J.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,J.INFO,...j),this._logHandler(this,J.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,J.WARN,...j),this._logHandler(this,J.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...j),this._logHandler(this,J.ERROR,...j)}}function de(B){u.forEach(j=>{j.setLogLevel(B)})}function he(B,j){for(const W of u){let Fe=null;j&&j.level&&(Fe=N[j.level]),W.userLogHandler=null===B?null:(xe,we,...Xe)=>{const ge=Xe.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Fe??xe.logLevel)&&B({level:J[we].toLowerCase(),message:ge,args:Xe,type:xe.name})}}}},8766:(ot,De,k)=>{k.d(De,{Lj:()=>Ae,X3:()=>nt});var u=k(5861);let N,se;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,B=new WeakMap,j=new WeakMap;let xe={get(U,pe,G){if(U instanceof IDBTransaction){if("done"===pe)return de.get(U);if("objectStoreNames"===pe)return U.objectStoreNames||he.get(U);if("store"===pe)return G.objectStoreNames[1]?void 0:G.objectStore(G.objectStoreNames[0])}return fe(U[pe])},set:(U,pe,G)=>(U[pe]=G,!0),has:(U,pe)=>U instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in U};function ge(U){return"function"==typeof U?function Xe(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...pe){return U.apply(Ke(this),pe),fe(ue.get(this))}:function(...pe){return fe(U.apply(Ke(this),pe))}:function(pe,...G){const Q=U.call(Ke(this),pe,...G);return he.set(Q,pe.sort?pe.sort():[pe]),fe(Q)}}(U):(U instanceof IDBTransaction&&function Fe(U){if(de.has(U))return;const pe=new Promise((G,Q)=>{const ne=()=>{U.removeEventListener("complete",te),U.removeEventListener("error",ke),U.removeEventListener("abort",ke)},te=()=>{G(),ne()},ke=()=>{Q(U.error||new DOMException("AbortError","AbortError")),ne()};U.addEventListener("complete",te),U.addEventListener("error",ke),U.addEventListener("abort",ke)});de.set(U,pe)}(U),((U,pe)=>pe.some(G=>U instanceof G))(U,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,xe):U)}function fe(U){if(U instanceof IDBRequest)return function W(U){const pe=new Promise((G,Q)=>{const ne=()=>{U.removeEventListener("success",te),U.removeEventListener("error",ke)},te=()=>{G(fe(U.result)),ne()},ke=()=>{Q(U.error),ne()};U.addEventListener("success",te),U.addEventListener("error",ke)});return pe.then(G=>{G instanceof IDBCursor&&ue.set(G,U)}).catch(()=>{}),j.set(pe,U),pe}(U);if(B.has(U))return B.get(U);const pe=ge(U);return pe!==U&&(B.set(U,pe),j.set(pe,U)),pe}const Ke=U=>j.get(U);function nt(U,pe,{blocked:G,upgrade:Q,blocking:ne,terminated:te}={}){const ke=indexedDB.open(U,pe),Re=fe(ke);return Q&&ke.addEventListener("upgradeneeded",at=>{Q(fe(ke.result),at.oldVersion,at.newVersion,fe(ke.transaction))}),G&&ke.addEventListener("blocked",()=>G()),Re.then(at=>{te&&at.addEventListener("close",()=>te()),ne&&at.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Re}function Ae(U,{blocked:pe}={}){const G=indexedDB.deleteDatabase(U);return pe&&G.addEventListener("blocked",()=>pe()),fe(G).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ue=new Map;function Be(U,pe){if(!(U instanceof IDBDatabase)||pe in U||"string"!=typeof pe)return;if(Ue.get(pe))return Ue.get(pe);const G=pe.replace(/FromIndex$/,""),Q=pe!==G,ne=Ce.includes(G);if(!(G in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!ye.includes(G))return;const te=function(){var ke=(0,u.Z)(function*(Re,...at){const Kt=this.transaction(Re,ne?"readwrite":"readonly");let Vt=Kt.store;return Q&&(Vt=Vt.index(at.shift())),(yield Promise.all([Vt[G](...at),ne&&Kt.done]))[0]});return function(at){return ke.apply(this,arguments)}}();return Ue.set(pe,te),te}!function we(U){xe=U(xe)}(U=>({...U,get:(pe,G,Q)=>Be(pe,G)||U.get(pe,G,Q),has:(pe,G)=>!!Be(pe,G)||U.has(pe,G)}))},5861:(ot,De,k)=>{function u(N,se,re,le,ue,de,he){try{var B=N[de](he),j=B.value}catch(W){return void re(W)}B.done?se(j):Promise.resolve(j).then(le,ue)}function J(N){return function(){var se=this,re=arguments;return new Promise(function(le,ue){var de=N.apply(se,re);function he(j){u(de,le,ue,he,B,"next",j)}function B(j){u(de,le,ue,he,B,"throw",j)}he(void 0)})}}k.d(De,{Z:()=>J})}},ot=>{ot(ot.s=8064)}]);